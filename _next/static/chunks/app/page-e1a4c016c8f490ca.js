(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{79391:function(){},20498:function(e,t,n){Promise.resolve().then(n.bind(n,17465))},17465:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Home}});var r=n(31113),a=n(93680),u=n(26537),s=n(30639),o=n(4283),l=n(95702),i=n(44939),c=n(19757),d=n(59175),f=n(5035),p=n(47518),m=n(26361),v=n(69708),h=n(64103),y=n(17695),b=h.useState,esm_useHover=function(e){var t,n,r=b(!1),a=r[0],u=r[1];return"function"==typeof e&&(e=e(a)),[h.cloneElement(e,{onMouseEnter:(t=e.props.onMouseEnter,function(e){(t||y.ZT)(e),u(!0)}),onMouseLeave:(n=e.props.onMouseLeave,function(e){(n||y.ZT)(e),u(!1)})}),a]};let x=[{icon:a.Z,tit:"Interest Bear",sub:"Stablecoin",hoverTextColor:"#ff8080"},{icon:u.Z,tit:"Leverage Bull",sub:"Margin Token",hoverTextColor:"#53baff"},{icon:s.Z,tit:"Principal Panda",sub:"Principal Token",hoverTextColor:"#0ed19a"},{icon:o.Z,tit:"Boost Bribe Venom",sub:"Yield Token",hoverTextColor:"#ebc013"}];function CardItem(e){let[t]=esm_useHover(t=>(0,r.jsxs)("div",{className:(0,m.cn)("card flex items-center gap-5 py-4",e.className),children:[(0,r.jsx)(e.icon,{showBg:t,showOutline:!0,className:(0,m.cn)("text-[3.375rem] ",t?"text-white":"text-black dark:text-white")}),(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsx)("span",{style:{color:t?e.hoverTextColor:""},className:(0,m.cn)("font-semibold text-xl","text-black dark:text-white"),children:e.tit}),(0,r.jsx)("span",{className:"font-medium text-xs opacity-50 dark:text-white",children:e.sub})]})]},e.tit));return t}function Home(){let e=(0,d.p)(),{tvl:t}=(0,f.w)();(0,f.R)(),(0,p.m)();let n=c.iK[e];n.find(e=>"USDB"==e.assetTokenSymbol);let a=(0,v.useRouter)();return(0,r.jsx)(i.E,{children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row max-w-[1160px] mx-auto px-4 gap-10 md:gap-20 h-[calc(100vh-100px)] pt-[5vh] md:pt-[10vh] pb-8 md:justify-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex md:mt-10 text-[5vw] md:text-[min(2.5rem,2.7vw)] !leading-normal font-semibold text-slate-700 dark:text-slate-50",children:["A Structured Protocol for Better ",(0,r.jsx)("br",{}),"Liquidity Utilization."]}),(0,r.jsxs)("div",{className:"flex gap-5 mt-8 w-fit justify-start flex-wrap",children:[(0,r.jsx)("button",{className:"btn-primary !text-sm w-[150px] !mx-0  mt-0",onClick:()=>a.push("/l-vaults"),children:"Launch Dapp"}),(0,r.jsxs)("button",{className:"text-sm h-10 rounded-lg bg-btndis w-[193px] flex justify-center items-center gap-2",onClick:()=>open("https://www.berachain.com","_blank"),children:[(0,r.jsx)(l.c,{size:24,symbol:"berachain"}),"Built on Berachain"]})]})]}),(0,r.jsx)("div",{className:"flex flex-col gap-6",children:x.map(e=>(0,r.jsx)(CardItem,{...e},e.tit))})]})})}},88439:function(e,t,n){"use strict";n.d(t,{b:function(){return useMemoOfChainId}});var r=n(64103),a=n(59175);function useMemoOfChainId(e){let t=(0,a.p)(),n=(0,r.useRef)({});return(0,r.useMemo)(()=>(n.current[t]||(n.current[t]=e()),n.current[t]),[t])}},45438:function(e,t,n){"use strict";n.d(t,{i:function(){return c},p:function(){return useUpdatePtypoolApy}});var r=n(19757),a=n(22139),u=n(3106),s=n(64103),o=n(33737),l=n(93108),i=n(59175);let c=(0,l.Ue)(e=>({update:e}));function useUpdatePtypoolApy(e){let t=(0,i.p)(),n=r.iK[t],l=(0,u.R)(e=>e.sliceLVaultsStore.lvaults);(0,s.useEffect)(()=>{console.info("updatePtypoolApy"),n.forEach(n=>{let u=l[n.vault];if(n.ptyPoolAboveAddress&&u&&u.sellPoolTotalStaking&&c.getState().update({[n.ptyPoolAboveAddress]:{staking:(0,o.v)("0.025",10),matching:0n}}),n.ptyPoolBelowAddress&&u&&u.buyPoolTotalStaking&&!u.isStable){let s=u&&u.sellPoolTotalStaking*e[r.O1[t]],o=s>0n&&u.settingsDecimals>0n?u.M_ETHx*u.Y*e[n.xTokenAddress]*a.Pq/2n/s/u.settingsDecimals**10n:0n;c.getState().update({[n.ptyPoolBelowAddress]:{staking:o*10n**10n/a.Pq,matching:0n}})}})},[n,l,e,t])}},5035:function(e,t,n){"use strict";n.d(t,{R:function(){return useTVLV1},w:function(){return useTVL}});var r=n(19757),a=n(59175),u=n(64103),s=n(52671),o=n(22139),l=n(15506),i=n(70258),c=n(26361),d=n(3106),f=n(83978),p=n.n(f),m=n(87031),v=n(90168);function useTVLV1(){var e,t;let n=(0,a.p)(),d=null===(e=r.Lh[n])||void 0===e?void 0:e[0],f=null===(t=r.Lh[n])||void 0===t?void 0:t[1],{prices:p}=(0,u.useContext)(s.g),{data:m}=(0,l.uX)({contracts:[{abi:i.Wn,address:r.O6[n],functionName:"getVaultState",args:[null==d?void 0:d.vault]},{abi:i.Wn,address:r.O6[n],functionName:"getStableVaultState",args:[null==f?void 0:f.vault]},{abi:i.aT,address:null==d?void 0:d.ptyPoolAboveAddress,functionName:"totalStakingBalance"}]}),v=(0,c.ok)(m,[0,"result","M_ETH"]),h=(0,c.ok)(m,[1,"result","M_USDC"]),y=(0,c.ok)(m,[2,"result"]);return(v+y)*p[r.K8]/o.Pq+h*p[null==f?void 0:f.assetTokenAddress]/o.Pq}function useTVL(){let e=(0,a.p)(),t=r.iK[e],n=m.Fw[e].filter(e=>(e.onEnv||[]).includes(o.Vi)),{prices:l}=(0,u.useContext)(s.g),i=(0,d.R)(e=>e.sliceLVaultsStore.lvaults),c=(0,d.R)(e=>e.sliceTokenStore.totalSupply),f=t.map(e=>{var t;return(null===(t=i[e.vault])||void 0===t?void 0:t.usbTotalSupply)||0n}).reduce((e,t)=>e+t,0n),h=(0,d.R)(e=>e.sliceBVaultsStore.bvaults),y=(0,d.R)(e=>e.sliceTokenStore.prices),b=[{name:r.TW,symbol:r.TW,address:r.O1[e]}].concat(t.map(e=>({name:e.xTokenSymbol+e.version,symbol:e.xTokenSymbol,address:e.xTokenAddress}))).map(e=>{let t=l[e.address],n=e.symbol==r.TW?f:c[e.address]||0n,a=t*n/o.Pq;return{...e,price:t,amount:n,usdAmount:a}}).concat(t.filter(e=>!e.isStable).map(e=>{let t=i[e.vault],n=((null==t?void 0:t.sellPoolTotalStaking)||0n)+((null==t?void 0:t.buyPoolBalance)||0n),r=l[e.assetTokenAddress],a=r*n/o.Pq;return{name:e.assetTokenSymbol+e.version,symbol:e.assetTokenSymbol,address:e.assetTokenAddress,price:r,amount:n,usdAmount:a}})).concat(p().chain(n).mapValues(e=>{let t=v.P[e.asset],n=h[e.vault];t&&n&&n.lpLiq&&n.lpBase&&n.lpQuote&&y[t.base]&&y[t.quote];let r=y[e.asset]||0n,a=(null==n?void 0:n.lpLiq)||0n;return{name:e.assetSymbol,symbol:e.assetSymbol,address:e.asset,price:r,amount:a,usdAmount:r*a/o.Pq}}).values().reduce((e,t)=>{let n=e.find(e=>e.symbol==t.symbol);return n?(n.amount+=t.amount,n.usdAmount+=t.usdAmount,e):[...e,t]},[]).value()),x=b.reduce((e,t)=>e+t.usdAmount,0n);return{tvl:x,tvlItems:b}}},47518:function(e,t,n){"use strict";n.d(t,{m:function(){return useTokenApys}});var r=n(26361),a=n(88439),u=n(45438),s=n(19757),o=n(52671),l=n(3106),i=n(39577),c=n(64103),d=n(33737),f=n(59175);function useTokenApys(){let e=(0,a.b)(()=>(0,r.Yb)({},0n)),t=(0,f.p)(),{prices:n,usbApr:p}=(0,c.useContext)(o.g),m=(0,i.aS)(),v=(0,u.i)(),h=(0,l.R)(e=>e.sliceLVaultsStore.lvaults);return(0,c.useMemo)(()=>{let n=s.iK[t],a=(0,r.ok)(v[n[0].ptyPoolBelowAddress],"staking");e[s.O1[t]]=p.apr,e.USB_END=p.apr+a;let u=(0,d.v)("0.1",10);return n.forEach(t=>{let n=h[t.vault];if(t.assetTokenAddress!=s.K8&&n){let r=m[t.vault]>1n?(0,d.v)("".concat((m[t.vault]-1).toFixed(2)),10):0n,a=(0,d.v)("1",10);e[t.xTokenAddress]=(r*(u-n.Y*n.aar/a)+u*a)/a}}),null},[t,n,m,p,v]),e}},15506:function(e,t,n){"use strict";n.d(t,{D2:function(){return useWandContractRead},hp:function(){return l},uX:function(){return useWandContractReads}}),n(78403);var r=n(83978),a=n.n(r);n(64103);var u=n(30308),s=n(59307),o=n(93108);let l=(0,o.Ue)(e=>({time:a().now(),update:()=>{e({time:a().now()})}}));function useWandContractRead(e){let{time:t}=l();return(0,u.u)({...e,query:{placeholderData:e=>e,refetchOnMount:!1,refetchOnWindowFocus:!1,...e.query||{}},wandtime:t})}function useWandContractReads(e){let{time:t}=l();return(0,s.N)({...e,query:{placeholderData:e=>e,refetchOnMount:!1,refetchOnWindowFocus:!1,...e.query||{}},wandtime:t})}},52671:function(e,t,n){"use strict";n.d(t,{g:function(){return y},A:function(){return FetcherProvider}});var r=n(31113),a=n(19757),u=n(22139),s=n(59175),o=n(64103),l=n(25233),i=n(87958),c=n(41340),d=n(73216),f=n(88439),p=n(45438),m=n(26361),v=n(18358),h=n(39577);let y=(0,o.createContext)({prices:(0,m.Yb)({},0n),usbApr:{apr:0n,aprDecimals:10}}),FetcherProvider=e=>{let{children:t}=e;(0,v.d6)();let n=(0,s.p)();!function(){let{chainId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.m)({chainId:e});o.useMemo(()=>(t&&(d.ON.provider=function(e){var t,n;let{chain:r,transport:a}=e,u={chainId:r.id,name:r.name,ensAddress:null===(n=r.contracts)||void 0===n?void 0:null===(t=n.ensRegistry)||void 0===t?void 0:t.address};return"fallback"===a.type?new i.H(a.transports.map(e=>{let{value:t}=e;return new c.r(null==t?void 0:t.url,u)})):new c.r(a.url,u)}(t)),d.ON.provider),[t])}();let b=(0,f.b)(()=>(0,m.Yb)({[a.O1[n]]:u.Pq},0n));(0,h.$$)(b);let x=(0,h.UM)();return(0,p.p)(b),(0,r.jsx)(y.Provider,{value:{prices:b,usbApr:x},children:t})}},39577:function(e,t,n){"use strict";n.d(t,{$$:function(){return useSetLVaultPrices},UM:function(){return useUSBApr},aS:function(){return useValutsLeverageRatio},hC:function(){return useLVault},hY:function(){return useUserLVault},pK:function(){return d},so:function(){return useUpLVaultOnUserAction},z6:function(){return useVaultLeverageRatio}});var r=n(19757),a=n(22139),u=n(59175),s=n(88439),o=n(26361),l=n(3106),i=n(96670),c=n(73216);let d=(0,o.Yb)({vaultMode:0,discountEnable:!1},0n),f=(0,o.Yb)({},0n);function useLVault(e){return(0,l.R)(t=>t.sliceLVaultsStore.lvaults[e]||d)}function useUserLVault(e){return(0,l.R)(t=>t.sliceLVaultsStore.user[e]||f)}function useVaultLeverageRatio(e){let t=useLVault(e.vault),n=(0,o.pF)(t.aar,t.AARDecimals);return Math.max(0,1+1/(n-1))}function useValutsLeverageRatio(){let e=(0,u.p)(),t=r.iK[e],n=(0,s.b)(()=>(0,o.Yb)({},0)),a=(0,l.R)(e=>e.sliceLVaultsStore.lvaults);return t.forEach(e=>{let t=a[e.vault],r=t?(0,o.pF)(t.aar,t.AARDecimals):0;n[e.vault]=Math.max(0,1+1/(r-1))}),n}function useSetLVaultPrices(e){let t=(0,l.R)(e=>e.sliceLVaultsStore.lvaults),n=(0,l.R)(e=>e.sliceTokenStore.totalSupply),s=(0,u.p)();r.iK[s].forEach(u=>{let o=t[u.vault]||d,l=o.assetBalance,i=o.latestPrice,c=o.usbTotalSupply,f=n[u.xTokenAddress]||0n,p=f>0n&&l>0n&&i>0n&&c>0n&&l*i>c*a.Pq?(l*i-c*a.Pq)/f:0n;e[u.xTokenAddress]=p,e[u.assetTokenAddress]=i,f>0n&&l>0n&&i>0n&&c>0n&&l*i<c*a.Pq&&(e[r.O1[s]]=l*i/c)})}function useUSBApr(){let e=(0,u.p)(),t=(0,l.R)(e=>e.sliceLVaultsStore.lvaults),n=0,a=0n,s=0n;return r.iK[e].forEach(e=>{let r=t[e.vault]||d;r.isStable?(a+=r.M_USB_USDC*r.Y*r.aar/10n**r.AARDecimals,s+=r.M_USB_USDC,r.M_USB_USDC>0n&&r.Y>0n&&n++):(a+=r.M_USB_ETH*r.Y,s+=r.M_USB_ETH,r.M_USB_ETH>0n&&r.Y>0n&&n++)}),{apr:s>0n?a/s:0n,aprDecimals:10}}function useUpLVaultOnUserAction(e){let{address:t}=(0,i.m)();return()=>{(0,o.XD)(async()=>{if(!t)return;let n=l.w.getState().sliceLVaultsStore,a=[e.assetTokenAddress,e.xTokenAddress,r.O1[(0,c.BV)()]];await Promise.all([n.updateLVaults([e]),n.updateUserLVault(e,t),l.w.getState().sliceTokenStore.updateTokensBalance(a,t),l.w.getState().sliceTokenStore.updateTokenTotalSupply(a)])},3,1e3).catch(console.error)}}},17695:function(e,t,n){"use strict";n.d(t,{S1:function(){return off},ZT:function(){return noop},jU:function(){return r},on:function(){return on}});var noop=function(){};function on(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function off(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var r="undefined"!=typeof window},25e3:function(e,t,n){"use strict";n.d(t,{L:function(){return readContract}});var r=n(12537),a=n(96685);function readContract(e,t){let{chainId:n,...u}=t,s=e.getClient({chainId:n}),o=(0,a.s)(s,r.L,"readContract");return o(u)}},64828:function(e,t,n){"use strict";n.d(t,{J:function(){return readContracts}});var r=n(33066),a=n(74659),u=n(96685);async function multicall_multicall(e,t){let{allowFailure:n=!0,chainId:r,contracts:s,...o}=t,l=e.getClient({chainId:r}),i=(0,u.s)(l,a.A,"multicall");return i({allowFailure:n,contracts:s,...o})}var s=n(25e3);async function readContracts(e,t){let{allowFailure:n=!0,blockNumber:a,blockTag:u,...o}=t,l=t.contracts;try{let t=l.reduce((t,n,r)=>{let a=n.chainId??e.state.chainId;return{...t,[a]:[...t[a]||[],{contract:n,index:r}]}},{}),r=(await Promise.all(Object.entries(t).map(([t,r])=>multicall_multicall(e,{...o,allowFailure:n,blockNumber:a,blockTag:u,chainId:parseInt(t),contracts:r.map(({contract:e})=>e)})))).flat(),s=Object.values(t).flatMap(e=>e.map(({index:e})=>e));return r.reduce((e,t,n)=>(e&&(e[s[n]]=t),e),[])}catch(t){if(t instanceof r.uq)throw t;let promises=()=>l.map(t=>(0,s.L)(e,{...t,blockNumber:a,blockTag:u}));if(n)return(await Promise.allSettled(promises())).map(e=>"fulfilled"===e.status?{result:e.value,status:"success"}:{error:e.reason,result:void 0,status:"failure"});return await Promise.all(promises())}}},55046:function(e,t,n){"use strict";function hashFn(e){return JSON.stringify(e,(e,t)=>!function(e){if(!hasObjectPrototype(e))return!1;let t=e.constructor;if(void 0===t)return!0;let n=t.prototype;return!!(hasObjectPrototype(n)&&n.hasOwnProperty("isPrototypeOf"))}(t)?"bigint"==typeof t?t.toString():t:Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}))}function hasObjectPrototype(e){return"[object Object]"===Object.prototype.toString.call(e)}function filterQueryOptions(e){let{_defaulted:t,behavior:n,gcTime:r,initialData:a,initialDataUpdatedAt:u,maxPages:s,meta:o,networkMode:l,queryFn:i,queryHash:c,queryKey:d,queryKeyHashFn:f,retry:p,retryDelay:m,structuralSharing:v,getPreviousPageParam:h,getNextPageParam:y,initialPageParam:b,_optimisticResults:x,enabled:S,notifyOnChangeProps:g,placeholderData:k,refetchInterval:T,refetchIntervalInBackground:w,refetchOnMount:A,refetchOnReconnect:P,refetchOnWindowFocus:L,retryOnMount:C,select:O,staleTime:V,suspense:R,throwOnError:M,config:j,connector:q,query:U,...B}=e;return B}n.d(t,{O:function(){return filterQueryOptions},k:function(){return hashFn}})},96685:function(e,t,n){"use strict";function getAction(e,t,n){let r=e[t.name];if("function"==typeof r)return r;let a=e[n];return"function"==typeof a?a:n=>t(e,n)}n.d(t,{s:function(){return getAction}})},30308:function(e,t,n){"use strict";n.d(t,{u:function(){return useReadContract}});var r=n(25e3),a=n(55046),u=n(44178),s=n(90283),o=n(57728);function useReadContract(e={}){let{abi:t,address:n,functionName:l,query:i={}}=e,c=(0,o.Z)(e),d=(0,s.x)({config:c}),f=function(e,t={}){return{async queryFn({queryKey:n}){let a=t.abi;if(!a)throw Error("abi is required");let{address:u,functionName:s,scopeKey:o,...l}=n[1];if(!u)throw Error("address is required");if(!s)throw Error("functionName is required");let i=l.args;return(0,r.L)(e,{abi:a,address:u,functionName:s,args:i,...l})},queryKey:function(e={}){let{abi:t,...n}=e;return["readContract",(0,a.O)(n)]}(t)}}(c,{...e,chainId:e.chainId??d}),p=!!(n&&t&&l&&(i.enabled??!0));return(0,u.aM)({...i,...f,enabled:p,structuralSharing:i.structuralSharing??u.if})}},59307:function(e,t,n){"use strict";n.d(t,{N:function(){return useReadContracts}});var r=n(64828),a=n(55046),u=n(64103),s=n(44178),o=n(90283),l=n(57728);function useReadContracts(e={}){let{contracts:t=[],query:n={}}=e,i=(0,l.Z)(e),c=(0,o.x)({config:i}),d=function(e,t={}){return{async queryFn({queryKey:n}){let a=[],u=n[1].contracts.length;for(let e=0;e<u;e++){let r=n[1].contracts[e],u=t.contracts?.[e].abi;a.push({...r,abi:u})}let{scopeKey:s,...o}=n[1];return(0,r.J)(e,{...o,contracts:a})},queryKey:function(e={}){let t=[];for(let n of e.contracts??[]){let{abi:r,...a}=n;t.push({...a,chainId:a.chainId??e.chainId})}return["readContracts",(0,a.O)({...e,contracts:t})]}(t)}}(i,{...e,chainId:c}),f=(0,u.useMemo)(()=>{let e=!1;for(let n of t){let{abi:t,address:r,functionName:a}=n;if(!t||!r||!a){e=!1;break}e=!0}return!!(e&&(n.enabled??!0))},[t,n.enabled]);return(0,s.aM)({...d,...n,enabled:f,structuralSharing:n.structuralSharing??s.if})}},44178:function(e,t,n){"use strict";n.d(t,{aM:function(){return useQuery},if:function(){return structuralSharing}});var r=n(64370),a=n(72549),u=n(73992),s=n(55046);function useQuery(e){let t=(0,r.a)({...e,queryKeyHashFn:s.k});return t.queryKey=e.queryKey,t}function structuralSharing(e,t){return(0,u.v)(e,t)?e:(0,a.Q$)(e,t)}}},function(e){e.O(0,[4881,7495,7622,4876,4167,3204,1772,5974,7112,7093,604,1744],function(){return e(e.s=20498)}),_N_E=e.O()}]);