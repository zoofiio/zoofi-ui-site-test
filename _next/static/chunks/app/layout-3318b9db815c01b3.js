(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{79391:function(){},23423:function(e,t,n){Promise.resolve().then(n.t.bind(n,8367,23)),Promise.resolve().then(n.bind(n,79946)),Promise.resolve().then(n.t.bind(n,9487,23)),Promise.resolve().then(n.t.bind(n,29180,23)),Promise.resolve().then(n.t.bind(n,62888,23)),Promise.resolve().then(n.t.bind(n,82160,23)),Promise.resolve().then(n.t.bind(n,80265,23))},79946:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return PageLayout}});var a=n(31113),r=n(73216),s=n(22139),l=n(70258),o=n(19757),c=n(59175),i=n(15506),u=n(3168),d=n(3367),f=n(33501),m=n(41690),h=n.n(m),p=n(42487),v=n.n(p),x=n(69708),g=n(64103),b=n(44945),w=n(36847),S=n(44726),j=n(96670),y=n(35664),k=n(12045),P=n(44769),L=n(26758),A=n(95702);let N={[r.BG.id]:"Berachain Bartio"},V={[r.BG.id]:"".concat(L.G,"/berachain.svg")};function Header(){let e=(0,x.usePathname)(),{width:t}=(0,S.Z)(window.innerWidth,window.innerHeight),n="/"!==e&&t<1024,m=(0,c.p)(),{openChainModal:p}=(0,d.iC)(),L=function(){var e,t;let n=(0,c.p)(),{address:a}=(0,j.m)(),{data:r}=(0,i.D2)({abi:l.WW,address:null===(t=o.iK[n])||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.vault,functionName:"owner",query:{enabled:!!a}});return!!a&&a==r}(),T=function(){var e,t;let n=(0,c.p)(),{address:a}=(0,j.m)(),{data:r}=(0,i.D2)({abi:l.Og,address:null===(t=o.iK[n])||void 0===t?void 0:null===(e=t[1])||void 0===e?void 0:e.assetTokenFeed,functionName:"isTester",args:[a],query:{enabled:!!a}});return!!r}(),B=(0,g.useMemo)(()=>{let e=[{href:"/l-vaults",label:"L-Vaults",icon:b.QZG},{href:"/b-vaults",label:"B-Vaults",icon:b.QZG},{href:"/portfolio",label:"Portfolio",icon:b.J4},{href:"/dashboard",label:"Dashboard",icon:b.FL4}];return L&&e.push({href:"/admin",label:"Admin",icon:b.C5v}),(T||L)&&e.push({href:"/tester",label:"Tester",icon:b.rv8}),e},[L,T]),{chain:C,address:U}=(0,j.m)(),M=!C||-1==r.Af.findIndex(e=>e.id==C.id)||r.Af.length<=1,D=(0,g.useMemo)(()=>[{name:"doc",url:(0,s.xb)(),icon:w.K99},{name:"Twitter",url:s.v,icon:w.J6q},{name:"Discord",url:s.Hj,icon:w.HpO}],[P.Kh.value]);return(0,a.jsx)("div",{className:"h-[72px] fixed w-full flex bg-slate-50/30 backdrop-blur-lg dark:text-slate-50 dark:bg-slate-900/30 z-30",children:(0,a.jsxs)("header",{className:"h-[72px] w-full max-w-[1300px] inset-0 mx-auto flex items-center justify-between px-4   z-30 ml-[calc(100vw - 100%)] ",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(v(),{href:"/",className:"font-semibold flex pr-1 items-center text-base leading-7",children:(0,a.jsx)(A.c,{symbol:"logo-alt",size:90})}),(0,a.jsxs)(u.fC,{children:[(0,a.jsxs)(u.xz,{className:(0,f.Z)("flex text-slate-500 dark:text-slate-50 font-medium items-center capitalize text-sm whitespace-nowrap",{hidden:!n}),children:[e.split("/")[1],(0,a.jsx)(w.YRR,{})]}),(0,a.jsx)(u.Uv,{children:(0,a.jsx)(u.VY,{className:"z-50 bg-white p-1 border border-slate-200 shadow-lg rounded-md dark:bg-gray-800 dark:border-gray-700",children:B.map(e=>{let{href:t,label:n,icon:r}=e;return(0,a.jsx)(u.ck,{children:(0,a.jsxs)(v(),{className:"flex items-center text-slate-500 text-sm font-medium gap-1 px-3 py-2 rounded-sm hover:bg-slate-50 dark:text-slate-50 dark:hover:bg-gray-700/30",href:t,children:[(0,a.jsx)(r,{}),n]})},n)})})})]})]}),"/"!==e?(0,a.jsx)("div",{className:"hidden lg:flex flex-1 px-5 items-center gap-10",children:B.map(t=>{let{href:n,label:r,icon:s}=t;return(0,a.jsxs)(v(),{className:(0,f.Z)("text-sm font-medium flex gap-1 items-center transition-all active:translate-y-1",e===n?"text-slate-700 dark:text-slate-50":"text-slate-500 dark:text-slate-50/50"),href:n,children:[(0,a.jsx)(s,{}),r]},n)})}):null,(0,a.jsxs)("div",{className:"flex items-center gap-1 md:gap-4",children:[(0,a.jsx)(k.h,{}),(0,a.jsx)("div",{className:"hidden lg:flex items-center gap-3",children:D.map(e=>{let{url:t,icon:n,name:r}=e;return(0,a.jsx)(v(),{href:t,className:"text-slate-300 hover:text-primary",children:(0,a.jsx)(n,{})},r)})}),M&&"/"!==e&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-500 dark:text-slate-50 font-medium rounded-full cursor-pointer",onClick:()=>p&&p(),children:[(0,a.jsx)(h(),{width:24,height:24,src:V[m],alt:""}),(0,a.jsx)("div",{className:"hidden sm:block",children:N[m]})]}),"/"!==e&&(0,a.jsx)(y.Z,{})]})]})})}var T=n(23647),B=n(47259),C=n(15680),U=n(4410),M=n(4356),D=n(87142),_=n(74882),O=n(38422),R=n(14266),q=n(178),W=n(78246),E=n(62753),H=n(8887),I=n(45066),Y=n(11522),z=n(45248),F=n(99946),Z=n(52671),K=n(85895),$=n(8912),G=n(7915),J=n(32417),X=n(83037),Q=n(26276),ee=n(9793);BigInt.prototype.toJSON=function(){return this.toString()};let et=new K.f({uri:"https://api.studio.thegraph.com/query/45897/wand/version/latest",cache:new $.h}),en=new J.S({defaultOptions:{queries:{retry:3}}});function Providers(e){let{children:t}=e,[n,s]=g.useState();g.useEffect(()=>{let e=(0,H.o)({storage:{getItem:e=>window.localStorage.getItem(e),removeItem:e=>window.localStorage.removeItem(e),setItem:(e,t)=>{"wagmi.cache"!==e&&localStorage.setItem(e,t)}}}),t=(0,d.a3)([{groupName:"Recommended",wallets:[M.U,D.P,_.D,O.c,R.X,q.J,W.b,E.D]}],{appName:"ZooFi",projectId:"abf1f323cd9ff9f6a27167188d993168"});s((0,I._)({connectors:t,storage:e,chains:r.Af,client:e=>{let{chain:t}=e;return(0,Q.e)({chain:t,transport:(0,ee.d)(void 0,{batch:r.Xp}),batch:{multicall:r.y1}})}}))},[]);let l=(0,k.l)(e=>e.theme);return n?(0,a.jsx)(G.e,{client:et,children:(0,a.jsx)(Y.F,{config:n,children:(0,a.jsx)(X.aH,{client:en,children:(0,a.jsx)(F.QueryParamProvider,{adapter:z.Z,children:(0,a.jsx)(d.pj,{locale:"en-US",modalSize:"compact",theme:"dark"===l?(0,C.$)({accentColor:"green"}):(0,U.W)(),children:(0,a.jsx)(Z.A,{children:t})})})})})}):null}var ea=n(26361);function PageLoading(){let e=(0,T.N)();return(0,a.jsx)("div",{className:(0,ea.cn)("top-loader fixed z-10 top-0 left-0",e?"visible":"invisible")})}function PageLayout(e){let{children:t}=e;return(0,P.Vi)(),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(Providers,{children:[(0,a.jsx)(Header,{}),t]}),(0,a.jsx)(B.x,{position:"top-right",offset:70}),(0,a.jsx)(PageLoading,{})]})}},35664:function(e,t,n){"use strict";n.d(t,{Z:function(){return ConnectBtn}});var a=n(31113),r=n(3367),s=n(44726),l=n(96670),o=n(60689);function ConnectBtn(){let e=(0,s.Z)(1024),{isConnected:t}=(0,l.m)(),n=(0,r.We)();return t?(0,a.jsx)(r.NL,{chainStatus:e.width>600?"full":"icon",showBalance:!1}):(0,a.jsx)(o.k,{className:"mt-0 w-fit",onClick:()=>{var e;return null===(e=n.openConnectModal)||void 0===e?void 0:e.call(n)},children:(0,a.jsx)("span",{className:"font-medium text-sm px-5",children:"Connect Wallet"})})}},36762:function(e,t,n){"use strict";n.d(t,{$:function(){return Spinner}});var a=n(31113),r=n(26361);let Spinner=e=>{let{className:t}=e;return(0,a.jsxs)("svg",{fill:"none",className:(0,r.cn)("animate-spin h-5 w-5 2-ml-1 2mr-3",t),viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},60689:function(e,t,n){"use strict";n.d(t,{k:function(){return BBtn}});var a=n(31113),r=n(26361),s=n(83978),l=n.n(s),o=n(64103),c=n(36762);function BBtn(e){let{borderWidth:t=1,children:n,busy:s,busyShowContent:i=!0,className:u,hiddenBorder:d,...f}=e,m=(0,o.useRef)(null),[h,p]=(0,o.useState)("0_0"),v="unset",x="unset";if(m.current&&!d){let e=m.current,n=e.clientWidth,a=e.clientHeight,r=parseInt(getComputedStyle(e).borderRadius.replace("px","")),s="A".concat(r-t," ").concat(r-t," 0, 0, 1, ").concat(r," ").concat(t,"L").concat(n-r," ").concat(t),o="A".concat(r-t," ").concat(r-t," 0, 0, 1, ").concat(n-t," ").concat(r,"L").concat(n-t," ").concat(a-r),c="A".concat(r-t," ").concat(r-t," 0, 0, 1, ").concat(n-r," ").concat(a-t,"L").concat(r," ").concat(a-t," "),i="A".concat(r-t," ").concat(r-t," 0, 0, 1, ").concat(t," ").concat(a-r,"L").concat(t," ").concat(r),u="M ".concat(t," ").concat(r," ").concat(s," ").concat(o," ").concat(c," ").concat(i),d="M 0 0 L 0 ".concat(a," L ").concat(n," ").concat(a," L ").concat(n," 0 L 0 0 ").concat(u," Z");v="path('".concat(d,"')");let f=2*n,tranP=e=>l().round(e/2,2);x="radial-gradient(122.5% ".concat(l().round(122.5/(n/a),2),"% at ").concat(l().round((52.9*n+50*f-50*n)/f,2),"% ").concat(l().round((16.25*a+50*f-50*a)/f,2),"%, #15d264 0%, #2cbd35 ").concat(tranP(36.26),"%, #dcf45d ").concat(tranP(92.54),"%)")}return(0,o.useEffect)(()=>{let e=new ResizeObserver(()=>{var e,t;p("".concat((null===(e=m.current)||void 0===e?void 0:e.clientWidth)||0,"_").concat((null===(t=m.current)||void 0===t?void 0:t.clientWidth)||0))});return m.current&&e.observe(m.current),()=>{m.current&&e.unobserve(m.current)}},[m.current]),(0,a.jsxs)("button",{...f,ref:m,style:{background:"radial-gradient(76.25% 76.25% at 50.3% 23.75%,rgba(27, 205, 89, 0.2) 0%,rgba(179, 232, 84, 0.2) 100%)"},className:(0,r.cn)("group/bbtn relative px-3 cursor-pointer w-full transition-all leading-[2.375] ring-0 text-base text-black dark:text-white font-medium h-10 rounded-lg disabled:opacity-60 disabled:cursor-not-allowed",u),children:[!d&&(0,a.jsx)("div",{className:"absolute w-full h-full left-0 top-0 flex justify-center items-center rounded-lg overflow-hidden",style:{visibility:m.current?"visible":"hidden",clipPath:v},children:(0,a.jsx)("div",{className:(0,r.cn)("w-[200%] aspect-square shrink-0",{"group-hover/bbtn:animate-spin-slow":!e.disabled}),style:{background:x}})}),s&&(0,a.jsx)(c.$,{}),(i||!s)&&n]})}},88439:function(e,t,n){"use strict";n.d(t,{b:function(){return useMemoOfChainId}});var a=n(64103),r=n(59175);function useMemoOfChainId(e){let t=(0,r.p)(),n=(0,a.useRef)({});return(0,a.useMemo)(()=>(n.current[t]||(n.current[t]=e()),n.current[t]),[t])}},45438:function(e,t,n){"use strict";n.d(t,{i:function(){return u},p:function(){return useUpdatePtypoolApy}});var a=n(19757),r=n(22139),s=n(3106),l=n(64103),o=n(33737),c=n(93108),i=n(59175);let u=(0,c.Ue)(e=>({update:e}));function useUpdatePtypoolApy(e){let t=(0,i.p)(),n=a.iK[t],c=(0,s.o)(e=>e.sliceLVaultsStore.lvaults,["sliceLVaultsStore.lvaults"]);(0,l.useEffect)(()=>{console.info("updatePtypoolApy"),n.forEach(n=>{let s=c[n.vault];if(n.ptyPoolAboveAddress&&s&&s.sellPoolTotalStaking&&u.getState().update({[n.ptyPoolAboveAddress]:{staking:(0,o.v)("0.025",10),matching:0n}}),n.ptyPoolBelowAddress&&s&&s.buyPoolTotalStaking&&!s.isStable){let l=s&&s.sellPoolTotalStaking*e[a.O1[t]],o=l>0n&&s.settingsDecimals>0n?s.M_ETHx*s.Y*e[n.xTokenAddress]*r.Pq/2n/l/s.settingsDecimals**10n:0n;u.getState().update({[n.ptyPoolBelowAddress]:{staking:o*10n**10n/r.Pq,matching:0n}})}})},[n,c,e,t])}},15506:function(e,t,n){"use strict";n.d(t,{D2:function(){return useWandContractRead},uX:function(){return useWandContractReads}}),n(78403);var a=n(83978),r=n.n(a);n(64103);var s=n(30308),l=n(59307),o=n(93108);let c=(0,o.Ue)(e=>({time:r().now(),update:()=>{e({time:r().now()})}}));function useWandContractRead(e){let{time:t}=c();return(0,s.u)({...e,query:{placeholderData:e=>e,refetchOnMount:!1,refetchOnWindowFocus:!1,...e.query||{}},wandtime:t})}function useWandContractReads(e){let{time:t}=c();return(0,l.N)({...e,query:{placeholderData:e=>e,refetchOnMount:!1,refetchOnWindowFocus:!1,...e.query||{}},wandtime:t})}},52671:function(e,t,n){"use strict";n.d(t,{g:function(){return b},A:function(){return FetcherProvider}});var a=n(31113),r=n(19757),s=n(22139),l=n(59175),o=n(64103),c=n(25233),i=n(87958),u=n(41340),d=n(73216),f=n(88439),m=n(45438),h=n(26361),p=n(64370),v=n(3106),x=n(18358),g=n(39577);let b=(0,o.createContext)({prices:(0,h.Yb)({},0n),usbApr:{apr:0n,aprDecimals:10}}),FetcherProvider=e=>{let{children:t}=e;(0,x.d6)();let n=(0,l.p)();!function(){let{chainId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.m)({chainId:e});o.useMemo(()=>(t&&(d.ON.provider=function(e){var t,n;let{chain:a,transport:r}=e,s={chainId:a.id,name:a.name,ensAddress:null===(n=a.contracts)||void 0===n?void 0:null===(t=n.ensRegistry)||void 0===t?void 0:t.address};return"fallback"===r.type?new i.H(r.transports.map(e=>{let{value:t}=e;return new u.r(null==t?void 0:t.url,s)})):new u.r(r.url,s)}(t)),d.ON.provider),[t])}();let w=(0,f.b)(()=>(0,h.Yb)({[r.O1[n]]:s.Pq},0n));(0,g.$$)(w);let S=(0,g.UM)();return(0,m.p)(w),(0,p.a)({queryKey:["updateDefTokenList"],staleTime:36e5,queryFn:async()=>(await v.w.getState().sliceTokenStore.updateDefTokenList(),!0)}),(0,a.jsx)(b.Provider,{value:{prices:w,usbApr:S},children:t})}},39577:function(e,t,n){"use strict";n.d(t,{$$:function(){return useSetLVaultPrices},UM:function(){return useUSBApr},aS:function(){return useValutsLeverageRatio},hC:function(){return useLVault},hY:function(){return useUserLVault},pK:function(){return d},so:function(){return useUpLVaultOnUserAction},z6:function(){return useVaultLeverageRatio}});var a=n(19757),r=n(22139),s=n(59175),l=n(88439),o=n(26361),c=n(3106),i=n(96670),u=n(73216);let d=(0,o.Yb)({vaultMode:0,discountEnable:!1},0n),f=(0,o.Yb)({},0n);function useLVault(e){return(0,c.o)(t=>t.sliceLVaultsStore.lvaults[e]||d,["sliceLVaultsStore.lvaults.".concat(e)])}function useUserLVault(e){return(0,c.o)(t=>t.sliceLVaultsStore.user[e]||f,["sliceLVaultsStore.user.".concat(e)])}function useVaultLeverageRatio(e){let t=useLVault(e.vault),n=(0,o.pF)(t.aar,t.AARDecimals);return Math.max(0,1+1/(n-1))}function useValutsLeverageRatio(){let e=(0,s.p)(),t=a.iK[e],n=(0,l.b)(()=>(0,o.Yb)({},0)),r=(0,c.o)(e=>e.sliceLVaultsStore.lvaults);return t.forEach(e=>{let t=r[e.vault],a=t?(0,o.pF)(t.aar,t.AARDecimals):0;n[e.vault]=Math.max(0,1+1/(a-1))}),n}function useSetLVaultPrices(e){let t=(0,c.o)(e=>e.sliceLVaultsStore.lvaults),n=(0,c.o)(e=>e.sliceTokenStore.totalSupply),l=(0,s.p)();a.iK[l].forEach(s=>{let o=t[s.vault]||d,c=o.assetBalance,i=o.latestPrice,u=o.usbTotalSupply,f=n[s.xTokenAddress]||0n,m=f>0n&&c>0n&&i>0n&&u>0n&&c*i>u*r.Pq?(c*i-u*r.Pq)/f:0n;e[s.xTokenAddress]=m,e[s.assetTokenAddress]=i,f>0n&&c>0n&&i>0n&&u>0n&&c*i<u*r.Pq&&(e[a.O1[l]]=c*i/u)})}function useUSBApr(){let e=(0,s.p)(),t=(0,c.o)(e=>e.sliceLVaultsStore.lvaults),n=0,r=0n,l=0n;return a.iK[e].forEach(e=>{let a=t[e.vault]||d;a.isStable?(r+=a.M_USB_USDC*a.Y*a.aar/10n**a.AARDecimals,l+=a.M_USB_USDC,a.M_USB_USDC>0n&&a.Y>0n&&n++):(r+=a.M_USB_ETH*a.Y,l+=a.M_USB_ETH,a.M_USB_ETH>0n&&a.Y>0n&&n++)}),{apr:l>0n?r/l:0n,aprDecimals:10}}function useUpLVaultOnUserAction(e){let{address:t}=(0,i.m)();return()=>{(0,o.XD)(async()=>{if(!t)return;let n=c.w.getState().sliceLVaultsStore,r=[e.assetTokenAddress,e.xTokenAddress,a.O1[(0,u.BV)()]];await Promise.all([n.updateLVaults([e]),n.updateUserLVault(e,t),c.w.getState().sliceTokenStore.updateTokensBalance(r,t),c.w.getState().sliceTokenStore.updateTokenTotalSupply(r)])},3,1e3).catch(console.error)}}},8367:function(){}},function(e){e.O(0,[4881,7495,7622,6121,2466,7073,9590,4167,8410,7625,5116,5790,8122,2487,540,1037,5974,7093,604,1744],function(){return e(e.s=23423)}),_N_E=e.O()}]);