(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4317],{94627:function(e,s,t){Promise.resolve().then(t.bind(t,11405))},11405:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Vaults}});var a=t(31113),l=t(26504),n=t(19757),i=t(22139),r=t(59175),c=t(85665);function useElementSizeCheck(e){let[s,t]=(0,c.Z)();return[s,e(t)]}var d=t(45438),o=t(64103);let x={};var m=t(15506),u=t(78354),p=t(26361),b=t(88239),h=t(84944),v=t(38946),f=t(62653),g=t(33501),j=t(11292),k=t(41440),N=t(99548),T=t(91214),y=t(33621),w=t(35664);function FmtPercent(e){let{className:s,value:t,decimals:l,showDecimals:n=2,plusI0:i=!0}=e,r=0n==t?0n:t||0n,c=i?r>=0n:r>0n,d=null==t||void 0==t||"bigint"!=typeof t;return(0,a.jsx)("span",{className:(0,p.cn)(s,c?"text-[#42FF37]":"text-[#F3474C]"),children:d?"-%":(0,a.jsxs)(a.Fragment,{children:[c&&"+",(0,p.Jh)(r,l,n)]})})}var A=t(36762),S=t(6371);function WrapDiv(e){let{children:s,wrap:t,...l}=e;return t?(0,a.jsx)("div",{...l,children:s}):s}function TokenValue(e){let{symbol:s,value:t,decimals:l}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(y.c,{className:"inline-block",size:16,symbol:s}),(0,h.dq)(t,l)]})}function PoolCard(e){let{type:s,vc:t}=e,c="buy"==s,R=(0,r.p)(),W=c?n.O1[R]:t.assetTokenAddress,M=c?t.assetTokenAddress:t.xTokenAddress,C=c?n.TW:t.assetTokenSymbol,P=c?t.assetTokenSymbol:n.TW,B=c?"Buy ".concat(t.assetTokenSymbol," Low"):"Sell ".concat(t.assetTokenSymbol," High"),D=c?t.ptyPoolBelowAddress:t.ptyPoolAboveAddress,{prices:q,balances:F,earns:_,vaultsState:E,assetLocked:V,vaultUSBTotal:U,usbApr:z}=(0,o.useContext)(b.g),Z=E[t.vault],L=_[D],{address:O}=(0,k.m)(),H=F[W],[I,Y]=(0,o.useState)(""),K=(0,p.su)(I),J=c?t.xTokenSymbol:t.assetTokenSymbol,$=c?t.assetTokenSymbol:t.xTokenSymbol;(0,o.useMemo)(()=>L.totalStake*(0,p.ok)(q,W,i.Pq)/i.Pq,[q[W],L.totalStake]);let X=c?null==Z?void 0:Z.AARS:null==Z?void 0:Z.AARU,G=(0,p.ok)(V,t.assetTokenAddress),Q=(0,p.ok)(U,t.vault),ee=(0,o.useMemo)(()=>X&&Z.AARDecimals&&0n!=G&&0n!=Q?X*Q*i.Pq/Z.AARDecimals/G/BigInt(1e9):(0,p.ok)(q,t.assetTokenAddress),[X,Q,Z.AARDecimals,G]),es=c?"Stake $USB, and when the ".concat(t.assetTokenSymbol," price falls to the target, it will trigger the purchase of ").concat(t.assetTokenSymbol," with staked $USB."):"Stake ".concat(t.assetTokenSymbol,", and when the ").concat(t.assetTokenSymbol," price rises to the target, staked ").concat(t.assetTokenSymbol," will be sold."),et=(0,m.D2)({abi:l.aT,address:D,functionName:"getAccruedMatchingYields"}),ea=(0,p.ok)(et,"data"),el=(0,o.useMemo)(()=>{let e=(0,p.ok)(L,"totalStake");if(0n==e||0n==q[W])return"0.00%";let s=10n**(Z.AARDecimals||10n),t=(Z.AART-s)*ee;if(0n==t)return"0.00%";let a=c?(Z.AART*Z.M_USB_ETH*i.Pq-Z.M_ETH*ee*s)/(Z.AART-s)/i.Pq:(Z.M_ETH*ee*s-Z.AART*Z.M_USB_ETH*i.Pq)/t;return(e=(0,p.NA)([e,a]))*q[W]>0n?(0,p.Jh)(ea*q[M]*i.Pq/(e*q[W]),18,3):"0.00%"},[L.totalStake,ea,M,W,q[M],q[W],c]),en=(0,d.i)(),ei=(0,p.ok)(en[D],"staking"),er=q[t.assetTokenAddress]>0&&ee>0n?c?(q[t.assetTokenAddress]-ee)*10n**10n/q[t.assetTokenAddress]:(ee-q[t.assetTokenAddress])*10n**10n/q[t.assetTokenAddress]:0n,ec=(0,o.useMemo)(()=>{let e=10n**(Z.AARDecimals||10n),s=(Z.AART-e)*ee/e;if(0n==s)return 0n;if(c){let t=(Z.AART*Z.M_USB_ETH*i.Pq-Z.M_ETH*ee*e)/e/s,a=t*ee/i.Pq,l=L.stake,n=L.totalStake>a&&a>=0n?l*a/L.totalStake:l;return n}{let t=(Z.M_ETH*ee*e-Z.AART*Z.M_USB_ETH*i.Pq)/e/s,a=L.stake,l=L.totalStake>t&&t>=0n?a*t/L.totalStake:a;return l}},[L,Z,c,ee]),ed=(0,o.useMemo)(()=>{let e=c?[{key:"eth_price",label:"".concat(t.assetTokenSymbol," Price"),value:(0,h.dq)(q[t.assetTokenAddress])},{key:"target_price",label:"Target Price",value:(0,a.jsxs)("div",{children:[(0,h.dq)(ee)," (",(0,a.jsx)(FmtPercent,{value:er<0n?void 0:-er,decimals:10,plusI0:!1}),")"]}),groupEnd:!0},{key:"apr_interest",label:"APY",value:(0,p.Jh)(z.apr+ei,z.aprDecimals,2),detail:(0,a.jsxs)("div",{className:"pl-2",children:[(0,a.jsxs)("div",{children:["~",n.TW," Interest: ",(0,p.Jh)(z.apr,z.aprDecimals,2)]}),(0,a.jsxs)("div",{children:["~",J," Yield: ",(0,p.Jh)(ei,z.aprDecimals,2)]})]}),groupEnd:!0},{key:"transacation_reward_pool",label:"Reward Pool",tip:"The reward funds originates from protocol, and when a purchase action is triggered, these funds will be distributed proportionally.",value:(0,a.jsx)(TokenValue,{symbol:$,value:ea})},{key:"discount_rate",label:"Reward Rate",tip:"This is an estimated value, to be determined upon triggering. Reward Rate =Reward/Transaction volume",value:"".concat(el," (Est.)")}]:[{key:"eth_price",label:"".concat(t.assetTokenSymbol," Price"),value:(0,h.dq)(q[t.assetTokenAddress])},{key:"target_price",label:"Target Price",value:(0,a.jsxs)("div",{children:[(0,h.dq)(ee)," (",(0,a.jsx)(FmtPercent,{value:er<0n?void 0:er,decimals:10,plusI0:!0}),")"]}),groupEnd:!0},{key:"apr_yield",label:"APY(".concat(J," Yield)"),value:(0,p.Jh)(ei,z.aprDecimals,2),groupEnd:!0},{key:"transacation_reward_pool",label:"Reward Pool",tip:"The reward funds originates from protocol, and when a sell action is triggered, these funds will be distributed proportionally.",value:(0,a.jsx)(TokenValue,{symbol:$,value:ea})},{key:"discount_rate",label:"Reward Rate",tip:"This is an estimated value, to be determined upon triggering. Reward Rate =Reward/Transaction volume",value:"".concat(el," (Est.)")}];return e},[L,ea]),eo=(0,o.useMemo)(()=>{let e=c?[{key:"successfully_brought",label:"Successfully Bought",value:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(TokenValue,{symbol:P,value:L.match}),(0,a.jsx)("span",{children:"+"}),(0,a.jsx)(TokenValue,{symbol:$,value:L.earnForMatch}),(0,a.jsx)(S.C,{inFlex:!0,children:"From Reward Pool"})]})},{key:"staking_earend",label:"".concat(J," Earned"),value:(0,a.jsx)(TokenValue,{symbol:J,value:L.earn})}]:[{key:"successfully_sold",label:"Successfully Sold",value:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(TokenValue,{symbol:P,value:L.match}),(0,a.jsx)("span",{children:"+"}),(0,a.jsx)(TokenValue,{symbol:$,value:L.earnForMatch}),(0,a.jsx)(S.C,{inFlex:!0,children:"From Reward Pool"})]})}];return e},[L,P,J,$]),{write:ex,isDisabled:em,isLoading:eu}=(0,u.R)({abi:l.aT,address:D,functionName:"claimAll"}),ep=function(e){let s=(0,o.useRef)(null);return x[e]&&x[e].includes(s)||(x[e]=[...x[e]||[],s]),(0,o.useEffect)(()=>{if(!s.current)return()=>{};let onResize=()=>{let t=x[e]||[],a=t.reduce((e,s)=>{var t;return Math.max((null===(t=s.current)||void 0===t?void 0:t.clientHeight)||0,e)},0);t.filter(e=>e!=s).forEach(e=>{var s;let t=(null===(s=e.current)||void 0===s?void 0:s.clientHeight)||0;t!==a&&a>0&&e.current&&(e.current.style.height="".concat(a,"px"))})};return window.addEventListener("resize",onResize),onResize(),()=>{window.removeEventListener("resize",onResize)}},[s.current]),s}(t.vault),[eb,eh]=useElementSizeCheck(e=>{let{width:s}=e;return s<512});return(0,a.jsxs)("div",{className:"card flex flex-col",ref:eb,children:[(0,a.jsxs)("div",{className:"flex gap-5 items-center justify-between",ref:ep,children:[(0,a.jsxs)("div",{className:"flex gap-3 md:gap-5 items-center",children:[(0,a.jsxs)("div",{className:"relative w-fit shrink-0",children:[(0,a.jsx)(y.c,{size:32,symbol:C,className:"md:hidden"}),(0,a.jsx)(y.c,{size:40,symbol:C,className:"hidden md:block"}),(0,a.jsx)(y.c,{size:16,symbol:P,className:"absolute -right-1 -bottom-1 md:hidden"}),(0,a.jsx)(y.c,{size:24,symbol:P,className:"absolute -right-2 -bottom-2 hidden md:block"})]}),(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("h6",{className:"page-sub",children:B||"title"}),(0,a.jsx)(S.C,{children:es})]})})]}),(0,a.jsx)(WrapDiv,{wrap:eh,className:"flex flex-col-reverse gap-1 items-end",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-xs text-black/60 dark:text-white/60 font-medium text-right",children:["Total ",C," Staked"]}),(0,a.jsx)("div",{className:"text-base text-black dark:text-slate-50 text-end font-semibold",children:(0,h.dq)(L.totalStake)})]})})]}),(0,a.jsx)(v.Z,{className:"my-4 h-[1px] dark:bg-zinc-600 "}),(0,a.jsxs)(f.Z,{numItemsSm:2,className:"flex-1",children:[(0,a.jsx)(f.Z,{numItemsSm:1,className:"gap-y-2 gap-x-7 sm:border-r-[1px] border-[#E4E4E7] dark:border-zinc-600 mb-3 md:mb-0 ",children:null==ed?void 0:ed.map(e=>(0,a.jsxs)("div",{className:(0,g.Z)("flex flex-col text-sm",{"mb-4":e.groupEnd}),children:[(0,a.jsxs)("div",{className:"flex items-center flex-wrap",children:[(0,a.jsxs)("div",{className:"text-black dark:text-slate-50 font-medium mr-[5px]",children:[e.label," : ",e.tip&&(0,a.jsx)(S.C,{children:e.tip})]}),(0,a.jsx)("div",{className:"text-neutral-900 dark:text-slate-50 ml-2",children:e.value})]}),e.detail]},e.key))}),O&&(0,a.jsxs)(f.Z,{numItemsSm:1,className:"gap-x-1 pl-2",children:[(0,a.jsx)("div",{className:"w-full border-t-[1px] border-[#E4E4E7] dark:border-zinc-600 sm:border-0 sm:px-[0px]",children:null==eo?void 0:eo.map(e=>(0,a.jsxs)("div",{className:"flex items-center flex-wrap mt-[8px] sm:mt-0 sm:mb-2",children:[(0,a.jsxs)("div",{className:"text-xs text-black dark:text-slate-50 whitespace-nowrap font-medium mr-[5px]",children:[e.label," :"]}),(0,a.jsx)("div",{className:"text-neutral-900 dark:text-slate-50 text-sm shrink-0 ml-2",children:e.value})]},e.key))}),(0,a.jsxs)("div",{className:"mt-auto h-fit",children:[(0,a.jsx)("div",{className:"w-full flex justify-center items-center",children:(0,a.jsx)("button",{className:"btn-primary flex items-center w-[60%] md:w-fit self-end justify-center gap-4 bg-[#64738B]",disabled:em||eu,onClick:()=>ex(),children:(0,a.jsxs)("div",{className:"flex px-10 py-2 gap-4 items-center whitespace-nowrap",children:[eu&&(0,a.jsx)(A.$,{}),(0,a.jsx)("span",{children:"Claim All"})]})})}),(0,a.jsxs)("div",{className:"relative flex flex-col gap-1 mt-4 md:mt-[28px] justify-center items-center text-[#64748B] text-sm font-medium p-3 rounded-md bg-slate-100 dark:bg-transparent dark:text-slate-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Staked",(0,a.jsx)(y.c,{symbol:C,size:16}),(0,h.dq)(L.stake),(0,a.jsx)("span",{className:"text-primary ml-[5px] cursor-pointer",onClick:()=>Y((0,j.d)(L.stake)),children:"Max"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 pl-8",children:["-",(0,h.dq)(ec),(0,a.jsxs)(S.C,{inFlex:!0,children:["This is the amount of staked ",C," that will be ",c?"spent":"sold"," when price triggers."]})]})]})]})]})]}),O?(0,a.jsxs)("div",{className:"mt-4 md:mt-[30px]",children:[(0,a.jsx)(T.W,{amount:I,setAmount:Y,asset:C,balance:H,checkBalance:!1}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(N.v,{tx:"Stake",disabled:K<=0n||K>H,onTxSuccess:()=>{Y("")},config:{abi:l.aT,address:D,functionName:"stake",args:[K],value:C==n.Ku?K:0n},className:"mt-2 w-[calc(50%-10px)] !mx-0",approves:{[W]:K},spender:D}),(0,a.jsx)(N.v,{className:"mt-2 w-[calc(50%-10px)] !mx-0",tx:"Withdraw",disabled:K<=0n||K>L.stake,onTxSuccess:()=>{Y("")},config:{abi:l.aT,address:D,functionName:"withdraw",args:[K]}})]})]}):(0,a.jsx)("div",{className:"w-full flex items-center justify-center mt-[30px]",children:(0,a.jsx)(w.Z,{})})]})}var R=t(50553),W=t(6868),M=t(16738),C=t(44945),P=t(88501);let ValutArea=e=>{let{asset:s}=e,{vaultsState:t,stableVaultsState:l,vaultsDiscount:i}=(0,o.useContext)(b.g),c=(0,r.p)(),d=n.iK[c],x=d.find(e=>e.assetTokenSymbol==s),m=x.assetTokenSymbol,u=i[x.vault],h=u?"Discount available":"No discount",v=!u,f=t[x.vault],g=l[x.vault],{rate:j}=useDiscountRate(x),[k,N]=(0,o.useMemo)(()=>{if(x.isStable){if(!g)return["50%","50%"];let toPercent=e=>(100*Math.max(0,Math.min(1,(e-1)/1))).toFixed(2)+"%",e=(0,p.pF)(g.AARS,g.AARDecimals),s=(0,p.pF)(g.aar,g.AARDecimals);return[toPercent(s),toPercent(e)]}{if(!f)return["50%","50%"];let e=(0,p.pF)(f.AARU,f.AARDecimals),s=(0,p.pF)(f.aar,f.AARDecimals),t=(0,p.pF)(f.AARS,f.AARDecimals),a=(0,p.pF)(f.AART,f.AARDecimals),l=e/2,toPercent=s=>(100*Math.max(0,Math.min(1,(s-l)/(e-l)))).toFixed(2)+"%",n=toPercent(s);return v?[n,toPercent(t)]:[n,toPercent(a)]}},[x.isStable,f.AARU,f.aar,f.AARS,f.AART,g.AARS,g.aar,v]),T=x.isStable?(0,p.Rr)(g.aar,g.AARDecimals):(0,p.Rr)(f.aar,f.AARDecimals),w=x.isStable?(0,p.Rr)(g.AARS,g.AARDecimals):v?(0,p.Rr)(f.AARS,f.AARDecimals):(0,p.Rr)(f.AART,f.AARDecimals),A="px-2 py-1 bg-primary rounded font-medium text-black",S=(0,a.jsxs)("div",{style:{position:"relative",left:k,transform:"translate(-50%,0)"},className:"flex flex-col items-center w-fit rounded-md",children:[(0,a.jsxs)("div",{className:"text-xs flex flex-col gap-2 justify-center items-center",children:[(0,a.jsx)("span",{className:"text-neutral-400 whitespace-nowrap",children:"Current AAR"}),(0,a.jsx)("span",{className:A,children:T})]}),(0,a.jsx)("svg",{width:"10",height:"8",viewBox:"0 0 10 8",xmlns:"http://www.w3.org/2000/svg",className:"fill-primary",fill:"currentColor",children:(0,a.jsx)("path",{d:"M5 7.5L0.669873 -7.57104e-07L9.33013 0L5 7.5Z"})})]}),R=(0,a.jsxs)("div",{style:{position:"relative",left:N,transform:"translate(-50%,0)"},className:"flex flex-col items-center w-fit rounded-md",children:[(0,a.jsx)("svg",{className:"rotate-180 fill-primary",width:"10",height:"8",viewBox:"0 0 10 8",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M5 7.5L0.669873 -7.57104e-07L9.33013 0L5 7.5Z"})}),(0,a.jsxs)("div",{className:"text-xs flex flex-col gap-2 justify-center items-center",children:[(0,a.jsxs)("span",{className:A,children:["AAR=",w]}),(0,a.jsx)("span",{className:"text-neutral-400 whitespace-nowrap",children:v?"Trigger discount":"Discount end"})]})]});return(0,a.jsxs)("div",{className:"bg-white border border-neutral-200 rounded-3xl flex-1 flex flex-col gap-5 justify-center p-4 w-full md:mb-[30px] dark:bg-transparent dark:border-zinc-600",children:[(0,a.jsx)("div",{className:"h-fit",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(y.c,{symbol:x.assetTokenSymbol,size:32,className:"mr-[10px] md:hidden"}),(0,a.jsx)(y.c,{symbol:x.assetTokenSymbol,size:54,className:"mr-[10px] hidden md:block"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-md md:text-xl font-bold",children:[m," Vault"]}),(0,a.jsxs)("div",{className:"text-xs flex items-center gap-2",children:[!u&&(0,a.jsxs)("div",{className:"flex items-center text-neutral-700 dark:text-slate-50 gap-1",children:[(0,a.jsx)("div",{className:(0,P.m)("w-3 h-3 shrink-0 rounded-full",u?"bg-red-500":"bg-green-500")}),h]}),u&&(0,a.jsxs)("div",{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)("div",{className:(0,P.m)("w-3 h-3 shrink-0 rounded-full bg-red-500")})," Discount Rate: ",j]})]})]})]})}),(0,a.jsxs)("div",{className:"w-full p-4 rounded-lg flex flex-col gap-2",children:[S,(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"rounded-full shrink-0 w-[3px] h-[3px] bg-[#64748B] dark:bg-primary"}),(0,a.jsx)("div",{className:"h-px flex-1 bg-[#64748B] dark:bg-primary after:content-['AAR'] after:inline-block after:text-right after:w-full after:text-xs after:text-[#64748B] dark:after:text-slate-50"}),(0,a.jsx)("div",{className:"rounded-full shrink-0 w-[3px] h-[3px] bg-[#64748B] dark:bg-primary"})]}),R]})]})};function useDiscountRate(e){let{prices:s}=(0,o.useContext)(b.g),t=(0,r.p)(),{data:a}=(0,m.D2)({abi:l.Wn,address:n.O6[t],functionName:e.isStable?"calcUsbToMarginTokensForStableVault":"calcUsbToMarginTokens",args:[e.vault,n.e_[t],(0,p.su)("1")]}),c=(0,p.ok)(a,[1]),d=(0,o.useMemo)(()=>0n==c?0n:(0,p.su)("1")*i.Pq/c,[c]),x=(0,o.useMemo)(()=>{let t=s[e.xTokenAddress];return!t||0n==t||0n==d||d>=t?"0.00%":(0,p.Jh)((t-d)*i.Pq/t,18,2)},[s[e.xTokenAddress],d]);return{rate:x,oneUsbXoutValue:c}}function LVaultsDiscount(e){let{vc:s}=e,{balances:t,prices:c,vaultsDiscount:d}=(0,o.useContext)(b.g),x=(0,r.p)(),m=(0,o.useMemo)(()=>n.iK[x].filter(e=>!e.disableIn),[x]),u=(0,o.useMemo)(()=>m.map(e=>({value:e.vault,label:e.xTokenSymbol})),[m]),[v,f]=(0,o.useState)(u[0]),g=u.find(e=>e===v)?v:u[0],j=d[s.vault],k=(0,p.ok)(c,s.xTokenAddress),y=t[n.O1[x]],[w,A]=(0,o.useState)(""),S=(0,p.su)(w),R=0n!=S&&S<=y&&j,{rate:M,oneUsbXoutValue:P}=useDiscountRate(s),B=P*S/i.Pq;return(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)(W.K,{data:"Due to fluctuations in the prices of collateral, when the AAR decreases, the protocol will offer users the opportunity to purchase xToken at a discount with ".concat(n.TW,". This means that you can engage in arbitrage.")}),(0,a.jsxs)("div",{className:"grid grid-cols-1 mt-5 gap-2 md:grid-cols-10 md:gap-8 md:mt-8",children:[(0,a.jsx)("div",{className:"w-full min-h-full col-span-4 flex flex-col gap-4",children:m.map(e=>(0,a.jsx)(ValutArea,{asset:e.assetTokenSymbol},"vault_area_".concat(e.assetTokenSymbol)))}),(0,a.jsxs)("div",{className:"w-full col-span-6 bg-white border border-neutral-200 p-4 mb-4 md:p-[30px] md:pt-[60px] rounded-3xl md:mb-[30px] dark:bg-transparent dark:border-zinc-600",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 w-full mx-auto",children:[(0,a.jsx)(T.W,{asset:n.TW,amount:w,setAmount:A,balance:y,exchange:(0,h.dq)(S*(0,p.ok)(c,n.O1[x],i.Pq)/i.Pq)}),(0,a.jsxs)("div",{className:"flex items-center justify-center w-full",children:[(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)(C.gPZ,{className:"w-6 h-6 text-neutral-500  border border-neutral-200 rounded-full my-[10px]"}),(0,a.jsx)("div",{className:"flex-1"})]}),(0,a.jsxs)("div",{className:"w-full flex-1 text-right text-neutral-700 dark:text-slate-50/60 text-md whitespace-nowrap",children:["Discount Rate: ",j?M:"--"]}),(0,a.jsx)(T.W,{asset:g.label,amount:(0,h.dq)(B),exchange:(0,h.dq)(k*B/i.Pq),readonly:!0,hasInput:!0,options:u,defaultValue:u[0],onChange:e=>{console.log(e),f(e)}})]}),(0,a.jsx)(N.v,{tx:"Swap",className:"!w-full mt-6",disabled:!R,onTxSuccess:()=>{A("")},config:{abi:l.WW,address:s.vault,functionName:"usbToMarginTokens",args:[S],enabled:R},approves:{[n.O1[x]]:S},spender:s.vault})]})]})]})}var B=t(69708),D=t(58409);function VaultCard(e){let{vc:s}=e,{balances:t,prices:c,vaultsMode:d}=(0,o.useContext)(b.g),x=(0,r.p)(),u=n.O6[x],v=d[s.vault],[f,g]=(0,o.useState)("Mint"),[k,y]=(0,o.useMemo)(()=>{let e="Mint"==f;return 3==v?["Adjustment Model--High AAR",e?"Minting ".concat(n.TW," alone is feasible"):"Redeeming ".concat(s.xTokenSymbol," alone is feasible")]:2==v?["Adjustment Model--Low AAR",e?"Minting ".concat(s.xTokenSymbol," alone is feasible"):"Redeeming ".concat(n.TW," alone is feasible")]:["Stability Model",e?"".concat(n.TW," and ").concat(s.xTokenSymbol," will be minted in fixed ratio"):"Redemption require a fixed ration of ".concat(n.TW," and ").concat(s.xTokenSymbol)]},[v,s,f]),[w,A]=(0,o.useState)(""),[R,W]=(0,o.useState)(""),B=(0,p.ok)(c,s.assetTokenAddress),q=(0,p.ok)(c,s.xTokenAddress),F=t[s.assetTokenAddress],_=t[n.O1[x]],E=t[s.xTokenAddress],[{usbAmount:V,xAmount:U,redeemActive:z,redeemFocus:Z},L]=(0,D.Z)({usbAmount:"",xAmount:"",redeemActive:"",redeemFocus:n.TW}),O=(0,o.useMemo)(()=>({contracts:[{vc:s,abi:l.Wn,address:u,functionName:"calcMintPairs",args:[s.vault,(0,p.su)(w||"0")]},{vc:s,abi:l.Wn,address:u,functionName:"calcMintUsbAboveAARU",args:[s.vault,(0,p.su)(w||"0")]},{vc:s,abi:l.Wn,address:u,functionName:"calcMintMarginTokensBelowAARS",args:[s.vault,(0,p.su)(w||"0")]}],watch:!0,enabled:"Mint"==f}),[s,w,f]),{data:[H,I,Y]=[void 0,void 0,void 0]}=(0,m.uX)(O),K=(0,p.ok)(H,["result",1]),J=(0,p.ok)(H,["result",2]),$=(0,p.ok)(I,["result",1]),X=(0,p.ok)(Y,["result",1]),{data:[G,Q]=[void 0,void 0]}=(0,m.uX)({contracts:[{vc:s,abi:l.Wn,address:u,functionName:"calcPairdMarginTokenAmount",args:[s.vault,(0,p.su)(V||"0")]},{vc:s,abi:l.Wn,address:u,functionName:"calcPairedUsbAmount",args:[s.vault,(0,p.su)(U||"0")]}],query:{enabled:"Redeem"==f}}),{data:[ee,es]=[void 0,void 0]}=(0,m.uX)({contracts:[{vc:s,abi:l.Wn,address:u,functionName:"calcRedeemByMarginTokenAboveAARU",args:[s.vault,(0,p.su)(U||"0")]},{vc:s,abi:l.Wn,address:u,functionName:"calcRedeemByUsbBelowAARS",args:[s.vault,(0,p.su)(V||"0")]}],query:{enabled:"Redeem"==f}}),et=(0,p.ok)(G,["result"]),ea=(0,p.ok)(Q,["result"]),el=(0,p.ok)(ee,["result",1]),en=(0,p.ok)(es,["result",1]),ei=z==s.xTokenSymbol,er=z==n.TW,ec=(0,o.useMemo)(()=>{let e={abi:l.WW,address:s.vault,args:[(0,p.su)(w)],value:s.assetTokenAddress==n.K8?(0,p.su)(w):0n,functionName:"mintPairs"};return R==n.TW&&(e.functionName="mintUsbAboveAARU"),R==s.xTokenSymbol&&(e.functionName="mintMarginTokensBelowAARS"),e},[v,R,w,s]),ed=R==s.xTokenSymbol?0n:R===n.TW?$:K,eo=R==n.TW?0n:R===s.xTokenSymbol?X:J,ex=ei?"0":Z==n.TW?V:(0,j.d)(ea),em=er?"0":Z==s.xTokenSymbol?U:(0,j.d)(et),eu=(0,o.useMemo)(()=>({vc:s,watch:!0,abi:l.Wn,address:u,functionName:"calcPairedRedeemAssetAmount",args:[s.vault,(0,p.su)(em||"0")]}),[s,em]),{data:ep}=(0,m.D2)(eu),eb=ei?el:er?en:(0,p.ok)(ep,[1]),eh=(0,o.useMemo)(()=>{let e={abi:l.WW,address:s.vault,functionName:z==n.TW?"redeemByPairsWithExpectedUsbAmount":"redeemByPairsWithExpectedMarginTokenAmount",args:z==n.TW?[(0,p.su)(ex)]:[(0,p.su)(em)]};return z==s.xTokenSymbol&&(e.functionName="redeemByMarginTokenAboveAARU",e.args=[(0,p.su)(em)]),z==n.TW&&(e.functionName="redeemByUsbBelowAARS",e.args=[(0,p.su)(ex)]),e},[v,z,ex,em,s]);return(0,a.jsxs)("div",{className:(0,P.m)("card relative h-[460px]",v>1?"!bg-violet-500/10":""),children:[(0,a.jsx)("div",{className:"page-sub text-center",children:"Advanced Panel"}),(0,a.jsx)("div",{className:"absolute top-[50px] right-6 flex flex-col items-end z-10",children:(0,a.jsxs)("div",{className:(0,P.m)("text-sm leading-5 flex items-center gap-1.5 rounded-full w-fit"),children:[(0,a.jsx)("div",{className:(0,P.m)("w-3 h-3 rounded-full","Stability Model"==k?"bg-green-500":"bg-red-500")}),(0,a.jsx)(S.C,{node:(0,a.jsx)("div",{className:(0,P.m)("Stability Model"==k?"text-green-500":"text-red-500"),children:k}),children:y})]})}),(0,a.jsx)("div",{className:"relative flex items-center justify-between",children:(0,a.jsx)(M.x,{onTabChange:g,data:[{tab:"Mint",content:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(T.W,{asset:s.assetTokenSymbol,exchange:(0,h.dq)(B*(0,p.su)(w)/i.Pq),balance:F,amount:w,setAmount:A}),(0,a.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 mb-6",children:(0,a.jsx)(C.gPZ,{})}),(0,a.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,a.jsx)(T.W,{amount:(0,h.ZM)(ed),onClick:()=>{W(3==v?n.TW:"")},asset:n.TW,exchange:(0,h.dq)(ed),readonly:!0,disable:v<=1,selected:R===n.TW}),(0,a.jsx)(T.W,{amount:(0,h.ZM)(eo),onClick:()=>{W(2==v?s.xTokenSymbol:"")},asset:s.xTokenSymbol,exchange:(0,h.dq)(q*eo/i.Pq),readonly:!0,disable:v<=1,selected:R===s.xTokenSymbol})]}),(0,a.jsx)(N.v,{tx:"Mint",disabled:s.disableIn||0n==(0,p.su)(w)||(0,p.su)(w)>F,onTxSuccess:()=>{A("")},config:ec,approves:{[s.assetTokenAddress]:(0,p.su)(w)},spender:s.vault})]})},{tab:"Redeem",content:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(T.W,{amount:ex,setAmount:e=>L({usbAmount:e}),balance:_,onClick:()=>{L({redeemActive:2==v?n.TW:"",redeemFocus:n.TW})},asset:n.TW,exchange:(0,h.dq)((0,p.su)(ex)),readonly:z==s.xTokenSymbol,selected:z===n.TW}),(0,a.jsx)(T.W,{amount:em,setAmount:e=>L({xAmount:e}),asset:s.xTokenSymbol,onClick:()=>{L({redeemActive:3==v?s.xTokenSymbol:"",redeemFocus:s.xTokenSymbol})},exchange:(0,h.dq)((0,p.su)(em)*q/i.Pq),balance:E,readonly:z==n.TW,selected:z===s.xTokenSymbol})]}),(0,a.jsxs)("div",{className:"flex w-full items-center mb-6",children:[(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 ",children:(0,a.jsx)(C.gPZ,{})}),(0,a.jsx)("div",{className:"flex-1 text-sm text-slate-400 text-end whitespace-nowrap",children:"Redemption Fee: 0.5%"})]}),(0,a.jsx)("div",{className:"w-full text-end"}),(0,a.jsx)(T.W,{asset:s.assetTokenSymbol,amount:(0,j.d)(eb),exchange:(0,h.dq)(B*eb/i.Pq),readonly:!0}),(0,a.jsx)(N.v,{tx:"Redeem",config:eh,disabled:er&&0n==(0,p.su)(ex)||ei&&0n==(0,p.su)(em)||!er&&!ei&&(0n==(0,p.su)(ex)||0n==(0,p.su)(em))||(0,p.su)(ex)>_||(0,p.su)(em)>E,onTxSuccess:()=>{L({usbAmount:"",xAmount:""})},spender:s.vault})]})}]})})]})}var q=t(73216),F=t(76034),_=t(31040),E=t(55746),V=t(48914),U=t(47518),z=t(50548),Z=t(84570),L=t(42341),O=t(12045);let H={ZUSD:"#FFD3C2",ZUSD_dark:"#FFD3C2",xiBGT:"#AFD3FF",xiBGT_dark:"#AFD3FF",HONEY:"rgba(226, 254, 182, 1)",xHONEY_dark:"#E2FEB6"},I={ZUSD:"#FFA973",xiBGT:"#93B0FF",xHONEY:"rgba(196, 241, 126, 1)"};function PointCard(e){let{symbol:s,iconSymbol:t,tit:l,sub:n,total:i,link:r}=e,c=(0,O.l)(e=>e.theme);return(0,a.jsxs)("div",{style:{},className:"card overflow-hidden !p-0 text-base flex flex-col",children:[(0,a.jsxs)("div",{className:"flex md:flex-wrap items-center p-4 gap-2 dark:text-black",style:{background:H["".concat(s,"_").concat(c)]||H[s]},children:[(0,a.jsx)(y.c,{symbol:t,size:42,className:"shrink-0"}),(0,a.jsx)("div",{className:"font-semibold",children:s}),(0,a.jsxs)("div",{className:"whitespace-nowrap text-center text-sm ml-auto flex flex-col items-center flex-1",children:[(0,a.jsx)("div",{className:"rounded-full px-2 py-[2px] w-fit",style:{background:I[s]},children:l}),(0,a.jsx)("div",{className:"mt-1",children:n})]})]}),(0,a.jsxs)("div",{className:"flex justify-between p-4 whitespace-nowrap text-sm items-center gap-2",children:[(0,a.jsx)("div",{className:"font-medium text-slate-500 dark:text-slate-50/60 self-start text-xs items-center gap-1",children:(0,a.jsx)("span",{className:"font-semibold text-sm",children:i})}),r&&(0,a.jsxs)("a",{className:"underline text-slate-500 dark:text-slate-50 flex items-center gap-1",href:r.url,target:"_blank",children:[r.text," ",(0,a.jsx)(z.Ig3,{})]})]})]})}function PointCards(e){let{vc:s}=e,t=function(e){let s=(0,r.p)(),{prices:t,usbApr:a,vaultsState:l,stableVaultsState:i}=(0,o.useContext)(b.g),c=(0,F.a)(),x=(0,d.i)(),m=(0,U.m)(),u=(0,o.useMemo)(()=>{let a=[],r=e.isStable?i[e.vault].M_USB_USDC:l[e.vault].M_USB_ETH;t[n.K8],t[n.O1[s]],a.push({symbol:n.TW,iconSymbol:"Bera",tit:"APY:".concat((0,p.Jh)(m[n.O1[s]],10)," ~ ").concat((0,p.Jh)(m.USB_END,10)),sub:"~ Interest + Earning",total:"Total Minted: ".concat((0,h.dq)(r,0))});let d=e.isStable&&(0,q.RG)()?"~ ".concat(c[e.vault].toFixed(2),"x Berachain Native Yield"):"~ ".concat(c[e.vault].toFixed(2),"x Leveraged long on ").concat(e.assetTokenSymbol);return a.push({symbol:e.xTokenSymbol,iconSymbol:"Bull",tit:"Leverage the Bull",sub:d,total:"Total Minted: ".concat((0,h.dq)(r,0))}),a},[s,t,c,a,x]);return u}(s),[l,i]=useElementSizeCheck(e=>{let{width:s}=e;return s<970});return 0==t.length?null:(0,a.jsxs)("div",{ref:l,className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[!i&&t.map(e=>(0,a.jsx)(PointCard,{...e},e.symbol)),i&&(0,a.jsx)(L.tq,{spaceBetween:20,pagination:{clickable:!0,renderBullet:function(e,s){return'<div class="'+s+'"></div>'}},className:"-translate-x-[1rem] !px-4 !pb-10 !w-screen",modules:[Z.tl],children:t.map(e=>(0,a.jsx)(L.o5,{children:(0,a.jsx)(PointCard,{...e})},e.symbol))})]})}var Y=t(2987);function StableVaultCard(e){let{vc:s}=e,{balances:t,prices:c,stableVaultsState:d}=(0,o.useContext)(b.g),x=(0,r.p)(),u=n.O6[x],[v,f]=(0,o.useState)("Mint"),[g,k]=(0,o.useState)(""),[y,w]=(0,o.useState)(""),A=d[s.vault],R=A.aar>0&&A.aar<A.AARS,W=c[s.assetTokenAddress],B=c[s.xTokenAddress],q=t[s.assetTokenAddress],F=t[n.O1[x]],_=t[s.xTokenAddress],[{usbAmount:E,xAmount:V,redeemActive:U,redeemFocus:z},Z]=(0,D.Z)({usbAmount:"",xAmount:"",redeemActive:"",redeemFocus:n.TW}),L=(0,o.useMemo)(()=>({contracts:[{vc:s,abi:l.Wn,address:u,functionName:"calcMintPairsFromStableVault",args:[s.vault,(0,p.su)(g||"0")]},{vc:s,abi:l.Wn,address:u,functionName:"calcMintUsbFromStableVault",args:[s.vault,(0,p.su)(g||"0")]},{vc:s,abi:l.Wn,address:u,functionName:"calcMintMarginTokensFromStableVault",args:[s.vault,(0,p.su)(g||"0")]}],watch:!0,enabled:"Mint"==v}),[s,g,v]),{data:[O,H,I]=[void 0,void 0,void 0]}=(0,m.uX)(L),Y=(0,p.ok)(O,["result",1]),K=(0,p.ok)(O,["result",2]),J=(0,p.ok)(H,["result",1]),$=(0,p.ok)(I,["result",1]),{data:[X,G]=[void 0,void 0]}=(0,m.uX)({contracts:[{vc:s,abi:l.Wn,address:u,functionName:"calcPairdMarginTokenAmountForStableVault",args:[s.vault,(0,p.su)(E||"0")]},{vc:s,abi:l.Wn,address:u,functionName:"calcPairedUsbAmountForStableVault",args:[s.vault,(0,p.su)(V||"0")]}],query:{enabled:"Redeem"==v}}),{data:[Q,ee]=[void 0,void 0]}=(0,m.uX)({contracts:[{vc:s,abi:l.Wn,address:u,functionName:"calcRedeemByMarginTokensFromStableVault",args:[s.vault,n.e_[x],(0,p.su)(V||"0")]},{vc:s,abi:l.Wn,address:u,functionName:"calcRedeemByUsbFromStableVault",args:[s.vault,n.e_[x],(0,p.su)(E||"0")]}],query:{enabled:"Redeem"==v}}),es=(0,p.ok)(X,["result"]),et=(0,p.ok)(G,["result"]),ea=(0,p.ok)(Q,["result",1]),el=(0,p.ok)(ee,["result",1]),en=U==s.xTokenSymbol,ei=U==n.TW,er=(0,o.useMemo)(()=>{let e={abi:l.S4,address:s.vault,functionName:"mintPairs",args:[(0,p.su)(g)],value:s.assetTokenAddress==n.K8?(0,p.su)(g):0n};return y==n.TW&&(e.functionName="mintUsb"),y==s.xTokenSymbol&&(e.functionName="mintMarginTokens"),e},[y,g,s]),ec=y==s.xTokenSymbol?0n:y===n.TW?J:Y,ed=y==n.TW?0n:y===s.xTokenSymbol?$:K,eo=en?"0":z==n.TW?E:(0,j.d)(et),ex=ei?"0":z==s.xTokenSymbol?V:(0,j.d)(es),em=(0,o.useMemo)(()=>({vc:s,watch:!0,abi:l.Wn,address:u,functionName:"calcRedeemByPairsAssetAmountForStableVault",args:[s.vault,n.e_[x],(0,p.su)(ex||"0")]}),[s,ex]),{data:eu}=(0,m.D2)(em),ep=en?ea:ei?el:(0,p.ok)(eu,[1]),eb=(0,o.useMemo)(()=>{let e={abi:l.S4,address:s.vault,functionName:U==n.TW?"redeemByPairsWithExpectedUsbAmount":"redeemByPairsWithExpectedMarginTokenAmount",args:U==n.TW?[(0,p.su)(eo)]:[(0,p.su)(ex)]};return U==s.xTokenSymbol&&(e.functionName="redeemByMarginTokens",e.args=[(0,p.su)(ex)]),U==n.TW&&(e.functionName="redeemByUsb",e.args=[(0,p.su)(eo)]),e},[U,eo,ex,s]);return(0,a.jsxs)("div",{className:(0,P.m)("card relative h-[460px]"),children:[(0,a.jsx)("div",{className:"page-sub text-center",children:"Advanced Panel"}),(0,a.jsx)("div",{className:"absolute top-[50px] right-6 flex flex-col items-end z-10",children:(0,a.jsx)(S.C,{node:(0,a.jsxs)("div",{className:(0,P.m)("text-sm leading-5 flex items-center gap-1.5 rounded-full w-fit"),children:[(0,a.jsx)("div",{className:(0,P.m)("w-3 h-3 rounded-full",R?"bg-red-500":"bg-green-500")}),(0,a.jsx)("div",{className:(0,P.m)(R?"text-red-500":"text-green-500"),children:R?"Adjustment Model":"Stability Model"})]}),children:R?"Mint"==v?"Minting ".concat(n.TW," alone is not feasible"):"Redeeming USDBx alone is not feasible":""})}),(0,a.jsx)("div",{className:"relative flex items-center justify-between",children:(0,a.jsx)(M.x,{onTabChange:f,data:[{tab:"Mint",content:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(T.W,{asset:s.assetTokenSymbol,exchange:(0,h.dq)(W*(0,p.su)(g)/i.Pq),balance:q,amount:g,setAmount:k}),(0,a.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 mb-6",children:(0,a.jsx)(C.gPZ,{})}),(0,a.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,a.jsx)(T.W,{amount:(0,h.ZM)(ec),onClick:()=>{w(R?"":y==n.TW?"":n.TW)},asset:n.TW,exchange:(0,h.dq)(ec),readonly:!0,selected:y===n.TW}),(0,a.jsx)(T.W,{amount:(0,h.ZM)(ed),onClick:()=>{w(y==s.xTokenSymbol?"":s.xTokenSymbol)},asset:s.xTokenSymbol,exchange:(0,h.dq)(B*ed/i.Pq),readonly:!0,selected:y===s.xTokenSymbol})]}),(0,a.jsx)(N.v,{tx:"Mint",disabled:s.disableIn||0n==(0,p.su)(g)||(0,p.su)(g)>q,onTxSuccess:()=>{k("")},config:er,approves:{[s.assetTokenAddress]:(0,p.su)(g)},spender:s.vault})]})},{tab:"Redeem",content:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(T.W,{amount:eo,setAmount:e=>Z({usbAmount:e}),balance:F,onClick:()=>{Z({redeemActive:U==n.TW?"":n.TW,redeemFocus:n.TW})},asset:n.TW,exchange:(0,h.dq)((0,p.su)(eo)),readonly:U==s.xTokenSymbol,selected:U===n.TW}),(0,a.jsx)(T.W,{amount:ex,setAmount:e=>Z({xAmount:e}),asset:s.xTokenSymbol,onClick:()=>{Z({redeemActive:R?"":U==s.xTokenSymbol?"":s.xTokenSymbol,redeemFocus:s.xTokenSymbol})},exchange:(0,h.dq)((0,p.su)(ex)*B/i.Pq),balance:_,readonly:U==n.TW,selected:U===s.xTokenSymbol})]}),(0,a.jsxs)("div",{className:"flex w-full items-center mb-6",children:[(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 ",children:(0,a.jsx)(C.gPZ,{})}),(0,a.jsx)("div",{className:"flex-1 text-sm text-slate-400 text-end whitespace-nowrap",children:"Redemption Fee: 0.5%"})]}),(0,a.jsx)("div",{className:"w-full text-end"}),(0,a.jsx)(T.W,{asset:s.assetTokenSymbol,amount:(0,j.d)(ep),exchange:(0,h.dq)(W*ep/i.Pq),readonly:!0}),(0,a.jsx)(N.v,{tx:"Redeem",config:eb,disabled:ei&&0n==(0,p.su)(eo)||en&&0n==(0,p.su)(ex)||!ei&&!en&&(0n==(0,p.su)(eo)||0n==(0,p.su)(ex))||(0,p.su)(eo)>F||(0,p.su)(ex)>_,onTxSuccess:()=>{Z({usbAmount:"",xAmount:""})},spender:s.vault})]})}]})})]})}let K=(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,a.jsx)("circle",{cx:"7",cy:"7",r:"5",fill:"white",stroke:"#00DE9C",strokeWidth:"4"})}),J=(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,a.jsx)("circle",{cx:"7",cy:"7",r:"5",fill:"white",stroke:"#FF3D3D",strokeWidth:"4"})}),$=(0,a.jsx)("div",{className:"mr-[10px]",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"5",height:"5",viewBox:"0 0 5 5",fill:"none",children:(0,a.jsx)("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"#64748B"})})});function VaultSimple(e){let{vc:s}=e,{balances:t,prices:c,vaultsMode:d,stableVaultsState:x}=(0,o.useContext)(b.g),u=(0,p.ok)(c,s.assetTokenAddress),v=d[s.vault],f=s.assetTokenSymbol,[g,j]=(0,o.useState)(""),k=(0,p.su)(g),w=s.xTokenSymbol,A=t[s.assetTokenAddress],R=x[s.vault],[W,C]=(0,o.useState)(""),P=(0,r.p)(),{data:B}=(0,m.D2)({abi:l.Wn,address:n.O6[P],functionName:s.isStable?"calcMintPairsFromStableVault":"calcMintPairs",args:[s.vault,(0,p.su)("1")]}),{data:D}=(0,m.D2)({abi:l.Wn,address:n.O6[P],functionName:"calcMintMarginTokensFromStableVault",args:[s.vault,(0,p.su)("1")],query:{enabled:s.isStable}}),q=s.isStable&&0n==R.M_USDCx?0n:(0,p.ok)(B,[1]),F=s.isStable&&0n==R.M_USDCx?(0,p.ok)(D,[1]):(0,p.ok)(B,[2]),_=t[n.O1[P]],V=t[s.xTokenAddress],U=(0,p.NA)([F>0n?V*i.Pq/F:0n,q>0n?_*i.Pq/q:0n]),z=(0,p.su)(W),Z=(0,o.useMemo)(()=>{let e={abi:s.isStable?l.S4:l.WW,address:s.vault,functionName:"redeemByPairsWithExpectedMarginTokenAmount",args:[z*F/i.Pq]};return e},[v,z,F,s]);return(0,a.jsxs)("div",{className:"w-full relative flex items-center justify-between",children:[(0,a.jsx)(Y.o,{trigger:(0,a.jsxs)("div",{className:"absolute w-fit h-[21px] right-2 top-3 flex items-center gap-1 cursor-pointer",children:[(0,a.jsx)(E.b9P,{className:"text-primary text-xl"}),(0,a.jsx)(S.C,{inFlex:!0,className:" text-slate-500",children:s.isStable?"The advanced panel allows for the individual Minting or Redeeming of ".concat(n.TW," and ").concat(s.xTokenSymbol,"."):"More flexible operations can be conducted using the advanced panel in adjustment mode."})]}),children:s.isStable?(0,a.jsx)(StableVaultCard,{vc:s}):(0,a.jsx)(VaultCard,{vc:s})}),(0,a.jsx)(M.x,{data:[{tab:"Deposit",content:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(T.W,{asset:f,exchange:(0,h.dq)(u*k/i.Pq),balance:A,amount:g,setAmount:j}),(0,a.jsxs)("div",{className:"text-xs text-[#64748B] dark:text-slate-50/60 leading-[12px] flex items-center pl-[5px] mt-[6px]",children:["1 ",(0,a.jsx)(y.c,{className:"mx-1",symbol:f,size:12}),f," = ",(0,h.dq)(F)," ",(0,a.jsx)(y.c,{className:"mx-1",symbol:w,size:12})," ",f,"x +",(0,h.dq)(q)," ",(0,a.jsx)(y.c,{className:"mx-1",symbol:n.TW,size:12})," ",n.TW]}),(0,a.jsx)(N.v,{tx:"Deposit",className:(0,p.cn)(s.isStable?"":"md:mt-11","mx-auto mt-6"),disabled:s.disableIn||k<=0n||k>A,onTxSuccess:()=>{j("")},config:{abi:l.S4,address:s.vault,args:[k],value:s.assetTokenAddress==n.K8?k:0n,functionName:s.isStable&&0n==R.M_USDCx?"mintMarginTokens":"mintPairs"},approves:{[s.assetTokenAddress]:k},spender:s.vault})]})},{tab:"Withdraw",content:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsx)(T.W,{amount:W,setAmount:C,balance:U,balanceTit:"Redeemable amount",asset:f,exchange:(0,h.dq)(u*z/i.Pq)})}),(0,a.jsxs)("div",{className:"text-xs text-[#64748B] dark:text-slate-50/60 leading-[12px] md:flex md:items-center md:justify-between pl-[5px] mt-[6px]",children:[(0,a.jsxs)("span",{className:"flex",children:[w," Balanceï¼š",(0,a.jsx)(y.c,{className:"mx-1",symbol:w,size:12})," ",(0,h.dq)(V)]}),(0,a.jsxs)("span",{className:(0,p.cn)("flex relative"),children:[n.TW," Balance: ",(0,a.jsx)(y.c,{className:"mx-1",symbol:n.TW,size:12})," ",(0,h.dq)(_)]})]}),!s.isStable&&(0,a.jsxs)("div",{className:"mt-2 text-center text-xs text-slate-500 dark:text-slate-50/70 relative md:text-right ",children:["Maintaining ",n.TW," balance greater than your Margin",(0,a.jsx)("br",{className:"hidden md:block"}),"Loan allows you to redeem your total Open Position"]}),(0,a.jsx)(N.v,{tx:"Withdraw",className:(0,p.cn)({"md:mt-1":!s.isStable},"mx-auto mt-6"),config:Z,disabled:0n==q||0n==F||z<=0n||z>U,onTxSuccess:()=>{console.info("Redeem onSuccess:"),C("")},spender:s.vault})]})}]})]})}function LVaultSimpleWrap(e){let{vc:s}=e,t=(0,r.p)(),{balances:l,prices:i,vaultsState:c,stableVaultsState:d}=(0,o.useContext)(b.g),x=(0,F.z)(s),{address:m}=(0,k.m)(),u=c[s.vault],v=d[s.vault],f=s.isStable?v.M_USDC:u.M_ETH,g=s.isStable?v.M_USDCx:u.M_ETHx,j=s.isStable?v.M_USB_USDC:u.M_USB_ETH,N=g>0n?l[s.xTokenAddress]*f/g:0n,T=g>0n?-(l[s.xTokenAddress]*j)/g:0n,{data:A}=(0,V.p)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(PointCards,{vc:s}),(0,a.jsxs)("div",{className:"w-full flex flex-col md:flex-row gap-5",children:[(0,a.jsxs)("div",{className:"min-h-[108px] flex flex-col justify-center shrink-0",children:[m&&!s.isStable&&(0,a.jsxs)("div",{className:"card h-[84px] w-full p-[20px] shrink-0 text-[#64748B] dark:text-slate-50/60 text-xs font-medium leading-[12px] rounded-2xl mb-5 whitespace-nowrap",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-[16px] gap-5",children:[(0,a.jsx)("div",{children:"Open Position"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(y.c,{className:"mr-1",symbol:s.assetTokenSymbol,size:12}),(0,h.dq)(N)]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-[16px] gap-5",children:[(0,a.jsxs)("div",{children:["Margin Loan",(0,a.jsxs)(S.C,{children:["Repay your margin loan to redeem ",s.assetTokenSymbol," corresponding to your open position."]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(y.c,{className:"mr-1",symbol:n.TW,size:12}),(0,h.dq)(T)]})]})]}),(0,a.jsxs)("div",{className:"card text-[#64748B] w-full flex-1 dark:text-slate-50/60 text-xs font-medium leading-[12px] px-[30px] py-[23px] rounded-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center mb-[16px] whitespace-nowrap",children:[$,x.toFixed(2),"x"," ",(0,q.RG)()&&s.isStable?"Blast Native Yield":"Leveraged long on ".concat(s.assetTokenSymbol)]}),(0,a.jsxs)("div",{className:"flex items-center mb-[16px] cursor-pointer whitespace-nowrap",onClick:()=>{s&&(null==A||A.watchAsset({type:"ERC20",options:{address:s.xTokenAddress,symbol:s.xTokenSymbol,decimals:18}}).catch(p.S3))},children:[$,"Add ",s.xTokenSymbol," to wallet"]}),(0,a.jsxs)("div",{className:"flex items-center mb-[16px] cursor-pointer whitespace-nowrap",onClick:()=>{null==A||A.watchAsset({type:"ERC20",options:{address:n.O1[t],symbol:n.TW,decimals:18}}).catch(p.S3)},children:[$,"Add ",n.TW," to wallet"]}),(0,a.jsxs)("div",{className:"flex items-center cursor-pointer whitespace-nowrap",onClick:()=>{var e,a;let l=q.Af.find(e=>e.id==t);l&&s&&open("".concat(null===(a=l.blockExplorers)||void 0===a?void 0:null===(e=a.default)||void 0===e?void 0:e.url,"/address/").concat(s.vault),"_blank")},children:[$,"View contract"]})]})]}),(0,a.jsx)("div",{className:"card w-full",children:m&&s&&42==s.vault.length?(0,a.jsx)(VaultSimple,{vc:s}):s&&42==s.vault.length?(0,a.jsx)(w.Z,{}):(0,a.jsx)(_.Z,{className:"rounded",children:"Comming soon"})})]})]})}function VaultCollapse(e){let{vc:s}=e,t=(0,B.useRouter)(),l=(0,r.p)(),{prices:c,vaultsMode:d,vaultsState:x,stableVaultsState:m}=(0,o.useContext)(b.g),u=(0,F.z)(s),v=(0,p.ok)(c,s.assetTokenAddress),f=x[s.vault],g=m[s.vault],j=s.isStable?g.M_USDC:f.M_ETH,k=s.isStable?g.M_USDCx:f.M_ETHx,N=s.isStable?g.M_USB_USDC:f.M_USB_ETH,T=(0,h.dq)(j),w=(0,h.dq)(k),A=(0,U.m)();(0,h.dq)(j*v/i.Pq);let R=(0,h.dq)(N),W=s.isStable?(0,p.Rr)(g.aar,g.AARDecimals):(0,p.Rr)(f.aar,f.AARDecimals),M=d[s.vault],C=s.xTokenSymbol,P="py-5 flex flex-col items-center gap-2 relative dark:border-border border-solid even:border-l even:border-b odd:border-b last:!border-b-0";return(0,a.jsxs)("div",{className:(0,p.cn)("card cursor-pointer !p-0 grid grid-cols-2 overflow-hidden",{"order-1":!s.assetTokenSymbol.includes("ETH")}),onClick:()=>t.push("/l-vaults?vault=".concat(s.vault)),children:[(0,a.jsxs)("div",{className:(0,p.cn)(P,"bg-black/10 dark:bg-white/10"),children:[(0,a.jsx)("div",{className:" text-sm font-semibold whitespace-nowrap",children:s.assetTokenSymbol}),(0,a.jsxs)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-medium",children:["$",(0,h.dq)(c[s.assetTokenAddress])]})]}),(0,a.jsxs)("div",{className:(0,p.cn)(P,"bg-black/10 dark:bg-white/10"),children:[(0,a.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:"Total Deposit"}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("span",{className:" text-[14px] leading-[14px] font-medium ml-[5px]",children:T})})]}),(0,a.jsxs)("div",{className:P,children:[(0,a.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:"Status"}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("span",{className:" text-[14px] leading-[14px] font-medium",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"mr-[10px]",children:M<=1?K:J}),M<=1?"Stability":"Adjustment"]})})})]}),(0,a.jsxs)("div",{className:P,children:[(0,a.jsxs)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:[C,(0,a.jsx)(S.C,{children:"This is a margin token, representing open position in the vault."})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("span",{className:" text-[14px] leading-[14px] font-medium ml-[5px]",children:w})})]}),(0,a.jsxs)("div",{className:P,children:[(0,a.jsxs)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:["AAR",(0,a.jsx)(S.C,{children:"Asset Adequacy Ratio"})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("span",{className:" text-[14px] leading-[14px] font-medium",children:W})})]}),(0,a.jsxs)("div",{className:P,children:[(0,a.jsxs)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:[n.TW," Debt"]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(y.c,{className:"mx-1",symbol:n.TW,size:14}),(0,a.jsx)("span",{className:" text-[14px] leading-[14px] font-medium ml-[5px]",children:R})]})]}),(0,a.jsxs)("div",{className:(0,p.cn)(P,"col-span-2"),children:[(0,a.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:"Choose your side"}),(0,a.jsxs)("div",{className:"flex justify-between items-center gap-8",children:[(0,a.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,a.jsx)(y.c,{symbol:"Bera",size:36}),(0,a.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,a.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:"Bear Interest"}),(0,a.jsx)("span",{className:" text-[14px] leading-[14px] font-medium ml-[5px]",children:(0,p.Jh)(A[n.O1[l]],10)})]})]}),(0,a.jsxs)("div",{className:"flex flex-row-reverse gap-4 items-center",children:[(0,a.jsx)(y.c,{symbol:"Bull",size:36}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,a.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:"Leverage Bull"}),(0,a.jsx)("span",{className:" text-[14px] leading-[14px] font-medium ml-[5px]",children:"".concat(u.toFixed(2),"x")})]})]})]})]})]})}var X=t(44939);let G=["deposit","yield","discount"];function Vaults(){let e=(0,r.p)(),s=n.iK[e],t=(0,B.useSearchParams)(),l=t.get("vault"),i=t.get("tab");G.includes(i);let c=s.find(e=>e.vault==l);return(0,a.jsx)(X.E,{children:(0,a.jsxs)("div",{className:"w-full max-w-[1160px] px-4 mx-auto md:pb-8",children:[(0,a.jsx)(R.a,{}),c?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(M.x,{listClassName:"flex-wrap p-0 mb-5 md:gap-14",triggerClassName:'text-lg sm:text-xl md:text-2xl py-0 data-[state="active"]:border-b border-b-black dark:border-b-white leading-[0.8] rounded-none whitespace-nowrap',contentClassName:"gap-5",data:[{tab:"Deposit",content:(0,a.jsx)(LVaultSimpleWrap,{vc:c})},{tab:"Price Trigger Yield",content:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,a.jsx)(PoolCard,{vc:c,type:"buy"}),(0,a.jsx)(PoolCard,{vc:c,type:"sell"})]})},{tab:"Discount Offer",content:(0,a.jsx)(LVaultsDiscount,{vc:c})}]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"page-title",children:"L-Vaults"}),(0,a.jsx)(W.K,{data:"Depositing assets into the Vaults"}),(0,a.jsx)(f.Z,{numItems:1,numItemsMd:2,numItemsLg:3,className:"gap-3 mt-4",children:s.map((e,s)=>(0,a.jsx)(VaultCollapse,{vc:e},"group_vault_item_".concat(s)))})]})]})})}},99548:function(e,s,t){"use strict";t.d(s,{v:function(){return ApproveAndTx}});var a=t(31113),l=t(19757),n=t(26361),i=t(64103),r=t(47259),c=t(58714),d=t(41440),o=t(41774),x=t(48914);let m={},useApproves=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10000000000n*10n**18n,{address:a,chainId:u}=(0,d.m)(),p=(0,o.t)(),{data:b}=(0,x.p)(),[h,v]=(0,i.useState)(!1),f=(0,i.useMemo)(()=>Object.keys(e).filter(e=>e!==l.K8),[e]),[g,j]=(0,i.useState)(s&&m[s]||{}),updateAllownce=(e,t)=>{s&&(m[s]={...m[s]||{},[e]:t},j(s=>({...s,[e]:t})))},k=(0,o.t)();(0,i.useEffect)(()=>{a&&s&&p&&u&&f.forEach(e=>{p.readContract({abi:c.Wo,address:e,functionName:"allowance",args:[a,s]}).then(s=>updateAllownce(e,s||0n)).catch(console.error)})},[f,u,a]);let[N,T]=(0,i.useState)(!1),y=(0,i.useMemo)(()=>f.filter(s=>(0,n.ok)(e,s)>0n&&(0,n.ok)(e,s)>(0,n.ok)(g,s)),[e,f,g]),approve=async()=>{if(0!=y.length&&s)try{T(!0),v(!1);for(let a=0;a<y.length;a++){let l=y[a],n=!1===t?e[l]:t,i=await (null==b?void 0:b.writeContract({abi:c.Wo,address:l,functionName:"approve",args:[s,n]}));i&&await (null==k?void 0:k.waitForTransactionReceipt({hash:i})),updateAllownce(l,n)}r.A.success("Approve success"),T(!1),v(!0)}catch(e){r.A.error((0,n.az)(e)),T(!1),v(!1)}};return{approve,loading:N,shouldApprove:y.length>0,isSuccess:h}};var u=t(78354),p=t(88501),b=t(36762);function ApproveAndTx(e){let{className:s,tx:t,approves:l,spender:n,requestAmount:r,config:c,toast:d=!0,disabled:o,onTxSuccess:x,onApproveSuccess:m}=e,{write:h,isDisabled:v,isLoading:f}=(0,u.R)(c,{onSuccess:()=>x&&x(),autoToast:d}),g=o||v||f||!1===c.enabled,{approve:j,shouldApprove:k,loading:N,isSuccess:T}=useApproves(l||{},n,r),y=(0,i.useRef)();return(y.current=m,(0,i.useEffect)(()=>{y.current&&T&&y.current()},[T]),k)?(0,a.jsxs)("button",{className:(0,p.m)("btn-primary flex items-center justify-center gap-4",s),onClick:j,disabled:o||!j||N,children:[N&&(0,a.jsx)(b.$,{}),"Approve"]}):(0,a.jsxs)("button",{className:(0,p.m)("btn-primary flex items-center justify-center gap-4",s),onClick:()=>h(),disabled:g,children:[f&&(0,a.jsx)(b.$,{}),t]})}},91214:function(e,s,t){"use strict";t.d(s,{W:function(){return AssetInput}});var a=t(31113),l=t(26361),n=t(84944),i=t(33501),r=t(64103),c=t(45631),d=t(35057),o=t(33621),x=t(12045);function AssetInput(e){let{asset:s="ETH",checkBalance:t=!0,balance:m,balanceTit:u="Balance",balanceDecimals:p=18,exchange:b,readonly:h,selected:v,onClick:f,amount:g,setAmount:j,price:k,disable:N,hasInput:T=!1,options:y,onChange:w=()=>{},defaultValue:A,balanceClassName:S="",disableNegative:R}=e,W=(0,r.useRef)(null),M=t&&void 0!==m&&(0,l.su)("number"==typeof g?g+"":g||"")>("bigint"==typeof m?m:0n),C=(0,x.l)(e=>"dark"==e.theme);return(0,a.jsxs)("div",{className:"relative w-full",onClick:()=>{f&&!N&&f()},children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"absolute flex items-center h-fit gap-2 left-[48px] bottom-1 w-full  max-w-[calc(100%-56px)]",style:{pointerEvents:"none"},children:[k&&(0,a.jsx)("div",{className:"text-neutral-500 dark:text-slate-50/70 text-xs max-w-full overflow-hidden",children:k}),b&&(0,a.jsxs)("div",{className:"text-slate-500 dark:text-slate-50/70 text-xs max-w-full overflow-hidden",children:["~$",b]})]}),(0,a.jsxs)("div",{className:"absolute flex items-center gap-2 w-fit top-1/2 left-4 -translate-y-1/2",children:[(0,a.jsx)(o.c,{size:24,symbol:s}),(0,a.jsx)("div",{className:(0,i.Z)("relative",k||b?"-top-[6px]":""),children:T?(0,a.jsx)(c.ZP,{options:y,onChange:w,defaultValue:A,styles:{control:(e,s)=>({...e,border:"0px",outline:"none",boxShadow:"none",borderRadius:"0px",minHeight:"24px",padding:"0px",background:"transparent"}),singleValue:(e,s)=>({...e,color:C?"#fff":"#000"}),valueContainer:(e,s)=>({...e,padding:"0px"}),menu:(e,s)=>({...e,margin:0,background:C?"#444":"#fff"}),option:(e,s)=>({...e,color:C?"#fff":"#000",background:C?"transparent":"#fff"}),menuPortal:(e,s)=>({...e,margin:0})}}):(0,a.jsx)("div",{children:s})})]}),(0,a.jsx)("input",{value:g,onChange:e=>{let s=(e.target.value||"").replaceAll("-","").replaceAll("+","");j(s)},ref:W,type:"number",disabled:N,className:(0,i.Z)(h?"bg-slate-50 cursor-not-allowed dark:bg-slate-800":"bg-white dark:bg-transparent",{"border-green-700 border-2":v,"border-red-400 !border-2 focus:border-red-400":M,"border-slate-400  focus:border-primary":!M&&!v},"w-full h-14 text-right pr-4 pl-[8rem] font-bold text-2xl border-[#4A5546] border focus:border-2 text-slate-700 rounded-lg outline-none dark:text-slate-50"),placeholder:"0.000",maxLength:36,pattern:"[0-9.]{36}",step:.01,title:"",readOnly:h})]}),void 0!=m&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-1 px-1 text-slate-400 dark:text-slate-50/70 text-sm",children:[(0,a.jsxs)("div",{className:S,children:[(0,a.jsxs)("span",{children:[u,": ",(0,n.Rp)(m,3,p)]}),(0,a.jsx)("button",{className:"text-primary ml-2",onClick:()=>{let e=(0,d.b)(m,p);j(e),f&&!N&&f()},children:"Max"})]}),(0,a.jsx)("div",{className:"text-sm text-red-400",children:M?"Insufficient account balance":""})]})]})}},35664:function(e,s,t){"use strict";t.d(s,{Z:function(){return ConnectBtn}});var a=t(31113),l=t(3367),n=t(44726),i=t(41440);function ConnectBtn(){let e=(0,n.Z)(1024),{isConnected:s}=(0,i.m)(),t=(0,l.We)();return s?(0,a.jsx)(l.NL,{chainStatus:e.width>600?"full":"icon",showBalance:!1}):(0,a.jsx)("button",{className:"btn-primary mt-0 w-fit",onClick:()=>{var e;return null===(e=t.openConnectModal)||void 0===e?void 0:e.call(t)},children:(0,a.jsx)("span",{className:"font-medium text-sm px-5",children:"Connect Wallet"})})}},6868:function(e,s,t){"use strict";t.d(s,{K:function(){return Noti}});var a=t(31113);t(64103);var l=t(63114);function Noti(e){let{data:s}=e;return(0,a.jsxs)("div",{className:"w-full mt-2 mb-3 md:mt-4 md:mb-6 flex text-[24px] md:text-[14px] text-[#64748B] dark:text-slate-50/60 font-medium leading-[24px] md:leading-[14px]",children:[(0,a.jsx)("div",{className:"",children:(0,a.jsx)(l.pMA,{size:20})}),(0,a.jsx)("div",{className:"text-sm ml-1 ",children:s})]})}},44939:function(e,s,t){"use strict";t.d(s,{E:function(){return PageWrap}});var a=t(31113);t(64103);var l=t(26361),n=t(69708),i=t(12045);function PageWrap(e){let{children:s,className:t}=e,r=(0,i.l)(e=>e.theme),c=(0,n.usePathname)();return(0,a.jsx)("div",{className:(0,l.cn)("min-h-[calc(100vh+1px)] h-auto pt-[90px] pb-6",t),style:{backgroundSize:"contain",background:"light"==r?"#eeeeee":"/"==c?"url(bg_home.svg) center bottom no-repeat,linear-gradient(105.67deg, #02050E 14.41%, #1D2F23 98.84%)":"linear-gradient(105.67deg, #02050E 14.41%, #1D2F23 98.84%)"},children:s})}},16738:function(e,s,t){"use strict";t.d(s,{x:function(){return SimpleTabs}});var a=t(31113),l=t(26361),n=t(24626),i=t(64103);function SimpleTabs(e){let{className:s,listClassName:t,triggerClassName:r,contentClassName:c,data:d,onTabChange:o}=e,[x,m]=(0,i.useState)(d[0].tab);return(0,a.jsxs)(n.fC,{value:x,className:(0,l.cn)("w-full",s),onValueChange:e=>{m(e),null==o||o(e)},children:[(0,a.jsx)(n.aV,{className:(0,l.cn)("p-1 w-fit rounded-md gap-5 flex bg-transparent",t),children:d.map(e=>(0,a.jsx)(n.xz,{className:(0,l.cn)('rounded-[3px] text-sm py-1.5 px-0 text-black/50 font-medium data-[state="active"]:bg-black data-[state="active"]:text-slate-900 !bg-transparent dark:text-white/50 dark:data-[state="active"]:text-white',r),value:e.tab,children:e.tab},e.tab))}),d.map(e=>(0,a.jsx)(n.VY,{value:e.tab,className:(0,l.cn)("flex flex-col gap-6 outline-none",c),children:e.content},e.tab))]})}},6371:function(e,s,t){"use strict";t.d(s,{C:function(){return Tip}});var a=t(31113),l=t(26361),n=t(52653),i=t(55966);function Tip(e){let{children:s,node:t,className:r,inFlex:c}=e,d=document.getElementById("tooltip-root");return s?(0,a.jsx)(n.zt,{children:(0,a.jsxs)(n.fC,{children:[(0,a.jsx)(n.xz,{asChild:!0,onClickCapture:e=>{e.preventDefault(),e.stopPropagation()},children:t?(0,a.jsx)("div",{className:(0,l.cn)("inline-block cursor-default",r),style:{verticalAlign:"text-bottom"},children:t}):(0,a.jsx)("div",{className:(0,l.cn)(c?"flex":"translate-y-[-6%] inline-block"," px-[3px] cursor-default relative",r),children:(0,a.jsx)(i.apP,{className:"inline-block stroke-slate-500"})})}),(0,a.jsx)(n.h_,{container:d,children:(0,a.jsxs)(n.VY,{className:"max-w-xs text-sm text-white bg-slate-900 shadow-lg dark:bg-[#333333] rounded-md p-4",children:[s,(0,a.jsx)(n.Eh,{})]})})]})}):t}},47518:function(e,s,t){"use strict";t.d(s,{m:function(){return useTokenApys}});var a=t(26361),l=t(88439),n=t(45438),i=t(76034),r=t(64103),c=t(88239),d=t(59175),o=t(19757),x=t(33737);function useTokenApys(){let e=(0,l.b)(()=>(0,a.Yb)({},0n)),s=(0,d.p)(),{prices:t,usbApr:m,stableVaultsState:u}=(0,r.useContext)(c.g),p=(0,i.a)(),b=(0,n.i)();return(0,r.useMemo)(()=>{let t=o.iK[s],l=(0,a.ok)(b[t[0].ptyPoolBelowAddress],"staking");e[o.O1[s]]=m.apr,e.USB_END=m.apr+l;let n=(0,x.v)("0.1",10);return t.forEach(s=>{if(s.assetTokenAddress!=o.K8){let t=p[s.vault]>1n?(0,x.v)("".concat((p[s.vault]-1).toFixed(2)),10):0n,a=(0,x.v)("1",10);e[s.xTokenAddress]=(t*(n-u[s.vault].Y*u[s.vault].aar/a)+n*a)/a}}),null},[s,t,p,m,b,u]),e}},76034:function(e,s,t){"use strict";t.d(s,{a:function(){return useValutsLeverageRatio},z:function(){return useVaultLeverageRatio}});var a=t(19757),l=t(26361),n=t(88239),i=t(64103),r=t(59175),c=t(88439);function useVaultLeverageRatio(e){let{vaultsState:s,stableVaultsState:t}=(0,i.useContext)(n.g),a=s[(null==e?void 0:e.vault)||"null"],r=t[(null==e?void 0:e.vault)||"null"],c=(null==e?void 0:e.isStable)?(0,l.pF)(r.aar,r.AARDecimals):(0,l.pF)(a.aar,a.AARDecimals);return Math.max(0,1+1/(c-1))}function useValutsLeverageRatio(){let{vaultsState:e,stableVaultsState:s}=(0,i.useContext)(n.g),t=(0,r.p)(),d=a.iK[t],o=(0,c.b)(()=>new Proxy({},{get:function(e,s){return s in e&&null!==e[s]&&void 0!==e[s]?e[s]:0}}));return d.forEach(t=>{let a=e[(null==t?void 0:t.vault)||"null"],n=s[(null==t?void 0:t.vault)||"null"],i=(null==t?void 0:t.isStable)?(0,l.pF)(n.aar,n.AARDecimals):(0,l.pF)(a.aar,a.AARDecimals);o[t.vault]=Math.max(0,1+1/(i-1))}),o}},78354:function(e,s,t){"use strict";t.d(s,{R:function(){return useWrapContractWrite}});var a=t(26361),l=t(64103),n=t(47259),i=t(41774),r=t(48914),c=t(15506);function useWrapContractWrite(e,s){let{autoToast:t=!0,onSuccess:d}=s||{},[o,x]=(0,l.useState)(!1),[m,u]=(0,l.useState)(!1),p=(0,i.t)(),{data:b}=(0,r.p)(),h=!p||!b||!b.account||o||!e,v=(0,c.hp)(),write=async()=>{if(!h){x(!0),u(!1);try{let s="function"==typeof e?await e():e,{request:a}=await p.simulateContract({account:b.account,...s}),l=await b.writeContract(a),i=await p.waitForTransactionReceipt({hash:l});if("success"!==i.status)throw"Transaction reverted";u(!0),d&&d(),t&&n.A.success("Transaction success"),v.update()}catch(e){t&&n.A.error((0,a.az)(e))}x(!1)}};return{write,isDisabled:h,isLoading:o,isSuccess:m}}}},function(e){e.O(0,[4881,7495,7622,2466,3458,3113,5294,6121,7020,3119,8410,3832,9738,5631,2653,4626,2398,5398,8888,553,7093,604,1744],function(){return e(e.s=94627)}),_N_E=e.O()}]);