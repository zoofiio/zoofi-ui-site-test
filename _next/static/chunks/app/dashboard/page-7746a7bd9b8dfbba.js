(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{79391:function(){},35467:function(t,e,a){"use strict";a.d(e,{fr:function(){return r},u8:function(){return o},zS:function(){return i}});let r={Slate:"slate",Gray:"gray",Zinc:"zinc",Neutral:"neutral",Stone:"stone",Red:"red",Orange:"orange",Amber:"amber",Yellow:"yellow",Lime:"lime",Green:"green",Emerald:"emerald",Teal:"teal",Cyan:"cyan",Sky:"sky",Blue:"blue",Indigo:"indigo",Violet:"violet",Purple:"purple",Fuchsia:"fuchsia",Pink:"pink",Rose:"rose"},o={XS:"xs",SM:"sm",MD:"md",LG:"lg",XL:"xl"},i={Left:"left",Right:"right"}},52100:function(t,e,a){"use strict";a.d(e,{W:function(){return r}});let r={none:{paddingLeft:"pl-0",paddingTop:"pt-0",paddingRight:"pr-0",paddingBottom:"pb-0",paddingX:"px-0",paddingY:"py-0",paddingAll:"p-0",marginLeft:"ml-0",marginTop:"mt-0",marginRight:"mr-0",marginBottom:"mb-0",negativeMarginLeft:"-ml-0",negativeMarginRight:"-mr-0",negativeMarginTop:"-mt-0",negativeMarginBottom:"-mb-0",left:"left-0",right:"right-0",top:"top-0",bottom:"bottom-0",spaceX:"space-x-0"},px:{paddingLeft:"pl-px",paddingTop:"pt-px",paddingRight:"pr-px",paddingBottom:"pb-px",paddingX:"px-px",paddingY:"py-px",paddingAll:"p-px",marginLeft:"ml-px",marginTop:"mt-px",marginRight:"mr-px",marginBottom:"mb-px",negativeMarginLeft:"-ml-px",negativeMarginRight:"-mr-px",negativeMarginTop:"-mt-px",negativeMarginBottom:"-mb-px",left:"left-px",right:"right-px",top:"top-px",bottom:"bottom-px",spaceX:"space-x-px"},threeXs:{paddingLeft:"pl-0.5",paddingTop:"pt-0.5",paddingRight:"pr-0.5",paddingBottom:"pb-0.5",paddingX:"px-0.5",paddingY:"py-0.5",paddingAll:"p-0.5",marginLeft:"ml-0.5",marginTop:"mt-0.5",marginRight:"mr-0.5",marginBottom:"mb-0.5",negativeMarginLeft:"-ml-0.5",negativeMarginRight:"-mr-0.5",negativeMarginTop:"-mt-0.5",negativeMarginBottom:"-mb-0.5",left:"left-0.5",right:"right-0.5",top:"top-0.5",bottom:"bottom-0.5",spaceX:"space-x-0.5"},twoXs:{paddingLeft:"pl-1",paddingTop:"pt-1",paddingRight:"pr-1",paddingBottom:"pb-1",paddingX:"px-1",paddingY:"py-1",paddingAll:"p-1",marginLeft:"ml-1",marginTop:"mt-1",marginRight:"mr-1",marginBottom:"mb-1",negativeMarginLeft:"-ml-1",negativeMarginRight:"-mr-1",left:"left-1",right:"right-1",top:"top-1",bottom:"bottom-1",spaceX:"space-x-1"},xs:{paddingLeft:"pl-1.5",paddingTop:"pt-1.5",paddingRight:"pr-1.5",paddingBottom:"pb-1.5",paddingX:"px-1.5",paddingY:"py-1.5",paddingAll:"p-1.5",marginLeft:"ml-1.5",marginTop:"mt-1.5",marginRight:"mr-1.5",marginBottom:"mb-1.5",negativeMarginLeft:"-ml-1.5",negativeMarginRight:"-mr-1.5",negativeMarginTop:"-mt-1.5",negativeMarginBottom:"-mb-1.5",left:"left-1.5",right:"right-1.5",top:"top-1.5",bottom:"bottom-1.5",spaceX:"space-x-1.5"},sm:{paddingLeft:"pl-2",paddingTop:"pt-2",paddingRight:"pr-2",paddingBottom:"pb-2",paddingX:"px-2",paddingY:"py-2",paddingAll:"p-2",marginLeft:"ml-2",marginTop:"mt-2",marginRight:"mr-2",marginBottom:"mb-2",negativeMarginLeft:"-ml-2",negativeMarginRight:"-mr-2",negativeMarginTop:"-mt-2",negativeMarginBottom:"-mb-2",left:"left-2",right:"right-2",top:"left-2",bottom:"bottom-2",spaceX:"space-x-2"},md:{paddingLeft:"pl-2.5",paddingTop:"pt-2.5",paddingRight:"pr-2.5",paddingBottom:"pb-2.5",paddingX:"px-2.5",paddingY:"py-2.5",paddingAll:"p-2.5",marginLeft:"ml-2.5",marginTop:"mt-2.5",marginRight:"mr-2.5",marginBottom:"mb-2.5",negativeMarginLeft:"-ml-2.5",negativeMarginRight:"-mr-2.5",negativeMarginTop:"-mt-2.5",negativeMarginBottom:"-mb-2.5",left:"left-2.5",right:"right-2.5",top:"top-2.5",bottom:"bottom-2.5",spaceX:"space-x-2.5"},lg:{paddingLeft:"pl-3",paddingTop:"pt-3",paddingRight:"pr-3",paddingBottom:"pb-3",paddingX:"px-3",paddingY:"py-3",paddingAll:"p-3",marginLeft:"ml-3",marginTop:"mt-3",marginRight:"mr-3",marginBottom:"mb-3",negativeMarginLeft:"-ml-3",negativeMarginRight:"-mr-3",negativeMarginTop:"-mt-3",negativeMarginBottom:"-mb-3",left:"left-3",right:"right-3",top:"top-3",bottom:"bottom-3",spaceX:"space-x-3"},xl:{paddingLeft:"pl-3.5",paddingTop:"pt-3.5",paddingRight:"pr-3.5",paddingBottom:"pb-3.5",paddingX:"px-3.5",paddingY:"py-3.5",paddingAll:"p-3.5",marginLeft:"ml-3.5",marginTop:"mt-3.5",marginRight:"mr-3.5",marginBottom:"mb-3.5",negativeMarginLeft:"-ml-3.5",negativeMarginRight:"-mr-3.5",negativeMarginTop:"-mt-3.5",negativeMarginBottom:"-mb-3.5",left:"left-3.5",right:"right-3.5",top:"top-3.5",bottom:"bottom-3.5",spaceX:"space-x-3.5"},twoXl:{paddingLeft:"pl-4",paddingTop:"pt-4",paddingRight:"pr-4",paddingBottom:"pb-4",paddingX:"px-4",paddingY:"py-4",paddingAll:"p-4",marginLeft:"ml-4",marginTop:"mt-4",marginRight:"mr-4",marginBottom:"mb-4",negativeMarginLeft:"-ml-4",negativeMarginRight:"-mr-4",negativeMarginTop:"-mt-4",negativeMarginBottom:"-mb-4",left:"left-4",right:"right-4",top:"top-4",bottom:"bottom-4",spaceX:"space-x-4"},threeXl:{paddingLeft:"pl-6",paddingTop:"pt-6",paddingRight:"pr-6",paddingBottom:"pb-6",paddingX:"px-6",paddingY:"py-6",paddingAll:"p-6",marginLeft:"ml-6",marginTop:"mt-6",marginRight:"mr-6",marginBottom:"mb-6",negativeMarginLeft:"-ml-6",negativeMarginRight:"-mr-6",negativeMarginTop:"-mt-6",negativeMarginBottom:"-mb-6",left:"left-6",right:"right-6",top:"top-6",bottom:"bottom-6",spaceX:"space-x-6"},fourXl:{paddingLeft:"pl-8",paddingTop:"pt-8",paddingRight:"pr-8",paddingBottom:"pb-8",paddingX:"px-8",paddingY:"py-8",paddingAll:"p-8",marginLeft:"ml-8",marginTop:"mt-8",marginRight:"mr-8",marginBottom:"mb-8",negativeMarginLeft:"-ml-8",negativeMarginRight:"-mr-8",negativeMarginTop:"-mt-8",negativeMarginBottom:"-mb-8",left:"left-8",right:"right-8",top:"top-8",bottom:"bottom-8",spaceX:"space-x-8"}}},40460:function(t,e,a){"use strict";a.d(e,{q:function(){return s}});var r=a(15638),o=a(82888),i=Object.prototype.hasOwnProperty,l=new Set(["string","number","boolean"]);let s=function(t){for(var e=arguments.length,a=Array(e>1?e-1:0),s=1;s<e;s++)a[s-1]=arguments[s];return"function"==typeof t?r.I.apply(void 0,[o._,t].concat(a)):r.I.apply(void 0,[function(){return function(t,e){for(var a in e)!function mergePropertyRecursively(t,e,a){if(!i.call(t,e)||l.has(typeof a)||null===a){t[e]=a;return}if(Array.isArray(a)&&Array.isArray(t[e])){t[e]=t[e].concat(a);return}if("object"==typeof a&&"object"==typeof t[e]){if(null===t[e]){t[e]=a;return}for(var r in a)mergePropertyRecursively(t[e],r,a[r])}}(t,a,e[a]);return t}((0,o._)(),t)}].concat(a))}({classGroups:{boxShadow:[{shadow:[{tremor:["input","card","dropdown"],"dark-tremor":["input","card","dropdown"]}]}],borderRadius:[{rounded:[{tremor:["small","default","full"],"dark-tremor":["small","default","full"]}]}],fontSize:[{text:[{tremor:["default","title","metric"],"dark-tremor":["default","title","metric"]}]}]}})},13012:function(t,e,a){"use strict";function n(t){return e=>{t.forEach(t=>{"function"==typeof t?t(e):null!=t&&(t.current=e)})}}function $(t){return e=>`tremor-${t}-${e}`}function c(t,e){return"white"!==t&&"black"!==t&&"transparent"!==t&&e?{bgColor:`bg-${t}-${e}`,selectBgColor:`ui-selected:bg-${t}-${e}`,hoverBgColor:`hover:bg-${t}-${e}`,textColor:`text-${t}-${e}`,selectTextColor:`ui-selected:text-${t}-${e}`,hoverTextColor:`hover:text-${t}-${e}`,borderColor:`border-${t}-${e}`,selectBorderColor:`ui-selected:border-${t}-${e}`,hoverBorderColor:`hover:border-${t}-${e}`,ringColor:`ring-${t}-${e}`,strokeColor:`stroke-${t}-${e}`,fillColor:`fill-${t}-${e}`}:{bgColor:`bg-${t}`,hoverBgColor:`hover:bg-${t}`,selectBgColor:`ui-selected:bg-${t}`,textColor:`text-${t}`,selectTextColor:`ui-selected:text-${t}`,hoverTextColor:`hover:text-${t}`,borderColor:`border-${t}`,selectBorderColor:`ui-selected:border-${t}`,hoverBorderColor:`hover:border-${t}`,ringColor:`ring-${t}`,strokeColor:`stroke-${t}`,fillColor:`fill-${t}`}}a.d(e,{bM:function(){return c},fn:function(){return $},lq:function(){return n}}),a(35467)},35669:function(t,e,a){Promise.resolve().then(a.bind(a,21097))},21097:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return Dashboard}});var r=a(31113),o=a(95702),i=a(44939),l=a(75496),s=a(87031),d=a(19757),u=a(90168),p=a(22139),m=a(59175),g=a(31889),f=a(5035),v=a(26361),h=a(52671),x=a(3106),b=a(18358),y=a(84944),T=a(55731),S=a(64103),L=a(52100),k=a(13012),w=a(40460);let B=(0,k.fn)("TableCell"),M=S.forwardRef((t,e)=>{let{children:a,className:r}=t,o=(0,T.__rest)(t,["children","className"]);return S.createElement(S.Fragment,null,S.createElement("td",Object.assign({ref:e,className:(0,w.q)(B("root"),"align-middle whitespace-nowrap tabular-nums text-left",L.W.twoXl.paddingAll,r)},o),a))});M.displayName="TableCell";let V=(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,r.jsx)("circle",{cx:"7",cy:"7",r:"5",fill:"white",stroke:"#00DE9C",strokeWidth:"4"})}),R=(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,r.jsx)("circle",{cx:"7",cy:"7",r:"5",fill:"white",stroke:"#FF3D3D",strokeWidth:"4"})});function DashItem(t){let{title:e,sub:a,tHeader:o,tData:i}=t;return(0,r.jsxs)("div",{className:"card whitespace-nowrap",children:["string"==typeof e?(0,r.jsx)("div",{className:"text-2xl leading-none font-semibold",children:e}):e,"string"==typeof a?(0,r.jsx)("div",{className:"text-[2rem] text-primary leading-none font-semibold mt-2",children:a}):a,(0,r.jsx)("div",{className:"my-4 h-[1px] bg-border/60 dark:bg-border"}),(0,r.jsx)("div",{className:"w-full overflow-x-auto",children:(0,r.jsx)(l.ZP,{headerClassName:"border-b-0",header:o,data:i})})]})}function TVLItem(){let t=(0,f.w)(),e=(0,S.useMemo)(()=>t.tvlItems.map(t=>[(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(o.c,{symbol:t.symbol,size:20}),(0,r.jsx)("span",{children:t.symbol})]},"icon"),"$".concat((0,y.d)(t.price)),(0,y.d)(t.amount),"$".concat((0,y.d)(t.usdAmount))]),[t.tvlItems]);return(0,r.jsx)(DashItem,{title:"Total Value Locked",sub:"$".concat((0,y.d)(t.tvl)),tHeader:["Asset","NAV","Amount","Total"],tData:e})}function LVaultsItem(){let t=(0,x.R)(t=>t.sliceLVaultsStore.lvaults),e=(0,m.p)(),a=d.iK[e],{prices:i}=(0,S.useContext)(h.g),l=(0,S.useMemo)(()=>a.map(e=>{var a,l,s,u,m;return[(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(o.c,{symbol:e.assetTokenSymbol,size:20}),(0,r.jsx)("span",{children:e.assetTokenSymbol})]},"icon"),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(o.c,{symbol:e.assetTokenSymbol,size:14}),(0,r.jsx)("span",{children:(0,y.d)((null===(a=t[e.vault])||void 0===a?void 0:a.assetBalance)||0n)})]},"icon"),(0,r.jsxs)("div",{className:"opacity-60",children:["~",(0,y.d)((0,v.ok)(t[e.vault],"assetBalance")*i[e.assetTokenAddress]/p.Pq)]})]},"total"),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(o.c,{symbol:d.TW,size:14}),(0,r.jsx)("span",{children:(0,y.d)((0,v.ok)(t[e.vault],"usbTotalSupply"))})]},"debt"),(0,v.Rr)((0,v.ok)(t[e.vault],"aar"),10n),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[1>=((null===(l=t[e.vault])||void 0===l?void 0:l.vaultMode)||0)?V:R,(0,r.jsx)("span",{children:1>=((null===(s=t[e.vault])||void 0===s?void 0:s.vaultMode)||0)?"Stability":"Adjustment"})]},"status"),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(null===(u=t[e.vault])||void 0===u?void 0:u.discountEnable)?R:V,(0,r.jsx)("span",{children:(null===(m=t[e.vault])||void 0===m?void 0:m.discountEnable)?"YES":"NO"})]},"discount")]}),[t,a,i]);return(0,r.jsx)(DashItem,{title:"L-Vault",tHeader:["Vaults","Total Deposit","".concat(d.TW," Debt"),"AAR","Status","Discount Offer"],tData:l})}function BVaultsItem(){let t=(0,m.p)(),e=(0,S.useMemo)(()=>s.Fw[t].filter(t=>(t.onEnv||[]).includes(p.Vi)),[t]),a=(0,x.R)(t=>t.sliceBVaultsStore.bvaults),i=(0,x.R)(t=>t.sliceTokenStore.prices),l=(0,S.useMemo)(()=>{let t=e.map(t=>{let e=(0,v.ok)(a,[t.vault,"lockedAssetTotal"]),r=e*(0,v.ok)(i,[t.asset])/p.Pq,o=u.P[t.asset],[l,s]=o?t.assetSymbol.split("-"):["",""],d=Math.max(22+5*(0,y.d)(e).length,5*(0,y.d)(r).length+5);return{bvc:t,totalDeposit:e,totalDepositUsd:r,totalLeftWidth:d,lp:o,baseSymbol:l,quoteSymbol:s}}),l=t.reduce((t,e)=>Math.max(t,e.totalLeftWidth),0)+20;return t.map(t=>{let{bvc:e,totalDeposit:i,totalDepositUsd:s,lp:d,baseSymbol:u,quoteSymbol:p}=t;return[(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(o.c,{symbol:e.assetSymbol,size:20}),(0,r.jsx)("span",{children:e.assetSymbol})]},"icon"),(0,r.jsxs)("div",{className:"flex gap-8 items-start",children:[(0,r.jsxs)("div",{style:{width:l},children:[(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(o.c,{symbol:e.assetSymbol,size:14}),(0,r.jsx)("span",{children:(0,y.d)(i)})]},"icon"),(0,r.jsxs)("div",{className:"opacity-60",children:["~",(0,y.d)(s)]})]}),d&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(o.c,{symbol:u,size:14}),(0,r.jsx)("span",{children:(0,y.d)((0,v.ok)(a,[e.vault,"lpBase"]))})]},"icon"),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(o.c,{symbol:p,size:14}),(0,r.jsx)("span",{children:(0,y.d)((0,v.ok)(a,[e.vault,"lpQuote"]))})]},"icon")]})]},"total"),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[V,(0,r.jsxs)("span",{children:["Epoch ",(0,v.ok)(a,[e.vault,"epochCount"]).toString()]})]},"status"),(0,v.Jh)((0,b.lL)(e.vault),10),"".concat((0,y.d)((0,b.pg)(e.vault),2),"X")]})},[e,a,i]);return(0,r.jsx)(DashItem,{title:"B-Vault",tHeader:["Vaults","Total Deposit","Status","PT APY","YT Boost"],tData:l})}function Dashboard(){return(0,g.a1)(),(0,g.Ev)(),(0,r.jsx)(i.E,{children:(0,r.jsxs)("div",{className:"w-full max-w-[1200px] px-4 mx-auto flex flex-col gap-5 md:pb-8",children:[(0,r.jsx)(TVLItem,{}),(0,r.jsx)(LVaultsItem,{}),(0,r.jsx)(BVaultsItem,{})]})})}},44939:function(t,e,a){"use strict";a.d(e,{E:function(){return PageWrap}});var r=a(31113);a(64103);var o=a(26361),i=a(69708),l=a(12045);function PageWrap(t){let{children:e,className:a}=t,s=(0,l.l)(t=>t.theme),d=(0,i.usePathname)();return(0,r.jsx)("div",{className:(0,o.cn)("min-h-[calc(100vh+1px)] h-auto pt-[90px] pb-6",a),style:{backgroundSize:"contain",background:"light"==s?"#eeeeee":"/"==d?"url(bg_home.svg) center bottom no-repeat,linear-gradient(105.67deg, #02050E 14.41%, #1D2F23 98.84%)":"linear-gradient(105.67deg, #02050E 14.41%, #1D2F23 98.84%)"},children:e})}},75496:function(t,e,a){"use strict";var r=a(31113),o=a(26361);function DefEmpty(){return(0,r.jsx)("tr",{className:"text-lg font-normal text-center text-black ",children:(0,r.jsx)("td",{colSpan:100,className:"h-[100px] py-5 align-top"})})}a(64103),e.ZP=t=>{let{header:e,data:a,span:i={},empty:l=(0,r.jsx)(DefEmpty,{}),className:s="relative min-w-full bg-transparent ",headerClassName:d,headerItemClassName:u,tbodyClassName:p="",rowClassName:m,rowStyle:g,cellClassName:f,onClickRow:v,onRowMouseHover:h}=t;return(0,r.jsxs)("table",{className:(0,o.cn)("relative min-w-full bg-transparent ",s),children:[(0,r.jsx)("thead",{className:"",children:(0,r.jsx)("tr",{className:(0,o.cn)("text-left whitespace-nowrap font-normal text-black border-b border-gray-100 pt-5 pb-6 dark:text-slate-50 dark:border-zinc-600",d),children:e.map((t,e)=>(0,r.jsx)("th",{colSpan:i[e],scope:"col",className:(0,o.cn)(0==i[e]?"p-0 w-0":"p-3 font-normal text-sm",u),children:t},e))})}),(0,r.jsxs)("tbody",{className:(0,o.cn)(p),children:[a.map((t,a)=>(0,r.jsx)("tr",{onClick:()=>v&&v(a),onMouseEnter:()=>h&&h(a),onMouseLeave:()=>h&&h(-1),style:"function"==typeof g?g(a):g,className:(0,o.cn)("text-slate-700 dark:text-slate-50 font-medium whitespace-nowrap",v?"cursor-pointer hover:bg-slate-400/10":"","function"==typeof m?m(a):m),children:t.map((t,l)=>l>=e.length?(0,r.jsx)(r.Fragment,{children:t}):(0,r.jsx)("td",{colSpan:i[l],className:(0,o.cn)(0==i[l]?"p-0 w-max":"px-3 py-2 text-sm w-max","function"==typeof f?f(a,l):f),children:t},l))},a)),0===a.length&&l]})]})}},31889:function(t,e,a){"use strict";a.d(e,{Ev:function(){return useLoadBVaults},a1:function(){return useLoadLVaults},g2:function(){return useLoadUserBVaults},z2:function(){return useLoadUserLVaults}});var r=a(19757),o=a(64103),i=a(96670),l=a(59175),s=a(3106),d=a(64370),u=a(83978),p=a.n(u),m=a(87031),g=a(22139);function useLoadLVaults(){let t=(0,l.p)(),e=r.iK[t],{address:a}=(0,i.m)(),u=(0,o.useMemo)(()=>p().chain(r.iK[t]).map(t=>[t.assetTokenAddress,t.xTokenAddress]).flatten().concat([r.O1[t]]).union().value(),[t]);(0,d.a)({queryKey:["UpdateLvautlsTokens",u],queryFn:async()=>(await s.w.getState().sliceTokenStore.updateTokenTotalSupply(u),!0)}),(0,d.a)({queryKey:["UpdateUserLvautlsTokens",u,a],queryFn:async()=>!!a&&(await s.w.getState().sliceTokenStore.updateTokensBalance(u,a),!0)}),(0,d.a)({queryKey:["UpdateLVautls",e],queryFn:async()=>(await s.w.getState().sliceLVaultsStore.updateLVaults(e),!0)})}function useLoadBVaults(){let t=(0,l.p)(),e=(0,o.useMemo)(()=>m.Fw[t].filter(t=>(t.onEnv||[]).includes(g.Vi)),[t,g.Vi]);(0,d.a)({queryKey:[e],queryFn:async()=>(await s.w.getState().sliceBVaultsStore.updateBvaults(e),await s.w.getState().sliceBVaultsStore.updateYTokenSythetic(e),!0)});let{address:a}=(0,i.m)(),r=(0,o.useMemo)(()=>e.map(t=>[t.asset,t.pToken]).flat().reduce((t,e)=>t.includes(e)?t:[...t,e],[]),[e]);(0,d.a)({queryKey:["UpdateBvautlsTokens",r],queryFn:async()=>(await s.w.getState().sliceTokenStore.updateTokenTotalSupply(r),await s.w.getState().sliceTokenStore.updateTokenPrices(r),!0),throwOnError:(t,e)=>(console.error(t),!1)}),(0,d.a)({queryKey:["UpdateUserBvautlsTokens",r,a],queryFn:async()=>!!a&&(await s.w.getState().sliceTokenStore.updateTokensBalance(r,a),!0)})}function useLoadUserLVaults(){let{address:t}=(0,i.m)(),e=(0,l.p)(),a=r.iK[e];(0,d.a)({queryKey:["UpdateAllUserLVaults",e,t,a],queryFn:async()=>!!t&&(await Promise.all(a.map(e=>s.w.getState().sliceLVaultsStore.updateUserLVault(e,t))),!0)})}function useLoadUserBVaults(){let{address:t}=(0,i.m)(),e=(0,l.p)(),a=(0,o.useMemo)(()=>m.Fw[e].filter(t=>(t.onEnv||[]).includes(g.Vi)),[e,g.Vi]),r=(0,s.R)(t=>p().keys(t.sliceBVaultsStore.bvaults).toString());(0,d.a)({queryKey:["UpdateAllUserBvaults",a,e,t,r],queryFn:async()=>{if(!t)return!1;let e=s.w.getState().sliceBVaultsStore.bvaults;for(let t of a)if(!e[t.vault])return!1;await Promise.all(a.map(t=>s.w.getState().sliceBVaultsStore.updateEpoches(t)));let getEpochesParams=t=>{let e=s.w.getState().sliceBVaultsStore.bvaults[t.vault],a=[];for(let r=parseInt(e.epochCount.toString());r>0;r--){let e=s.w.getState().sliceBVaultsStore.epoches["".concat(t.vault,"_").concat(r)];a.push(e)}return a};return await Promise.all(a.map(e=>s.w.getState().sliceUserBVaults.updateEpoches(e,t,getEpochesParams(e)))),!0}})}},88439:function(t,e,a){"use strict";a.d(e,{b:function(){return useMemoOfChainId}});var r=a(64103),o=a(59175);function useMemoOfChainId(t){let e=(0,o.p)(),a=(0,r.useRef)({});return(0,r.useMemo)(()=>(a.current[e]||(a.current[e]=t()),a.current[e]),[e])}},45438:function(t,e,a){"use strict";a.d(e,{i:function(){return p},p:function(){return useUpdatePtypoolApy}});var r=a(19757),o=a(22139),i=a(3106),l=a(64103),s=a(33737),d=a(93108),u=a(59175);let p=(0,d.Ue)(t=>({update:t}));function useUpdatePtypoolApy(t){let e=(0,u.p)(),a=r.iK[e],d=(0,i.R)(t=>t.sliceLVaultsStore.lvaults);(0,l.useEffect)(()=>{console.info("updatePtypoolApy"),a.forEach(a=>{let i=d[a.vault];if(a.ptyPoolAboveAddress&&i&&i.sellPoolTotalStaking&&p.getState().update({[a.ptyPoolAboveAddress]:{staking:(0,s.v)("0.025",10),matching:0n}}),a.ptyPoolBelowAddress&&i&&i.buyPoolTotalStaking&&!i.isStable){let l=i&&i.sellPoolTotalStaking*t[r.O1[e]],s=l>0n&&i.settingsDecimals>0n?i.M_ETHx*i.Y*t[a.xTokenAddress]*o.Pq/2n/l/i.settingsDecimals**10n:0n;p.getState().update({[a.ptyPoolBelowAddress]:{staking:s*10n**10n/o.Pq,matching:0n}})}})},[a,d,t,e])}},5035:function(t,e,a){"use strict";a.d(e,{R:function(){return useTVLV1},w:function(){return useTVL}});var r=a(19757),o=a(59175),i=a(64103),l=a(52671),s=a(22139),d=a(15506),u=a(70258),p=a(26361),m=a(3106),g=a(83978),f=a.n(g),v=a(87031),h=a(90168);function useTVLV1(){var t,e;let a=(0,o.p)(),m=null===(t=r.Lh[a])||void 0===t?void 0:t[0],g=null===(e=r.Lh[a])||void 0===e?void 0:e[1],{prices:f}=(0,i.useContext)(l.g),{data:v}=(0,d.uX)({contracts:[{abi:u.Wn,address:r.O6[a],functionName:"getVaultState",args:[null==m?void 0:m.vault]},{abi:u.Wn,address:r.O6[a],functionName:"getStableVaultState",args:[null==g?void 0:g.vault]},{abi:u.aT,address:null==m?void 0:m.ptyPoolAboveAddress,functionName:"totalStakingBalance"}]}),h=(0,p.ok)(v,[0,"result","M_ETH"]),x=(0,p.ok)(v,[1,"result","M_USDC"]),b=(0,p.ok)(v,[2,"result"]);return(h+b)*f[r.K8]/s.Pq+x*f[null==g?void 0:g.assetTokenAddress]/s.Pq}function useTVL(){let t=(0,o.p)(),e=r.iK[t],a=v.Fw[t].filter(t=>(t.onEnv||[]).includes(s.Vi)),{prices:d}=(0,i.useContext)(l.g),u=(0,m.R)(t=>t.sliceLVaultsStore.lvaults),p=(0,m.R)(t=>t.sliceTokenStore.totalSupply),g=e.map(t=>{var e;return(null===(e=u[t.vault])||void 0===e?void 0:e.usbTotalSupply)||0n}).reduce((t,e)=>t+e,0n),x=(0,m.R)(t=>t.sliceBVaultsStore.bvaults),b=(0,m.R)(t=>t.sliceTokenStore.prices),y=[{name:r.TW,symbol:r.TW,address:r.O1[t]}].concat(e.map(t=>({name:t.xTokenSymbol+t.version,symbol:t.xTokenSymbol,address:t.xTokenAddress}))).map(t=>{let e=d[t.address],a=t.symbol==r.TW?g:p[t.address]||0n,o=e*a/s.Pq;return{...t,price:e,amount:a,usdAmount:o}}).concat(e.filter(t=>!t.isStable).map(t=>{let e=u[t.vault],a=((null==e?void 0:e.sellPoolTotalStaking)||0n)+((null==e?void 0:e.buyPoolBalance)||0n),r=d[t.assetTokenAddress],o=r*a/s.Pq;return{name:t.assetTokenSymbol+t.version,symbol:t.assetTokenSymbol,address:t.assetTokenAddress,price:r,amount:a,usdAmount:o}})).concat(f().chain(a).mapValues(t=>{let e=h.P[t.asset],a=x[t.vault];e&&a&&a.lpLiq&&a.lpBase&&a.lpQuote&&b[e.base]&&b[e.quote];let r=b[t.asset]||0n,o=(null==a?void 0:a.lpLiq)||0n;return{name:t.assetSymbol,symbol:t.assetSymbol,address:t.asset,price:r,amount:o,usdAmount:r*o/s.Pq}}).values().reduce((t,e)=>{let a=t.find(t=>t.symbol==e.symbol);return a?(a.amount+=e.amount,a.usdAmount+=e.usdAmount,t):[...t,e]},[]).value()),T=y.reduce((t,e)=>t+e.usdAmount,0n);return{tvl:T,tvlItems:y}}},15506:function(t,e,a){"use strict";a.d(e,{D2:function(){return useWandContractRead},uX:function(){return useWandContractReads}}),a(78403);var r=a(83978),o=a.n(r);a(64103);var i=a(30308),l=a(59307),s=a(93108);let d=(0,s.Ue)(t=>({time:o().now(),update:()=>{t({time:o().now()})}}));function useWandContractRead(t){let{time:e}=d();return(0,i.u)({...t,query:{placeholderData:t=>t,refetchOnMount:!1,refetchOnWindowFocus:!1,...t.query||{}},wandtime:e})}function useWandContractReads(t){let{time:e}=d();return(0,l.N)({...t,query:{placeholderData:t=>t,refetchOnMount:!1,refetchOnWindowFocus:!1,...t.query||{}},wandtime:e})}},52671:function(t,e,a){"use strict";a.d(e,{g:function(){return T},A:function(){return FetcherProvider}});var r=a(31113),o=a(19757),i=a(22139),l=a(59175),s=a(64103),d=a(25233),u=a(87958),p=a(41340),m=a(73216),g=a(88439),f=a(45438),v=a(26361),h=a(64370),x=a(3106),b=a(18358),y=a(39577);let T=(0,s.createContext)({prices:(0,v.Yb)({},0n),usbApr:{apr:0n,aprDecimals:10}}),FetcherProvider=t=>{let{children:e}=t;(0,b.d6)();let a=(0,l.p)();!function(){let{chainId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,d.m)({chainId:t});s.useMemo(()=>(e&&(m.ON.provider=function(t){var e,a;let{chain:r,transport:o}=t,i={chainId:r.id,name:r.name,ensAddress:null===(a=r.contracts)||void 0===a?void 0:null===(e=a.ensRegistry)||void 0===e?void 0:e.address};return"fallback"===o.type?new u.H(o.transports.map(t=>{let{value:e}=t;return new p.r(null==e?void 0:e.url,i)})):new p.r(o.url,i)}(e)),m.ON.provider),[e])}();let S=(0,g.b)(()=>(0,v.Yb)({[o.O1[a]]:i.Pq},0n));(0,y.$$)(S);let L=(0,y.UM)();return(0,f.p)(S),(0,h.a)({queryKey:["updateDefTokenList"],staleTime:36e5,queryFn:async()=>(await x.w.getState().sliceTokenStore.updateDefTokenList(),!0)}),(0,r.jsx)(T.Provider,{value:{prices:S,usbApr:L},children:e})}},39577:function(t,e,a){"use strict";a.d(e,{$$:function(){return useSetLVaultPrices},UM:function(){return useUSBApr},aS:function(){return useValutsLeverageRatio},hC:function(){return useLVault},hY:function(){return useUserLVault},pK:function(){return m},so:function(){return useUpLVaultOnUserAction},z6:function(){return useVaultLeverageRatio}});var r=a(19757),o=a(22139),i=a(59175),l=a(88439),s=a(26361),d=a(3106),u=a(96670),p=a(73216);let m=(0,s.Yb)({vaultMode:0,discountEnable:!1},0n),g=(0,s.Yb)({},0n);function useLVault(t){return(0,d.R)(e=>e.sliceLVaultsStore.lvaults[t]||m)}function useUserLVault(t){return(0,d.R)(e=>e.sliceLVaultsStore.user[t]||g)}function useVaultLeverageRatio(t){let e=useLVault(t.vault),a=(0,s.pF)(e.aar,e.AARDecimals);return Math.max(0,1+1/(a-1))}function useValutsLeverageRatio(){let t=(0,i.p)(),e=r.iK[t],a=(0,l.b)(()=>(0,s.Yb)({},0)),o=(0,d.R)(t=>t.sliceLVaultsStore.lvaults);return e.forEach(t=>{let e=o[t.vault],r=e?(0,s.pF)(e.aar,e.AARDecimals):0;a[t.vault]=Math.max(0,1+1/(r-1))}),a}function useSetLVaultPrices(t){let e=(0,d.R)(t=>t.sliceLVaultsStore.lvaults),a=(0,d.R)(t=>t.sliceTokenStore.totalSupply),l=(0,i.p)();r.iK[l].forEach(i=>{let s=e[i.vault]||m,d=s.assetBalance,u=s.latestPrice,p=s.usbTotalSupply,g=a[i.xTokenAddress]||0n,f=g>0n&&d>0n&&u>0n&&p>0n&&d*u>p*o.Pq?(d*u-p*o.Pq)/g:0n;t[i.xTokenAddress]=f,t[i.assetTokenAddress]=u,g>0n&&d>0n&&u>0n&&p>0n&&d*u<p*o.Pq&&(t[r.O1[l]]=d*u/p)})}function useUSBApr(){let t=(0,i.p)(),e=(0,d.R)(t=>t.sliceLVaultsStore.lvaults),a=0,o=0n,l=0n;return r.iK[t].forEach(t=>{let r=e[t.vault]||m;r.isStable?(o+=r.M_USB_USDC*r.Y*r.aar/10n**r.AARDecimals,l+=r.M_USB_USDC,r.M_USB_USDC>0n&&r.Y>0n&&a++):(o+=r.M_USB_ETH*r.Y,l+=r.M_USB_ETH,r.M_USB_ETH>0n&&r.Y>0n&&a++)}),{apr:l>0n?o/l:0n,aprDecimals:10}}function useUpLVaultOnUserAction(t){let{address:e}=(0,u.m)();return()=>{(0,s.XD)(async()=>{if(!e)return;let a=d.w.getState().sliceLVaultsStore,o=[t.assetTokenAddress,t.xTokenAddress,r.O1[(0,p.BV)()]];await Promise.all([a.updateLVaults([t]),a.updateUserLVault(t,e),d.w.getState().sliceTokenStore.updateTokensBalance(o,e),d.w.getState().sliceTokenStore.updateTokenTotalSupply(o)])},3,1e3).catch(console.error)}}}},function(t){t.O(0,[4881,7495,7622,9590,4167,7625,1037,5974,7093,604,1744],function(){return t(t.s=35669)}),_N_E=t.O()}]);