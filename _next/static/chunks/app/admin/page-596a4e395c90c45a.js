(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{32004:function(e,t,a){Promise.resolve().then(a.bind(a,10219))},10219:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return AdminPage}});var s=a(31113),n=a(99548),l=a(88702),r=a(44939),i=a(70258),u=a(19757),o=a(59175),d=a(48405),c=a(15506),p=a(26361),f=a(64103),m=a(45631),v=a(58409),x=a(85665),g=a(62531),b=a(35057),h=a(33737),j=a(11292),A=a(96670);let P=[{label:"资产利息率",value:"Y"},{label:"目标AAR",value:"AART"},{label:"安全AAR",value:"AARS"},{label:"上顶AAR",value:"AARU"},{label:"熔断AAR",value:"AARC"},{label:"赎回手续费",value:"C"},{label:"进入国库比例",value:"TreasuryFeeRate"},{label:"Discount冷静时间",value:"CircuitBreakPeriod",units:0},{label:"低买池最小成交量USB",value:"PtyPoolMinUsbAmount"},{label:"高卖池最小成交量",value:"PtyPoolMinAssetAmount"},{label:"RateR",value:"RateR"}],y=[{label:"产品周期",value:"D",units:0},{label:"初始定价",value:"APRi"},{label:"赎回手续费",value:"f1"},{label:"利息佣金",value:"f2"}];function UpdateVaultParams(e){let{paramList:t,vault:a,protocoSettingAddress:r}=e,u=(0,f.useMemo)(()=>t.map(e=>({...e,label:"".concat(e.label,"(").concat(e.value,")")})),[t]),[{value:o,param:d},j]=(0,v.Z)({value:"",param:u[0]}),{data:A,refetch:P}=(0,c.uX)({contracts:t.map(e=>({abi:i.$4,address:r,functionName:"vaultParamValue",args:[a,(0,g.$G)(e.value,{size:32})]}))}),y=(0,f.useMemo)(()=>(A||[]).map((e,a)=>{let s=t[a];return"".concat(s.label,"(").concat(s.value,"): ").concat((0,b.b)(e.result||0n,"number"==typeof s.units?s.units:10))}),[A]),N="number"==typeof d.units?d.units:10,[T,w]=(0,x.Z)();return(0,s.jsxs)(l.Ak,{tit:"Vault Param Vaule",children:[(0,s.jsx)(m.ZP,{classNames:l.At,maxMenuHeight:w.height+110,value:d,options:u,onChange:e=>j({param:e})}),(0,s.jsx)("input",{value:o.toString(),onChange:e=>{let t=(e.target.value||"").replaceAll("-","").replaceAll("+","");j({value:t})},type:"number",className:(0,p.cn)(l.pk),pattern:"[0-9.]{36}",step:1,placeholder:"0"}),(0,s.jsx)(n.v,{tx:"Write",config:{abi:i.$4,address:r,functionName:"updateVaultParamValue",args:[a,(0,g.$G)(d.value,{size:32}),(0,h.v)(o,N)]},onTxSuccess:()=>{j({value:""}),P()},className:" w-full flex items-center justify-center gap-4"}),(0,s.jsx)("div",{className:"text-sm flex flex-col items-start",ref:T,children:y.map((e,t)=>(0,s.jsx)("div",{children:e},"info_".concat(t)))})]})}function UpdateVaultPrice(e){let{vc:t}=e,[{feed:a},r]=(0,v.Z)({feed:""});return(0,s.jsxs)(l.Ak,{tit:"Vault Price Feed",children:[(0,s.jsx)("input",{type:"text",placeholder:"_assetTokenPriceFeed_",value:a,onChange:e=>r({feed:e.target.value}),className:(0,p.cn)(l.pk)}),(0,s.jsx)(n.v,{tx:"Write",config:{abi:i.WW,address:t.vault,functionName:"updatePriceFeed",args:[a]},onTxSuccess:()=>{r({feed:""})},className:" w-full flex items-center justify-center gap-4"})]})}function ClaimYieldsForBuyPool(e){let{vc:t}=e,{data:a}=(0,c.D2)({abi:i.aT,address:t.ptyPoolBelowAddress,functionName:"claimableYields"}),r=t.ptyPoolBelowAddress&&a||0n,[{address:u},o]=(0,v.Z)({address:""});return(0,s.jsxs)(l.Ak,{tit:"ClaimYields for Buy Low Pool",children:[(0,s.jsxs)("span",{children:["Yields: ",(0,j.d)(r)]}),(0,s.jsx)("input",{type:"text",placeholder:"recipient",value:u,onChange:e=>o({address:e.target.value}),className:(0,p.cn)(l.pk)}),(0,s.jsx)(n.v,{tx:"Write",disabled:!t.ptyPoolBelowAddress||r<=0n,config:{abi:i.aT,address:t.ptyPoolBelowAddress,functionName:"claimYields",args:[u]},className:"!mt-0  max-w-[100px] flex items-center justify-center gap-4"})]})}function SetTester(e){let{vc:t}=e,{data:a}=(0,c.D2)({abi:i.Og,address:t.assetTokenFeed,functionName:"getTestersCount"}),{data:r}=(0,c.D2)({abi:i.Og,address:t.assetTokenFeed,functionName:"owner"}),u=a||0n,{data:o}=(0,c.uX)({contracts:Array.from(Array(parseInt(u.toString()))).map((e,a)=>({abi:i.Og,address:t.assetTokenFeed,functionName:"getTester",args:[BigInt(a)]}))}),d=(null==o?void 0:o.map(e=>e.result))||[],[{address:f},m]=(0,v.Z)({address:""});return(0,s.jsxs)(l.Ak,{tit:"Set tester",children:[(0,s.jsxs)("div",{children:["Owner: ",r]}),(0,s.jsxs)("div",{children:["Tester Count: ",u.toString()]}),(0,s.jsx)("div",{children:"Testers"}),d.map(e=>(0,s.jsx)("div",{children:e},e)),(0,s.jsx)("input",{type:"text",placeholder:"recipient",value:f,onChange:e=>m({address:e.target.value}),className:(0,p.cn)(l.pk)}),(0,s.jsx)(n.v,{tx:"Write",disabled:!f,config:{abi:i.Og,address:t.assetTokenFeed,functionName:"setTester",args:[f,!0]},className:"!mt-0  max-w-[100px] flex items-center justify-center gap-4"})]})}let N=[{label:"赎回手续费",value:"C"}];function AdminPage(){let e=(0,o.p)(),{current:t,setState:a,options:n}=(0,d.G)(),{chain:c}=(0,A.m)();return(0,s.jsx)(r.E,{children:(0,s.jsx)("div",{className:"w-full flex",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 w-full max-w-[840px] mx-auto px-5",children:[(0,s.jsx)(m.ZP,{classNames:l.At,defaultValue:n[0],options:n,onChange:e=>e&&a({current:e})}),"L-Vault"==t.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(UpdateVaultParams,{vault:t.data.vault,paramList:P,protocoSettingAddress:u.e_[e]}),(0,s.jsx)(UpdateVaultPrice,{vc:t.data}),["pauseMint","unpauseMint","pauseRedeem","unpauseRedeem","pauseUsbToMarginTokens","unpauseUsbToMarginTokens"].map(e=>(0,s.jsx)(l.UT,{functionName:e,abi:i.WW,address:t.data.vault},"l-vault-".concat(e))),(0,s.jsx)(l.UT,{abi:i.EF,functionName:"transferOwnership",address:u.Vq[e]}),(0,s.jsx)(ClaimYieldsForBuyPool,{vc:t.data}),(null==c?void 0:c.testnet)&&(0,s.jsx)(SetTester,{vc:t.data})]}),"P-Vault"==t.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(UpdateVaultParams,{vault:t.data.vault,paramList:N,protocoSettingAddress:u.e_[e]}),["configureBlastYieldsAndGas","configureBlastPoints"].map(e=>(0,s.jsx)(l.UT,{abi:i.a4,functionName:e,address:t.data.vault},"p-vault-".concat(e)))]}),"B-Vault"==t.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(UpdateVaultParams,{vault:t.data.vault,paramList:y,protocoSettingAddress:t.data.protocolSettingsAddress}),["close","pause","unpause","pauseRedeemPool","unpauseRedeemPool","addBribeToken","addBribes","setBriber"].map(e=>(0,s.jsx)(l.UT,{abi:i.j5,functionName:e,address:t.data.vault},"b-vault-".concat(e))),(0,s.jsx)(l.UT,{tit:"transferOwnership",abi:i.RR,functionName:"transferOwnership",address:t.data.protocolAddress}),(0,s.jsx)(l.UT,{tit:"upsertParamConfig",abi:i.$4,functionName:"upsertParamConfig",address:t.data.protocolSettingsAddress})]})]})})})}},17695:function(e,t,a){"use strict";a.d(t,{S1:function(){return off},ZT:function(){return noop},jU:function(){return s},on:function(){return on}});var noop=function(){};function on(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function off(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var s="undefined"!=typeof window},85665:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var s=a(64103),n=a(17695),l=n.jU?s.useLayoutEffect:s.useEffect,r={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0},i=n.jU&&void 0!==window.ResizeObserver?function(){var e=(0,s.useState)(null),t=e[0],a=e[1],n=(0,s.useState)(r),i=n[0],u=n[1],o=(0,s.useMemo)(function(){return new window.ResizeObserver(function(e){if(e[0]){var t=e[0].contentRect;u({x:t.x,y:t.y,width:t.width,height:t.height,top:t.top,left:t.left,bottom:t.bottom,right:t.right})}})},[]);return l(function(){if(t)return o.observe(t),function(){o.disconnect()}},[t]),[a,i]}:function(){return[n.ZT,r]}}},function(e){e.O(0,[4881,7495,7622,9590,8410,4300,7661,6525,1037,4289,7093,604,1744],function(){return e(e.s=32004)}),_N_E=e.O()}]);