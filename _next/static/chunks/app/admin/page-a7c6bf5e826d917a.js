(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{32004:function(e,a,t){Promise.resolve().then(t.bind(t,10219))},10219:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return AdminPage}});var s=t(31113),n=t(99548),r=t(44939),l=t(73417),o=t(87031),i=t(19757),c=t(59175),u=t(15506),d=t(26361),p=t(64103),m=t(23125),b=t(83960),f=t(45631),x=t(58409),v=t(85665),g=t(62531),A=t(35057),y=t(33737),h=t(11292),E=t(41440);let j={menu:()=>(0,d.cn)("bg-white dark:bg-black dark:border"),option:e=>(0,d.cn)({"!bg-primary/50":e.isFocused,"!bg-primary":e.isSelected}),control:()=>"bg-white dark:bg-black !min-h-[58px] !border-primary/70 !shadow-none",singleValue:()=>"dark:text-white"},N="bg-white dark:bg-transparent border-primary/70 w-full h-14 text-right pr-4 font-bold text-sm border focus:border-2  rounded-md outline-none ",S=[{label:"资产利息率",value:"Y"},{label:"目标AAR",value:"AART"},{label:"安全AAR",value:"AARS"},{label:"上顶AAR",value:"AARU"},{label:"熔断AAR",value:"AARC"},{label:"赎回手续费",value:"C"},{label:"进入国库比例",value:"TreasuryFeeRate"},{label:"Discount冷静时间",value:"CircuitBreakPeriod",units:0},{label:"低买池最小成交量USB",value:"PtyPoolMinUsbAmount"},{label:"高卖池最小成交量",value:"PtyPoolMinAssetAmount"},{label:"RateR",value:"RateR"}],w=[{label:"产品周期",value:"D",units:0},{label:"初始定价",value:"APRi"},{label:"赎回手续费",value:"f1"},{label:"利息佣金",value:"f2"}];function Expandable(e){let{children:a,tit:t,disable:n}=e,[r,l]=(0,p.useState)(!1);return(0,s.jsxs)("div",{className:"flex flex-col w-full bg-white dark:bg-transparent rounded-lg overflow-hidden border border-solid border-primary/40",children:[(0,s.jsxs)("div",{className:"px-5 py-2 min-h-[58px] flex justify-between items-center text-sm",children:[(0,s.jsx)("div",{className:"font-medium text-base",children:t}),n?a:(0,s.jsxs)("div",{className:"px-2 py-1 rounded-full border border-solid border-primary flex items-center text-xs text-primary cursor-pointer ",onClick:()=>l(!r),children:[(0,s.jsx)("span",{className:"mr-[5px]",children:r?"Close":"Expand"}),r?(0,s.jsx)(b.iRh,{}):(0,s.jsx)(b.tv1,{})]})]}),(0,s.jsx)(m.Collapse,{isOpened:r,theme:{content:"bg-gray-200 dark:bg-transparent p-4 flex flex-col gap-2"},children:a})]})}function UpdateVaultParams(e){let{paramList:a,vault:t,protocoSettingAddress:r}=e,o=(0,p.useMemo)(()=>a.map(e=>({...e,label:"".concat(e.label,"(").concat(e.value,")")})),[a]),[{value:i,param:c},m]=(0,x.Z)({value:"",param:o[0]}),{data:b}=(0,u.uX)({contracts:a.map(e=>({abi:l.$4,address:r,functionName:"vaultParamValue",args:[t,(0,g.$G)(e.value,{size:32})]}))}),h=(0,p.useMemo)(()=>(b||[]).map((e,t)=>{let s=a[t];return"".concat(s.label,"(").concat(s.value,"): ").concat((0,A.b)(e.result||0n,"number"==typeof s.units?s.units:10))}),[b]),E="number"==typeof c.units?c.units:10,[S,w]=(0,v.Z)();return(0,s.jsxs)(Expandable,{tit:"Vault Param Vaule",children:[(0,s.jsx)(f.ZP,{classNames:j,maxMenuHeight:w.height+110,value:c,options:o,onChange:e=>m({param:e})}),(0,s.jsx)("input",{value:i.toString(),onChange:e=>{let a=(e.target.value||"").replaceAll("-","").replaceAll("+","");m({value:a})},type:"number",className:(0,d.cn)(N),pattern:"[0-9.]{36}",step:1,placeholder:"0"}),(0,s.jsx)(n.v,{tx:"Write",config:{abi:l.$4,address:r,functionName:"updateVaultParamValue",args:[t,(0,g.$G)(c.value,{size:32}),(0,y.v)(i,E)]},onTxSuccess:()=>{m({value:""})},className:"btn-primary w-full flex items-center justify-center gap-4"}),(0,s.jsx)("div",{className:"text-sm flex flex-col items-start",ref:S,children:h.map((e,a)=>(0,s.jsx)("div",{children:e},"info_".concat(a)))})]})}function UpdateVaultPrice(e){let{vc:a}=e,[{feed:t},r]=(0,x.Z)({feed:""});return(0,s.jsxs)(Expandable,{tit:"Vault Price Feed",children:[(0,s.jsx)("input",{type:"text",placeholder:"_assetTokenPriceFeed_",value:t,onChange:e=>r({feed:e.target.value}),className:(0,d.cn)(N)}),(0,s.jsx)(n.v,{tx:"Write",config:{abi:l.WW,address:a.vault,functionName:"updatePriceFeed",args:[t]},onTxSuccess:()=>{r({feed:""})},className:"btn-primary w-full flex items-center justify-center gap-4"})]})}let convertArgs=(e,a)=>e.map((e,t)=>{let s=a[t];return s.type.startsWith("uint")?BigInt(e):"bytes32"==s.type?(0,g.$G)(e,{size:32}):e});function GeneralAction(e){var a,t;let{abi:r,address:l,functionName:o,tit:i}=e,c=r.find(e=>"function"==e.type&&e.name==o),[{args:u},p]=(0,x.Z)({args:Array((null==c?void 0:null===(a=c.inputs)||void 0===a?void 0:a.length)||0).fill("")});if(!c)return;let m=!c.inputs||0==c.inputs.length;return(0,s.jsxs)(Expandable,{tit:i||o,disable:m,children:[null===(t=c.inputs)||void 0===t?void 0:t.map((e,a)=>(0,s.jsx)("input",{type:"text",placeholder:e.name,value:u[a],onChange:e=>p({args:u.map((t,s)=>a==s?e.target.value:t)}),className:(0,d.cn)(N)},"input_".concat(a))),(0,s.jsx)(n.v,{tx:"Write",config:{abi:r,address:l,functionName:o,args:convertArgs(u,c.inputs)},className:(0,d.cn)("!mt-0 btn-primary flex items-center justify-center gap-4",m?"max-w-[100px]":"w-full")})]})}function ClaimYieldsForBuyPool(e){let{vc:a}=e,{data:t}=(0,u.D2)({abi:l.aT,address:a.ptyPoolBelowAddress,functionName:"claimableYields"}),r=a.ptyPoolBelowAddress&&t||0n,[{address:o},i]=(0,x.Z)({address:""});return(0,s.jsxs)(Expandable,{tit:"ClaimYields for Buy Low Pool",children:[(0,s.jsxs)("span",{children:["Yields: ",(0,h.d)(r)]}),(0,s.jsx)("input",{type:"text",placeholder:"recipient",value:o,onChange:e=>i({address:e.target.value}),className:(0,d.cn)(N)}),(0,s.jsx)(n.v,{tx:"Write",disabled:!a.ptyPoolBelowAddress||r<=0n,config:{abi:l.aT,address:a.ptyPoolBelowAddress,functionName:"claimYields",args:[o]},className:"!mt-0 btn-primary max-w-[100px] flex items-center justify-center gap-4"})]})}function SetTester(e){let{vc:a}=e,{data:t}=(0,u.D2)({abi:l.Og,address:a.assetTokenFeed,functionName:"getTestersCount"}),{data:r}=(0,u.D2)({abi:l.Og,address:a.assetTokenFeed,functionName:"owner"}),o=t||0n,{data:i}=(0,u.uX)({contracts:Array.from(Array(parseInt(o.toString()))).map((e,t)=>({abi:l.Og,address:a.assetTokenFeed,functionName:"getTester",args:[BigInt(t)]}))}),c=(null==i?void 0:i.map(e=>e.result))||[],[{address:p},m]=(0,x.Z)({address:""});return(0,s.jsxs)(Expandable,{tit:"Set tester",children:[(0,s.jsxs)("div",{children:["Owner: ",r]}),(0,s.jsxs)("div",{children:["Tester Count: ",o.toString()]}),(0,s.jsx)("div",{children:"Testers"}),c.map(e=>(0,s.jsx)("div",{children:e},e)),(0,s.jsx)("input",{type:"text",placeholder:"recipient",value:p,onChange:e=>m({address:e.target.value}),className:(0,d.cn)(N)}),(0,s.jsx)(n.v,{tx:"Write",disabled:!p,config:{abi:l.Og,address:a.assetTokenFeed,functionName:"setTester",args:[p,!0]},className:"!mt-0 btn-primary max-w-[100px] flex items-center justify-center gap-4"})]})}let C=[{label:"赎回手续费",value:"C"}];function AdminPage(){let e=(0,c.p)(),a=i.iK[e]||[],t=i.VQ[e]||[],n=o.Fw[e]||[],{chain:u}=(0,E.m)(),d=(0,p.useMemo)(()=>{let e=a.map(e=>({label:e.assetTokenSymbol,value:e.vault,data:e,type:"L-Vault"})),s=t.map(e=>({label:e.assetTokenSymbol,value:e.vault,data:e,type:"P-Vault"})),r=n.map(e=>({label:e.assetSymbol,value:e.vault,data:e,type:"B-Vault"}));return[...e,...s,...r].map(e=>({...e,label:"".concat(e.label,"(").concat(e.type,")")}))},[a,t,n]),[{current:m},b]=(0,x.Z)({current:d[0]});return(0,s.jsx)(r.E,{children:(0,s.jsx)("div",{className:"w-full flex",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 w-full max-w-[840px] mx-auto px-5",children:[(0,s.jsx)(f.ZP,{classNames:j,defaultValue:d[0],options:d,onChange:e=>e&&b({current:e})}),"L-Vault"==m.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(UpdateVaultParams,{vault:m.data.vault,paramList:S,protocoSettingAddress:i.e_[e]}),(0,s.jsx)(UpdateVaultPrice,{vc:m.data}),["pauseMint","unpauseMint","pauseRedeem","unpauseRedeem","pauseUsbToMarginTokens","unpauseUsbToMarginTokens"].map(e=>(0,s.jsx)(GeneralAction,{functionName:e,abi:l.WW,address:m.data.vault},"l-vault-".concat(e))),(0,s.jsx)(GeneralAction,{abi:l.EF,functionName:"transferOwnership",address:i.Vq[e]}),(0,s.jsx)(ClaimYieldsForBuyPool,{vc:m.data}),(null==u?void 0:u.testnet)&&(0,s.jsx)(SetTester,{vc:m.data})]}),"P-Vault"==m.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(UpdateVaultParams,{vault:m.data.vault,paramList:C,protocoSettingAddress:i.e_[e]}),["configureBlastYieldsAndGas","configureBlastPoints"].map(e=>(0,s.jsx)(GeneralAction,{abi:l.a4,functionName:e,address:m.data.vault},"p-vault-".concat(e)))]}),"B-Vault"==m.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(UpdateVaultParams,{vault:m.data.vault,paramList:w,protocoSettingAddress:m.data.protocolSettingsAddress}),["pauseDeposit","unpauseDeposit","pauseSwap","unpauseSwap","pauseClaimBribes","unpauseClaimBribes","updateStakingPool","rescueFromStakingPool"].map(e=>(0,s.jsx)(GeneralAction,{abi:l.j5,functionName:e,address:m.data.vault},"b-vault-".concat(e))),(0,s.jsx)(GeneralAction,{tit:"transferOwnership",abi:l.RR,functionName:"transferOwnership",address:m.data.protocolAddress})]})]})})})}},99548:function(e,a,t){"use strict";t.d(a,{v:function(){return ApproveAndTx}});var s=t(31113),n=t(19757),r=t(26361),l=t(64103),o=t(47259),i=t(58714),c=t(41440),u=t(48914),d=t(23647);let p={},useApproves=function(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10000000000n*10n**18n,{address:s,chainId:m}=(0,c.m)(),b=(0,d.Ul)(),{data:f}=(0,u.p)(),[x,v]=(0,l.useState)(!1),g=(0,l.useMemo)(()=>Object.keys(e).filter(e=>e!==n.K8),[e]),[A,y]=(0,l.useState)(a&&p[a]||{}),updateAllownce=(e,t)=>{a&&(p[a]={...p[a]||{},[e]:t},y(a=>({...a,[e]:t})))};(0,l.useEffect)(()=>{s&&a&&b&&m&&g.forEach(e=>{b.readContract({abi:i.Wo,address:e,functionName:"allowance",args:[s,a]}).then(a=>updateAllownce(e,a||0n)).catch(console.error)})},[g,m,s]);let[h,E]=(0,l.useState)(!1),j=(0,l.useMemo)(()=>g.filter(a=>(0,r.ok)(e,a)>0n&&(0,r.ok)(e,a)>(0,r.ok)(A,a)),[e,g,A]),approve=async()=>{if(0!=j.length&&a)try{E(!0),v(!1);for(let s=0;s<j.length;s++){let n=j[s],r=!1===t?e[n]:t,l=await (null==f?void 0:f.writeContract({abi:i.Wo,address:n,functionName:"approve",args:[a,r]}));l&&await (null==b?void 0:b.waitForTransactionReceipt({hash:l})),updateAllownce(n,r)}o.A.success("Approve success"),E(!1),v(!0)}catch(e){o.A.error((0,r.az)(e)),E(!1),v(!1)}};return{approve,loading:h,shouldApprove:j.length>0,isSuccess:x}};var m=t(78354),b=t(88501),f=t(36762);function ApproveAndTx(e){let{className:a,txType:t="btn-primary",tx:n,busyShowTxet:r=!0,approves:o,spender:i,requestAmount:c,config:u,toast:d=!0,disabled:p,onTxSuccess:x,onApproveSuccess:v}=e,{write:g,isDisabled:A,isLoading:y}=(0,m.R)(u,{onSuccess:()=>x&&x(),autoToast:d}),h=p||A||y||!1===u.enabled,{approve:E,shouldApprove:j,loading:N,isSuccess:S}=useApproves(o||{},i,c),w=(0,l.useRef)();return(w.current=v,(0,l.useEffect)(()=>{w.current&&S&&w.current()},[S]),j)?(0,s.jsxs)("button",{className:(0,b.m)(t,"flex items-center justify-center gap-4",a),onClick:E,disabled:p||!E||N,children:[N&&(0,s.jsx)(f.$,{}),"Approve"]}):(0,s.jsxs)("button",{className:(0,b.m)(t,"flex items-center justify-center gap-4",a),onClick:()=>g(),disabled:h,children:[y&&(0,s.jsx)(f.$,{}),(r||!y)&&n]})}},44939:function(e,a,t){"use strict";t.d(a,{E:function(){return PageWrap}});var s=t(31113);t(64103);var n=t(26361),r=t(69708),l=t(12045);function PageWrap(e){let{children:a,className:t}=e,o=(0,l.l)(e=>e.theme),i=(0,r.usePathname)();return(0,s.jsx)("div",{className:(0,n.cn)("min-h-[calc(100vh+1px)] h-auto pt-[90px] pb-6",t),style:{backgroundSize:"contain",background:"light"==o?"#eeeeee":"/"==i?"url(bg_home.svg) center bottom no-repeat,linear-gradient(105.67deg, #02050E 14.41%, #1D2F23 98.84%)":"linear-gradient(105.67deg, #02050E 14.41%, #1D2F23 98.84%)"},children:a})}},36762:function(e,a,t){"use strict";t.d(a,{$:function(){return Spinner}});var s=t(31113),n=t(33501);let Spinner=e=>{let{className:a}=e;return(0,s.jsxs)("svg",{fill:"none",className:(0,n.Z)(a,"animate-spin h-5 w-5 2-ml-1 2mr-3"),viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},87031:function(e,a,t){"use strict";t.d(a,{Fw:function(){return l}});var s=t(73216);let n="0xF86a9a53D963B7a845F3496a97d0dB11cEc3c4E0",r="0x97d82C639835F4EfaCC366fdE78CA0c4EC2a2A83",l={[s.BG.id]:[{vault:"0x6a6B9817d221816187aD335030b0EF7c17051EfA",asset:"0xD69ADb6FB5fD6D06E6ceEc5405D95A37F96E3b96",assetSymbol:"HONEY-USDC",pToken:"0xbB6A3a94cccAe455444e9a1E1CD478CAc278Be3E",pTokenSymbol:"pHONEY-USDC",yTokenSymbol:"yHONEY-USDC",protocolAddress:n,protocolSettingsAddress:r,onEnv:["beta"]},{vault:"0xF484F7D00DD44c1F8B047b79cF8674e78FEcaba7",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x9C476C0Ee24768fE74b5A6768a7E7c901e51E409",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:n,protocolSettingsAddress:r,onEnv:["beta"]},{vault:"0xF778D2B9E0238D385008e916D7245F51959Ba279",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x1f779e869E4769bD9129b7FE8B3a46350FA2Fbe7",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:n,protocolSettingsAddress:r,onEnv:["beta"]},{vault:"0x686C72Aecf2D08410A8270D514B0Dc3Cc72e5288",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x19fa905c43B7B3e4698266250f2f7909610b54B1",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:n,protocolSettingsAddress:r,onEnv:["beta"]},{vault:"0xB0a0C11a77E67acBD161cc44743a1774f2C4Fff5",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x8b117042C1C6C45656bE0A2160CEbD405C6016bc",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:n,protocolSettingsAddress:r,onEnv:["beta","test"]}]}},78354:function(e,a,t){"use strict";t.d(a,{R:function(){return useWrapContractWrite}});var s=t(26361),n=t(64103),r=t(47259),l=t(48914),o=t(15506),i=t(23647);function useWrapContractWrite(e,a){let{autoToast:t=!0,onSuccess:c}=a||{},[u,d]=(0,n.useState)(!1),[p,m]=(0,n.useState)(!1),b=(0,i.Ul)(),{data:f}=(0,l.p)(),x=!b||!f||!f.account||u||!e,v=(0,o.hp)(),write=async()=>{if(!x){d(!0),m(!1);try{let a="function"==typeof e?await e():e,{request:s}=await b.simulateContract({account:f.account,...a}),n=await f.writeContract(s),l=await b.waitForTransactionReceipt({hash:n});if("success"!==l.status)throw"Transaction reverted";m(!0),c&&c(),t&&r.A.success("Transaction success"),v.update()}catch(e){t&&r.A.error((0,s.az)(e))}d(!1)}};return{write,isDisabled:x,isLoading:u,isSuccess:p}}}},function(e){e.O(0,[4881,7495,7622,8927,8410,5631,8511,3063,7093,604,1744],function(){return e(e.s=32004)}),_N_E=e.O()}]);