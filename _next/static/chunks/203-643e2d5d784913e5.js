(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[203],{79391:function(){},95702:function(e,t,a){"use strict";a.d(t,{c:function(){return CoinIcon}});var n=a(31113),o=a(26758);let s={iBGT:"webp"};function CoinIcon(e){let{symbol:t,size:a=48,...r}=e,l=t in s?s[t]:"svg",u="".concat(o.G,"/").concat(t,".").concat(l);return(0,n.jsx)("img",{...r,width:a,height:a,src:u,alt:t})}},68535:function(e,t,a){"use strict";let n;a.d(t,{aw:function(){return getBlastPoints},l3:function(){return getInviteCodes},dH:function(){return getInvitees},Vm:function(){return getPtypoolYields},Zr:function(){return getRank},V_:function(){return getUserState},M0:function(){return refreshInviteCode},n$:function(){return userLogin}});var o=a(44769),s=a(83606);let instance=()=>(n&&n.defaults.baseURL==="https://earlyaccess-beta.".concat(o.Kh.value,"/api")||(n=s.Z.create({baseURL:"https://earlyaccess-beta.".concat(o.Kh.value,"/api"),timeout:1e4,headers:{"Content-Type":"application/json"}})),n);var r={get:async function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.startsWith("/auth")){let e=localStorage.getItem("earlyaccess-token");if(!e)throw"Need token";n.headers={...n.headers||{},Authorization:e}}let o=await instance().get(e,{...n,params:a});if(console.info("res:",null==o?void 0:o.data),(null==o?void 0:null===(t=o.data)||void 0===t?void 0:t.code)!==200)throw o.data;return o.data.data},post:async function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.startsWith("/auth")){let e=localStorage.getItem("earlyaccess-token");if(!e)throw"Need token";n.headers={...n.headers||{},Authorization:e}}let o=await instance().post(e,a,n);if((null==o?void 0:null===(t=o.data)||void 0===t?void 0:t.code)!==200)throw o.data;return o.data.data}};let getRank=async()=>{let e=await r.get("/common/leader");return e},userLogin=async e=>{let t=await r.post("/auth/register",{code:e});return t},getUserState=async()=>{let e=await r.get("/auth/userState");return e},getBlastPoints=async()=>{let e=await r.get("/auth/blastPoints");return e},getInviteCodes=async()=>{let e=await r.get("/auth/invite/codes");return e},getInvitees=async()=>{let e=await r.get("/auth/invitees");return e},refreshInviteCode=async()=>(await r.post("/auth/invite/code/create"),getInviteCodes()),getPtypoolYields=async()=>{let e=await r.get("/common/ptypool/yields");return e}},87031:function(e,t,a){"use strict";a.d(t,{Fw:function(){return r}});var n=a(73216);let o="0x6763511669c0202dBC6396583a0bb70D481803F5",s="0xf65408DdB28c052ab593555361162067d66bE15F",r={[n.BG.id]:[{vault:"0xf13035cf330921D71C4c7120d3966400045429AC",asset:"0xdDEe6A193C33Af0E4641c80fAfAbD447C03fFf07",assetSymbol:"iRED",pToken:"0xc156ea7A76e0B4e10D355861450E6FEB658ace2a",pTokenSymbol:"piRED",yTokenSymbol:"yiRED",protocolAddress:o,protocolSettingsAddress:s},{vault:"0xb167b0D3118ba521C1c5C61011bD9Cb071a50bb3",asset:"0xD69ADb6FB5fD6D06E6ceEc5405D95A37F96E3b96",assetSymbol:"HONEY-USDC",pToken:"0xC71537F14a2577F14Aa1988a981fe575908E15C9",pTokenSymbol:"pHONEY-USDC",yTokenSymbol:"yHONEY-USDC",protocolAddress:o,protocolSettingsAddress:s}]}},26758:function(e,t,a){"use strict";a.d(t,{G:function(){return o}});var n=a(28070);let o=n.env.NEXT_PUBLIC_BASE_PATH||""},22139:function(e,t,a){"use strict";a.d(t,{Hj:function(){return s},Pq:function(){return r},_u:function(){return u},pn:function(){return l},v:function(){return o},xb:function(){return DOC_LINK}});var n=a(44769);let o="https://x.com/ZooFinanceIO",s="https://t.co/RJwdwdawe5",r=BigInt(1e18),l=864e5,DOC_LINK=()=>"https://docs.".concat(n.Kh.value),u=!1},44769:function(e,t,a){"use strict";a.d(t,{Kh:function(){return o},Vi:function(){return useConfigDomain}});var n=a(64103);let o={value:"zoofi.io"},s=["zoofi.io","zoofi.xyz"],getAvilableDomain=()=>{var e;if("localhost"==location.hostname||(null===(e=location.hostname.match(/^\d+\.\d+\.\d+\.\d+$/))||void 0===e?void 0:e.length)==1)return s[0];let t=location.hostname.split("."),a=t.slice(-2).join(".");return("ipns"==t[1]&&(a=t[0].replaceAll("-",".")),s.includes(a))?a:s[0]};function useConfigDomain(){(0,n.useEffect)(()=>{o.value=getAvilableDomain()},[])}},88439:function(e,t,a){"use strict";a.d(t,{b:function(){return useMemoOfChainId}});var n=a(64103),o=a(59175);function useMemoOfChainId(e){let t=(0,o.p)(),a=(0,n.useRef)({});return(0,n.useMemo)(()=>(a.current[t]||(a.current[t]=e()),a.current[t]),[t])}},45438:function(e,t,a){"use strict";a.d(t,{i:function(){return i},p:function(){return useUpdatePtypoolApy}});var n=a(19757),o=a(22139),s=a(64103),r=a(33737),l=a(48338),u=a(59175);let i=(0,l.Ue)(e=>({update:e}));function useUpdatePtypoolApy(e,t,a){let l=(0,u.p)(),c=n.iK[l],d=Object.values(e).reduce((e,t)=>t.totalStake+e,0n),{update:b}=i();(0,s.useEffect)(()=>{c.forEach(s=>{let u=a[s.vault];if(s.ptyPoolAboveAddress&&e[s.ptyPoolAboveAddress]&&b({[s.ptyPoolAboveAddress]:{staking:(0,r.v)("0.025",10),matching:0n}}),s.ptyPoolBelowAddress&&e[s.ptyPoolBelowAddress]){let a=e[s.ptyPoolBelowAddress].totalStake*t[n.O1[l]];console.info("hhh:",a);let r=a>0n&&u.settingsDecimals>0n?u.M_ETHx*u.Y*t[s.xTokenAddress]*o.Pq/2n/a/u.settingsDecimals**10n:0n;b({[s.ptyPoolBelowAddress]:{staking:r*10n**10n/o.Pq,matching:0n}})}})},[c,d,e,t,a])}},88239:function(e,t,a){"use strict";a.d(t,{g:function(){return w},A:function(){return FetcherProvider}});var n=a(31113),o=a(73417),s=a(68535),r=a(19757);let getTokens=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return r.iK[e].map(e=>({symbol:e.assetTokenSymbol,address:e.assetTokenAddress})).concat(r.iK[e].map(e=>({symbol:e.xTokenSymbol,address:e.xTokenAddress}))).concat([{symbol:r.TW,address:r.O1[e]}]).concat((r.VQ[e]||[]).map(e=>({symbol:e.assetTokenSymbol,address:e.assetToken}))).filter(e=>!t||e.symbol!==r.Ku)};var l=a(22139),u=a(59175),i=a(64103),c=a(49276),d=a(87958),b=a(41340),m=a(73216),f=a(88439),p=a(26361),v=a(41440),h=a(15506),g=a(45438),y=a(64370),k=a(83978),A=a.n(k),S=a(68940),T=a(62531),C=a(58714),D=a(35057),Y=a(41774),B=a(39264),P=a(18358);let w=(0,i.createContext)({balances:(0,p.Yb)({},0n),totalSupplies:(0,p.Yb)({},0n),prices:(0,p.Yb)({},0n),assetLocked:(0,p.Yb)({},0n),aar:(0,p.Yb)({},0),vaultUSBTotal:(0,p.Yb)({},0n),vaultsMode:(0,p.Yb)({},0),vaultsDiscount:(0,p.Yb)({},!1),vaultsState:(0,p.Yb)({},(0,p.Yb)({},0n)),stableVaultsState:(0,p.Yb)({},(0,p.Yb)({},0n)),earns:(0,p.Yb)({},(0,p.Yb)({},0n)),usbApr:{apr:0n,aprDecimals:10},plainVaultsStat:(0,p.Yb)({},(0,p.Yb)({},0n)),bVaultsData:(0,P.mf)()}),FetcherProvider=e=>{let{children:t}=e,a=(0,h.hp)(),k=(0,u.p)();!function(){let{chainId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.m)({chainId:e});i.useMemo(()=>(t&&(m.ON.provider=function(e){var t,a;let{chain:n,transport:o}=e,s={chainId:n.id,name:n.name,ensAddress:null===(a=n.contracts)||void 0===a?void 0:null===(t=a.ensRegistry)||void 0===t?void 0:t.address};return"fallback"===o.type?new d.H(o.transports.map(e=>{let{value:t}=e;return new b.r(null==t?void 0:t.url,s)})):new b.r(o.url,s)}(t)),m.ON.provider),[t])}();let{address:N}=(0,v.m)(),{data:E}=(0,B.K)({address:N,chainId:k,query:{enabled:!!N,refetchOnMount:!1,refetchOnWindowFocus:!1},wandtime:a.time}),I=(0,i.useMemo)(()=>getTokens(k),[k]),{data:R}=(0,h.uX)({contracts:[...I.map(e=>({address:e.address,abi:C.Wo,functionName:"balanceOf",args:[N],chainId:k}))],query:{enabled:!!N}}),{data:M}=(0,h.uX)({contracts:[...I.map(e=>({address:e.address,abi:C.Wo,functionName:"totalSupply",chainId:k}))]}),_=(0,f.b)(()=>(0,p.Yb)({},0n));_[r.K8]=(0,p.ok)(E,"value"),I.forEach((e,t)=>{_[e.address]=(0,p.ok)(R,[t,"result"])});let x=(0,f.b)(()=>(0,p.Yb)({},0n));I.forEach((e,t)=>{x[e.address]=(0,p.ok)(M,[t,"result"])});let O=r.iK[k],U=function(){let e=(0,u.p)(),t=r.iK[e],{data:a}=(0,h.uX)({contracts:[...t.map(e=>({vc:e,abi:o.nq,address:e.assetTokenFeed,functionName:"latestPrice"}))]}),{data:n}=(0,h.uX)({query:{gcTime:l.pn},contracts:[...t.map(e=>({abi:o.nq,address:e.assetTokenFeed,functionName:"decimals"}))]});return(0,i.useMemo)(()=>{let e={};return t.forEach((t,o)=>{let s=(0,p.ok)(a,[o,"result"]),r=(0,p.ok)(n,[o,"result"]);e[t.assetTokenAddress]=[s,r]}),e},[a,n,t])}(),{data:W}=(0,h.uX)({contracts:[...O.map(e=>({vc:e,abi:o.WW,address:e.vault,functionName:"assetBalance"}))]}),{data:F}=(0,h.uX)({contracts:[...O.map(e=>({abi:o.WW,address:e.vault,functionName:"usdTotalSupply"}))]}),{data:q}=(0,h.uX)({contracts:[...O.map(e=>({vc:e,abi:o.Wn,address:r.O6[k],functionName:"AAR",args:[e.vault]}))]}),{data:K}=(0,h.uX)({query:{gcTime:l.pn},contracts:[...O.map(e=>({abi:o.WW,address:e.vault,functionName:"AARDecimals"}))]}),{data:V}=(0,h.uX)({contracts:[...O.map(e=>({abi:o.WW,address:e.vault,functionName:"vaultMode"}))]}),{data:X}=(0,h.uX)({contracts:[...O.map(e=>({vc:e,abi:o.Wn,address:r.O6[k],functionName:e.isStable?"getStableVaultState":"getVaultState",args:[e.vault]}))]}),{data:j}=(0,h.uX)({query:{gcTime:l.pn},contracts:[...O.map(e=>({vc:e,abi:o.WW,address:e.vault,functionName:"paramValue",args:[(0,T.$G)("Y",{size:32})]}))]}),H=(0,f.b)(()=>(0,p.Yb)({[r.O1[k]]:l.Pq},0n)),z=(0,f.b)(()=>(0,p.Yb)({},0n)),L=(0,f.b)(()=>(0,p.Yb)({},0n)),G=(0,f.b)(()=>(0,p.Yb)({},0n)),Z=(0,f.b)(()=>(0,p.Yb)({},0)),$=(0,f.b)(()=>(0,p.Yb)({},(0,p.Yb)({},0n))),Q=(0,f.b)(()=>(0,p.Yb)({},(0,p.Yb)({},0n))),J=function(e,t,a){let n=(0,f.b)(()=>(0,p.Yb)({},!1)),s=(0,u.p)(),l=r.iK[s],{data:i}=(0,h.uX)({contracts:l.map(e=>({vc:e,abi:o.WW,address:e.vault,functionName:"paramValue",args:[(0,T.$G)("CircuitBreakPeriod",{size:32})]}))});return l.forEach((o,s)=>{if(o.isStable){let e=t[(null==o?void 0:o.vault)||"null"];n[o.vault]=e&&e.M_USDCx>0n&&e.aar<e.AARS}else{let t=(0,p.ok)(i,[s,"result"]),r=e[(null==o?void 0:o.vault)||"null"],l=a[(null==o?void 0:o.vault)||"null"],u=(0,p.ok)(r,"AARBelowCircuitBreakerLineTime"),c=2==l&&r&&((0,p.ok)(r,"aar")>=(0,p.ok)(r,"AARC")||BigInt(Math.floor(new Date().getTime()/1e3))-u>=t);n[o.vault]=c}}),n}($,Q,Z);O.forEach((e,t)=>{var a,n,o;let s=(0,p.ok)(W,[t,"result"]),u=(0,p.ok)(F,[t,"result"]),i=(0,p.ok)(U[e.assetTokenAddress],[0]),c=(0,p.ok)(U[e.assetTokenAddress],[1]);G[e.vault]=u;let d=c>0n?i*l.Pq/10n**c:0n;H[e.assetTokenAddress]=d;let b=x[e.xTokenAddress],m=b>0n&&s>0n&&d>0n&&u>0n&&s*d>u*l.Pq?(s*d-u*l.Pq)/b:0n;b>0n&&s>0n&&d>0n&&u>0n&&s*d<u*l.Pq&&(H[r.O1[k]]=s*d/u),H[e.xTokenAddress]=m,z[e.assetTokenAddress]=s;let f=(0,D.b)((0,p.ok)(q,[t,"result"]),parseInt((0,p.ok)(K,[t,"result"]).toString()));L[e.vault]=parseFloat(f),e.isStable?Q[e.vault]=(0,p.Yb)({settingsDecimals:10n,...null==X?void 0:null===(n=X[t])||void 0===n?void 0:n.result,Y:(0,p.ok)(j,[t,"result"])},0n):$[e.vault]=(0,p.Yb)({settingsDecimals:10n,...null==X?void 0:null===(o=X[t])||void 0===o?void 0:o.result,Y:(0,p.ok)(j,[t,"result"])},0n);let v=Q[e.vault];Z[e.vault]=e.isStable?v.aar<v.AARS&&v.M_USDC>0n?2:1:(null==V?void 0:null===(a=V[t])||void 0===a?void 0:a.result)||0});let ee=function(){let{address:e}=(0,v.m)(),t=(0,u.p)(),a=(0,i.useMemo)(()=>r.iK[t].filter(e=>!e.isStable&&e.ptyPoolAboveAddress&&e.ptyPoolBelowAddress).map(e=>[{poolAddress:e.ptyPoolBelowAddress,stakeSymbol:r.TW,matchSymbol:e.assetTokenSymbol,earnSymbol:e.xTokenSymbol,earnForMatchSymbol:e.assetTokenSymbol},{poolAddress:e.ptyPoolAboveAddress,stakeSymbol:e.assetTokenSymbol,matchSymbol:r.TW,earnSymbol:e.assetTokenSymbol,earnForMatchSymbol:e.xTokenSymbol}]).flat(),[t]),{data:n}=(0,h.uX)({query:{enabled:!!e},contracts:[...a.map(t=>{let{poolAddress:a}=t;return{abi:o.aT,address:a,functionName:"userStakingBalance",args:[e]}}),...a.map(t=>{let{poolAddress:a}=t;return{abi:o.aT,address:a,functionName:"earnedMatchedToken",args:[e]}}),...a.map(t=>{let{poolAddress:a}=t;return{abi:o.aT,address:a,functionName:"earnedStakingYields",args:[e]}}),...a.map(t=>{let{poolAddress:a}=t;return{abi:o.aT,address:a,functionName:"earnedMatchingYields",args:[e]}})]}),{data:s}=(0,h.uX)({contracts:[...a.map(e=>{let{poolAddress:t}=e;return{abi:o.aT,address:t,functionName:"totalStakingBalance"}})]}),l=(0,Y.t)(),{data:c}=(0,y.a)({queryKey:[a,l],initialData:(0,p.Yb)({},0n),queryFn:async()=>{let e=(0,p.Yb)({},0n);if(!l)return e;let t=a.filter(e=>e.matchSymbol==r.Ku),n=await Promise.all(t.map(e=>l.getBalance({address:e.poolAddress})));return t.forEach((t,a)=>{e[t.poolAddress]=n[a]}),e}}),d=(0,f.b)(()=>(0,p.Yb)({},(0,p.Yb)({},0n)));return a.forEach((e,t)=>{let{poolAddress:o,stakeSymbol:r,matchSymbol:l,earnSymbol:u}=e,i=(0,p.ok)(n,[t,"result"]),b=(0,p.ok)(n,[t+a.length,"result"]),m=(0,p.ok)(n,[t+2*a.length,"result"]),f=(0,p.ok)(n,[t+3*a.length,"result"]),v=(0,p.ok)(s,[t,"result"]),h=(0,p.ok)(c,o);d[o]={stakeSymbol:r,matchSymbol:l,earnSymbol:u,stake:i,match:b,earn:m,earnForMatch:f,totalStake:v,balance:h}}),d}(),et=function(e,t){let a=(0,u.p)(),n=0,o=0n,s=0n;return r.iK[a].forEach(a=>{if(a.isStable){let e=t[a.vault];o+=e.M_USB_USDC*e.Y*e.aar/10n**e.AARDecimals,s+=e.M_USB_USDC,e.M_USB_USDC>0n&&e.Y>0n&&n++}else{let t=e[a.vault];o+=t.M_USB_ETH*t.Y,s+=t.M_USB_ETH,t.M_USB_ETH>0n&&t.Y>0n&&n++}}),{apr:s>0n?o/s:0n,aprDecimals:10}}($,Q);(0,i.useEffect)(()=>{setInterval(()=>{let e=h.hp.getState();A().now()-e.time>=36e5&&e.update()},36e5)},[]);let{value:ea={}}=(0,S.Z)(s.Vm,[a.time]);(0,g.p)(ee,H,$);let en=function(e){let t=(0,u.p)(),{address:a}=(0,v.m)(),n=r.VQ[t]||[],{data:s}=(0,h.uX)({contracts:[...n.map(e=>({abi:o.a4,address:e.vault,functionName:"totalSupply"})),...n.map(e=>({abi:o.a4,address:e.vault,functionName:"balanceOf",args:[a]}))]}),{data:l}=(0,h.uX)({contracts:[{abi:o.pE,address:"0xcD96262Df56127f298b452FA40759632868A472a",functionName:"latestRoundData"},{abi:o.pE,address:"0x0af23B08bcd8AD35D1e8e8f2D2B779024Bd8D24A",functionName:"latestRoundData"}]}),i=(0,p.ok)(l,[0,"result",1]),c=(0,p.ok)(l,[1,"result",1]),d=i*c*10n**2n,b=(0,f.b)(()=>(0,p.Yb)({},(0,p.Yb)({},0n)));return n.forEach((t,a)=>{"weETH"==t.assetTokenSymbol&&(e[t.assetToken]=d),b[t.vault]=b[t.vault],b[t.vault].totalSupply=(0,p.ok)(s,[a,"result"]),b[t.vault].userStaked=(0,p.ok)(s,[a+n.length,"result"])}),b}(H),eo=(0,P.Rs)();return(0,n.jsx)(w.Provider,{value:{balances:_,totalSupplies:x,prices:H,assetLocked:z,aar:L,vaultUSBTotal:G,vaultsMode:Z,vaultsDiscount:J,vaultsState:$,stableVaultsState:Q,earns:ee,usbApr:et,ptypoolYields:ea,plainVaultsStat:en,bVaultsData:eo},children:t})}},18358:function(e,t,a){"use strict";a.d(t,{Rs:function(){return useBVaultsData},gz:function(){return useCalcClaimable},mf:function(){return defBVaultsData}});var n=a(73417),o=a(87031),s=a(59175),r=a(88439),l=a(15506),u=a(26361),i=a(64370),c=a(64103),d=a(67541),b=a(58714),m=a(41774),f=a(41440);function defBVaultsData(){return(0,u.Yb)({},e=>(0,u.Yb)({epoches:[],pTokenTotal:0n,vault:e},0n))}function useBVaultsData(){let e=(0,s.p)(),{time:t}=(0,l.hp)(),a=(0,r.b)(defBVaultsData),c=o.Fw[e],p=(0,m.t)({chainId:e}),{address:v}=(0,f.m)(),{data:h}=(0,i.a)({queryFn:async()=>{if(!p)return;let e=(await Promise.all(c.map(e=>p.readContract({abi:n.j5,address:e.vault,functionName:"epochIdCount"}).then(t=>({...e,epochCount:t}))))).filter(e=>e.epochCount>0n),getRedeemPoolData=e=>Promise.all([p.readContract({abi:n.gg,address:e,functionName:"settled"}),v?p.readContract({abi:n.gg,address:e,functionName:"earnedAssetAmount",args:[v]}):Promise.resolve(0n),v?p.readContract({abi:n.gg,address:e,functionName:"userRedeemingBalance",args:[v]}):Promise.resolve(0n)]).then(e=>{let[t,a,n]=e;return{settled:t,claimableAssetBalance:a,redeemingBalance:n}});return await Promise.all([...e.map(e=>Promise.all(Array(parseInt(e.epochCount.toString())).fill(0).map((t,a)=>Promise.all([p.readContract({abi:n.j5,address:e.vault,functionName:"epochInfoById",args:[e.epochCount-BigInt(a)]}).then(e=>getRedeemPoolData(e.redeemPool).then(t=>({...e,...t}))),p.readContract({abi:n.j5,address:e.vault,functionName:"yTokenTotalSupply",args:[e.epochCount-BigInt(a)]}),p.readContract({abi:n.j5,address:e.vault,functionName:"calcBribes",args:[e.epochCount-BigInt(a),v||d.DR]}),p.readContract({abi:b.Wo,address:e.asset,functionName:"balanceOf",args:[v||d.DR]}),p.readContract({abi:b.Wo,address:e.pToken,functionName:"balanceOf",args:[v||d.DR]}),p.readContract({abi:n.j5,address:e.vault,functionName:"yTokenUserBalance",args:[e.epochCount-BigInt(a),v||d.DR]})]).then(e=>{let[t,a,n,o,s,r]=e;return{...t,yTokenTotal:a,pTokenTotal:a,bribes:n.map(e=>({...e})),balanceAssset:o,balancePToken:s,balanceYToken:r}}))).then(t=>({epoches:t,pTokenTotal:t.reduce((e,t)=>e+t.pTokenTotal,0n),vault:e.vault})))])},queryKey:[t,c,e,v]});return null==h||h.forEach(e=>{Object.hasOwn(a,e.vault)||(a[e.vault]=(0,u.Yb)({epoches:[],pTokenTotal:0n,vault:e.vault},0n));let t=null==h?void 0:h.find(t=>t.vault==e.vault);t&&(a[e.vault]=t)}),a}function useCalcClaimable(e){return(0,c.useMemo)(()=>{let t=e.epoches.filter(e=>e.claimableAssetBalance&&e.settled);return{ids:t.map(e=>e.epochId),claimable:t.reduce((e,t)=>e+t.claimableAssetBalance,0n)}},[e.epoches])}}}]);